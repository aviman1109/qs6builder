alter table TsUnit add FSupportVersion bit;
insert into TsField set FId='c5479268-1c70-4449-b2ab-2f27dc37d815', FUnitId='00000000-0000-0000-0001-000000000001', FName='FSupportVersion',        FTitle='支持历史版本',			FType='CheckBox',            FSize=0,   FVisible=1, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=1, FDictionaryId=null,                                   FEntityUnitId=null,                                   FSupportLocalText=null, FLocalTextField=null, FSelectListFilterSql=null, FSourceType='local', FJoinField=null, FSourceField=null, FSource=null, FColSpan=1, FRowSpan=1, FIsNewRow=null, FListWidth=80,  FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null,                     FValidation=null, FRelationCapacity=null;

insert into TsI18nString set FCode='T.Qs.Page.VersionName',							FId='1cdcda5b-bda5-49ab-af7e-0d33f803b079', FValue='${0}版本列表';
insert into TsI18nString set FCode='T.Qs.Page.VersionTitle',						FId='79764262-cb41-4278-bcb7-dd16e719e6ba', FValue='版本';
insert into TsI18nString set FCode='T.Qs.Version.SaveConfirm',						FId='5399e983-0319-4843-8e8d-cbe65a26c782', FValue='您是否要将原数据保存为历史版本？';
insert into TsI18nString set FCode='T.Qs.Version.RestoreConfirm',					FId='1f3ead13-4d5b-482a-860e-87d47041d518', FValue='请确认是否要将该版本还原？\n如果执行还原，该版本的内容将被写入业务数据，原业务数据将被保存为新的历史版本。';

java setEditFields('541c707d-79dd-4dbb-85fc-1a214fd5fce4', 'FName,FCode,FIcon,FModuleId,FOpenMode,FIsSlaveUnit,FMasterUnitId,FIsTreeStructure,FCreateDefaultWorkflow,FSupportUser,FSupportDepartment,FSupportEditType,FSupportAttachment,FSupportDataPrivilege,FSupportBusinessLog,FSupportNote,FSupportSort,FRecordCreateInfo,FRecordUpdateInfo,FDataSource,FTable,FKeyField,FKeyType,FNameField,FMasterField,FHomeClassName,FDaoClassName,FServiceClassName,FActionClassName,FUnitFilterSql,FBusinessFilterSql,FDescription,FOpenViewPageFirst,FSupportVersion');
java setFormFields('541c707d-79dd-4dbb-85fc-1a214fd5fce4', '(59d36e10-fa9b-4ca7-8650-f4bc2333c5f0,基本信息,FName|FCode|FIcon|FModuleId|FOpenMode|FIsSlaveUnit|FMasterUnitId|FIsTreeStructure|FCreateDefaultWorkflow|FSupportUser|FSupportDepartment|FSupportEditType|FSupportDataPrivilege|FSupportNote|FSupportAttachment|FSupportVersion|FSupportBusinessLog|FRecordCreateInfo|FRecordUpdateInfo|FSupportSort|FEditId,(70cd09f2-5607-4d3d-a4e4-15a010b5c2d0,数据库设置,FDataSource|FTable|FKeyField|FKeyType|FNameField|FMasterField)(f3c8ed03-71a9-44ea-866a-ce74f02fb94e,类设置,FHomeClassName|FDaoClassName|FServiceClassName|FActionClassName)(f3f089fa-9689-41aa-abe8-2430f90869c9,高级设置))(8716f3a5-7c55-4a1d-b4d4-adde4702a211,其它信息,(a9fb9172-544a-4871-a6be-6ac416d6a75b,阅览设置,FOpenViewPageFirst)(d1882fc0-77a8-442f-9cde-2857b6c08760,过滤条件,FUnitFilterSql|FBusinessFilterSql)(88b5af9a-d39d-493d-b1f9-db23b282327e,描述,FDescription))');

--Qs.Version--------------------------------------------------------------------

create table TsVersion
(
	FId uuid primary key,
	FName varchar(50),
	FUnitId uuid,
	FEntityId uuid,
	FNumber int,
	FUserId uuid,
	FSaveTime timestamp,
	FData varchar(1000000)
);

insert into TsUnit set FId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FCode='Qs.Version', FName='历史版本', FIcon='quicksilver/image/unit/Version.gif', FEditId='541c707d-79dd-4dbb-85fc-1a214fd5fce4', FModuleId='00000000-0000-0000-0008-990000000010', FOpenMode='System', FIsTreeStructure=0, FMaxTreeLevel=null, FIsSlaveUnit=0, FMasterUnitId=null, FCreateDefaultWorkflow=0, FSupportUser=0, FSupportDepartment=0, FSupportEditType=0, FSupportAttachment=0, FSupportDataPrivilege=0, FSupportBusinessLog=0, FSupportNote=0, FSupportSort=0, FSupportPrivilegeField=0, FSupportEqualQuery=0, FExtraQueryResultLimit=0, FRecordCreateInfo=0, FRecordUpdateInfo=0, FRecordDeleteInfo=0, FQueryFormAutoQuery=0, FOpenViewPageFirst=0, FDataSource='default', FTable='TsVersion', FKeyField='FId', FKeyType='Uuid', FNameField='FName', FMasterField=null, FHomeClassName='com.jeedsoft.quicksilver.version.VersionHome', FDaoClassName='com.jeedsoft.quicksilver.version.dao.impl.VersionDaoImpl', FServiceClassName='com.jeedsoft.quicksilver.version.service.impl.VersionServiceImpl', FActionClassName='com.jeedsoft.quicksilver.version.action.impl.VersionActionImpl', FUnitFilterSql='', FBusinessFilterSql='', FDescription='', FSupportVersion=null;

insert into TsField set FId='4e06c1e7-3655-4498-aa63-e83f28166cdd', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FName='FData',     FTitle='数据',     FType='TextBox',          FSize=1000000, FVisible=1, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=1, FDictionaryId=null, FEntityUnitId=null,                                   FSupportLocalText=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=0, FRowSpan=8, FIsNewRow=0,    FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null, FValidation=null;
insert into TsField set FId='e049398e-5cfb-40d7-9a2a-6f013c59bd0b', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FName='FEntityId', FTitle='实体ID',   FType='InputBox-Uuid',    FSize=null,    FVisible=0, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=0, FDictionaryId=null, FEntityUnitId=null,                                   FSupportLocalText=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=1, FRowSpan=1, FIsNewRow=0,    FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null, FValidation=null;
insert into TsField set FId='7f0236cf-9bee-48ae-8d23-40986375d2cc', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FName='FId',       FTitle='ID',       FType='InputBox-Key',     FSize=null,    FVisible=0, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=0, FDictionaryId=null, FEntityUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FSupportLocalText=null, FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListFilterSql=null, FSourceType='local', FJoinField=null, FSourceField=null, FSource=null, FColSpan=1, FRowSpan=1, FIsNewRow=null, FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null, FValidation=null;
insert into TsField set FId='2cf3ca5a-8d90-4815-9290-8b3279227d02', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FName='FName',     FTitle='名称',     FType='InputBox-Text',    FSize=50,      FVisible=1, FFilterByRole=0, FRequired=1, FReadOnly=0, FQueryable=1, FDictionaryId=null, FEntityUnitId=null,                                   FSupportLocalText=null, FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListFilterSql=null, FSourceType='local', FJoinField=null, FSourceField=null, FSource=null, FColSpan=1, FRowSpan=1, FIsNewRow=null, FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null, FValidation=null;
insert into TsField set FId='eee82caf-9df0-45df-8e30-acae929bfaa5', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FName='FNumber',   FTitle='版本号',   FType='InputBox-Integer', FSize=null,    FVisible=1, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=1, FDictionaryId=null, FEntityUnitId=null,                                   FSupportLocalText=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=1, FRowSpan=1, FIsNewRow=0,    FListWidth=60,  FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null, FValidation=null;
insert into TsField set FId='1d300d3a-6915-4720-8424-ea8aa588f782', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FName='FSaveTime', FTitle='保存时间', FType='DateBox-DateTime', FSize=null,    FVisible=1, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=1, FDictionaryId=null, FEntityUnitId=null,                                   FSupportLocalText=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=1, FRowSpan=1, FIsNewRow=0,    FListWidth=120, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null, FValidation=null;
insert into TsField set FId='4b7bf41f-8fb0-4d2a-9f2e-32a1717e130c', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FName='FUnitId',   FTitle='单元',     FType='EntityBox',        FSize=null,    FVisible=1, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=1, FDictionaryId=null, FEntityUnitId='00000000-0000-0000-0001-000000000001', FSupportLocalText=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=1, FRowSpan=1, FIsNewRow=0,    FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null, FValidation=null;
insert into TsField set FId='3bec57d3-08c8-490f-afd2-715de998c441', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FName='FUserId',   FTitle='保存人',   FType='EntityBox',        FSize=null,    FVisible=1, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=1, FDictionaryId=null, FEntityUnitId='00000000-0000-0000-0001-000000001002', FSupportLocalText=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=1, FRowSpan=1, FIsNewRow=0,    FListWidth=120, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null, FValidation=null;

java setOrderFields('9638ca92-70a6-45eb-945c-4bf98d0187d3', 'FNumber', '1');

insert into TsRelation set FId='713d0eca-6eaf-4527-9a43-f0b67088f9c7', FOppositeId='a76a3d88-21bb-428f-a62f-08c3b7f92a3d', FName='历史版本-单元',   FOppositeName='单元-历史版本',   FUnitId1='9638ca92-70a6-45eb-945c-4bf98d0187d3', FUnitId2='00000000-0000-0000-0001-000000000001', FType='field', FTable=null, FField1='FId', FField2='FUnitId', FDeleteAction1='cancel', FDeleteAction2='unset', FPrivilegeTypeId1=null, FPrivilegeTypeId2=null;
insert into TsRelation set FId='eb7776da-bd39-48a3-ad23-a3b0c8d9e804', FOppositeId='6cd65bba-6bd6-4620-8c20-22260e91cb94', FName='历史版本-保存人', FOppositeName='保存人-历史版本', FUnitId1='9638ca92-70a6-45eb-945c-4bf98d0187d3', FUnitId2='00000000-0000-0000-0001-000000001002', FType='field', FTable=null, FField1='FId', FField2='FUserId', FDeleteAction1='cancel', FDeleteAction2='unset', FPrivilegeTypeId1=null, FPrivilegeTypeId2=null;

insert into TsPage set FId='f74055e2-dad3-454c-9e04-3f52c7e2d93a', FName='历史版本主列表',   FTitle='历史版本列表', FCode='Qs.Version.List',       FPlatform='Computer', FType='EntityList', FIcon='quicksilver/image/unit/Version.gif', FUrl='quicksilver/page/template/EntityList.jsp',       FActionMethodName='Qs.Version.prepareList',       FLoadHandler=null, FRelationId=null, FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FMasterUnitId=null,                                   FIsSlavePage=0, FIndex=null, FDialogWidth=null, FDialogHeight=null, FHasViewFrame=null, FVisible=1, FDescription=null;
insert into TsPage set FId='88999b24-9939-4647-8ad6-da95b640fcb8', FName='历史版本选择列表', FTitle='历史版本列表', FCode='Qs.Version.SelectList', FPlatform='Computer', FType='EntityList', FIcon='quicksilver/image/unit/Version.gif', FUrl='quicksilver/page/template/EntityList.jsp',       FActionMethodName='Qs.Version.prepareList',       FLoadHandler=null, FRelationId=null, FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FMasterUnitId=null,                                   FIsSlavePage=0, FIndex=null, FDialogWidth=null, FDialogHeight=null, FHasViewFrame=null, FVisible=1, FDescription=null;
insert into TsPage set FId='5bc7ffc7-9b01-4bbc-b49b-8fe5d6251f7f', FName='历史版本实体列表', FTitle='历史版本',     FCode='Qs.Version.EntityForm', FPlatform='Computer', FType='Other',      FIcon='quicksilver/image/unit/Version.gif', FUrl='quicksilver/page/version/VersionEntityForm.jsp', FActionMethodName='Qs.Version.prepareEntityForm', FLoadHandler=null, FRelationId=null, FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FMasterUnitId=null,                                   FIsSlavePage=0, FIndex=null, FDialogWidth=453,  FDialogHeight=604,  FHasViewFrame=0,    FVisible=1, FDescription='';
insert into TsPage set FId='512fba46-1960-4e5d-b9de-6e8c326f3c1e', FName='历史版本表单',     FTitle='表单',         FCode='Qs.Version.Edit',       FPlatform='Computer', FType='EntityEdit', FIcon='quicksilver/image/unit/Edit.gif',    FUrl='quicksilver/page/template/EntityEdit.jsp',       FActionMethodName='Qs.Version.prepareEdit',       FLoadHandler=null, FRelationId=null, FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FMasterUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FIsSlavePage=1, FIndex=1,    FDialogWidth=604,  FDialogHeight=453,  FHasViewFrame=null, FVisible=1, FDescription=null;

--历史版本主列表
insert into TsToolItem set FId='515e14fd-58eb-4c37-840b-fcf9e90ca037', FPageId='f74055e2-dad3-454c-9e04-3f52c7e2d93a', FCode='QuerySchema',       FName='请选择查询方案或输入关键字', FHint=null, FLabel=null, FType='ComboBox-Inputable', FAlign='left',  FIndex=1, FWidth=175, FIcon=null,                                FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource='QuerySchema',  FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doQuerySchemaChange';
insert into TsToolItem set FId='bbd32fef-29b0-4685-8a27-617b770f99a7', FPageId='f74055e2-dad3-454c-9e04-3f52c7e2d93a', FCode='QuerySchemaConfig', FName=null,                         FHint=null, FLabel=null, FType='Button',             FAlign='left',  FIndex=2, FWidth=0,   FIcon='quicksilver/image/16/Config.gif',   FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doQuerySchemaConfig';
insert into TsToolItem set FId='c21171c0-7600-4e77-a1bd-d4c4db182cd0', FPageId='f74055e2-dad3-454c-9e04-3f52c7e2d93a', FCode='QuerySchemaLock',   FName=null,                         FHint=null, FLabel=null, FType='Button',             FAlign='left',  FIndex=3, FWidth=0,   FIcon='quicksilver/image/16/LockOpen.png', FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doQuerySchemaLockClick';
insert into TsToolItem set FId='599920af-741e-4069-b9d6-67abf0b125f0', FPageId='f74055e2-dad3-454c-9e04-3f52c7e2d93a', FCode='Add',               FName='新增',                       FHint=null, FLabel=null, FType='Button',             FAlign='right', FIndex=1, FWidth=0,   FIcon='quicksilver/image/16/Add.gif',      FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doAdd';
insert into TsToolItem set FId='76c75439-9fd2-4bba-a25b-404b55279d9a', FPageId='f74055e2-dad3-454c-9e04-3f52c7e2d93a', FCode='Open',              FName='打开',                       FHint=null, FLabel=null, FType='Button',             FAlign='right', FIndex=2, FWidth=0,   FIcon='quicksilver/image/16/Open.gif',     FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doOpen';
insert into TsToolItem set FId='110e0b05-cf22-4851-8eb9-ef4b66272683', FPageId='f74055e2-dad3-454c-9e04-3f52c7e2d93a', FCode='Delete',            FName='删除',                       FHint=null, FLabel=null, FType='Button',             FAlign='right', FIndex=3, FWidth=0,   FIcon='quicksilver/image/16/Delete.gif',   FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doDelete';
insert into TsToolItem set FId='6944c265-2421-43c6-b963-b9e3af145d37', FPageId='f74055e2-dad3-454c-9e04-3f52c7e2d93a', FCode='Refresh',           FName='刷新',                       FHint=null, FLabel=null, FType='Button',             FAlign='right', FIndex=4, FWidth=0,   FIcon='quicksilver/image/16/Refresh.gif',  FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doRefresh';
insert into TsToolItem set FId='d66967fa-37f5-4dfb-8cdc-a06329d676cf', FPageId='f74055e2-dad3-454c-9e04-3f52c7e2d93a', FCode='Other',             FName=null,                         FHint=null, FLabel=null, FType='ComboButton',        FAlign='right', FIndex=5, FWidth=0,   FIcon='quicksilver/image/16/Other.gif',    FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource='SubItemTable', FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='None',       FHandlePageId=null, FDefaultEventHandler=null;
insert into TsToolItemSubItem set FId='afd65c4c-eea7-482f-9298-c465ea3829cd', FToolItemId='d66967fa-37f5-4dfb-8cdc-a06329d676cf', FCode='Import',      FName='导入',       FExpandMode='None', FIndex=1, FIcon='quicksilver/image/16/Import.gif', FVisibleCondition='', FEnableCondition='', FHandleType='JavaScript', FHandlePageId=null, FEventHandler='EntityList.doImport';
insert into TsToolItemSubItem set FId='ed9fb072-b4f5-4f4c-a624-0585b1c52876', FToolItemId='d66967fa-37f5-4dfb-8cdc-a06329d676cf', FCode='ExcelExport', FName='导出 Excel', FExpandMode='None', FIndex=2, FIcon='quicksilver/image/16/Excel.gif',  FVisibleCondition='', FEnableCondition='', FHandleType='JavaScript', FHandlePageId=null, FEventHandler='EntityList.doExcelExport';
insert into TsToolItemSubItem set FId='b37570c5-d614-4087-944e-7db69448e0e4', FToolItemId='d66967fa-37f5-4dfb-8cdc-a06329d676cf', FCode='BillPrint',   FName='单据打印',   FExpandMode='None', FIndex=3, FIcon='quicksilver/image/unit/Bill.gif', FVisibleCondition='', FEnableCondition='', FHandleType='JavaScript', FHandlePageId=null, FEventHandler='EntityList.doBillPrint';
insert into TsToolItemProperty set FId='0c7d3585-1395-467a-88eb-af507b10dcfa', FToolItemId='515e14fd-58eb-4c37-840b-fcf9e90ca037', FName='onkeydown', FValue='EntityList.doQuerySchemaKeyDown';

--历史版本选择列表
insert into TsToolItem set FId='61651b8a-2120-4328-aca6-fdf395f6afaf', FPageId='88999b24-9939-4647-8ad6-da95b640fcb8', FCode='QuerySchema',       FName='请选择查询方案或输入关键字', FHint=null, FLabel=null, FType='ComboBox-Inputable', FAlign='left',  FIndex=1, FWidth=175, FIcon=null,                                FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource='QuerySchema', FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doQuerySchemaChange';
insert into TsToolItem set FId='bf2f5ceb-7593-435e-83a8-f86491c20ce7', FPageId='88999b24-9939-4647-8ad6-da95b640fcb8', FCode='QuerySchemaConfig', FName=null,                         FHint=null, FLabel=null, FType='Button',             FAlign='left',  FIndex=2, FWidth=0,   FIcon='quicksilver/image/16/Config.gif',   FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,          FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doQuerySchemaConfig';
insert into TsToolItem set FId='4be61760-09f2-47f2-aab4-db04c7e6f2a9', FPageId='88999b24-9939-4647-8ad6-da95b640fcb8', FCode='QuerySchemaLock',   FName=null,                         FHint=null, FLabel=null, FType='Button',             FAlign='left',  FIndex=3, FWidth=0,   FIcon='quicksilver/image/16/LockOpen.png', FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,          FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doQuerySchemaLockClick';
insert into TsToolItem set FId='51b05342-e784-487e-83bf-f88fc51279d1', FPageId='88999b24-9939-4647-8ad6-da95b640fcb8', FCode='ConfirmSelection',  FName='确定',                       FHint=null, FLabel=null, FType='Button',             FAlign='right', FIndex=1, FWidth=0,   FIcon='quicksilver/image/16/Ok.gif',       FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,          FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doSelectListConfirm';
insert into TsToolItem set FId='59d95192-0cb7-4863-929b-498a65eb0491', FPageId='88999b24-9939-4647-8ad6-da95b640fcb8', FCode='Add',               FName='新增',                       FHint=null, FLabel=null, FType='Button',             FAlign='right', FIndex=2, FWidth=0,   FIcon='quicksilver/image/16/Add.gif',      FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,          FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doAdd';
insert into TsToolItem set FId='f90c57b8-bf7c-433b-81b7-6694067e53d1', FPageId='88999b24-9939-4647-8ad6-da95b640fcb8', FCode='Open',              FName='打开',                       FHint=null, FLabel=null, FType='Button',             FAlign='right', FIndex=3, FWidth=0,   FIcon='quicksilver/image/16/Open.gif',     FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,          FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityList.doOpen';
insert into TsToolItemProperty set FId='fc5a7215-5246-4c92-875c-5057485a738d', FToolItemId='61651b8a-2120-4328-aca6-fdf395f6afaf', FName='onkeydown', FValue='EntityList.doQuerySchemaKeyDown';

--历史版本实体列表
insert into TsToolItem set FId='9cede213-161f-4947-a29c-27ad5a534425', FPageId='5bc7ffc7-9b01-4bbc-b49b-8fe5d6251f7f', FCode='Restore', FName='还原', FHint=null, FLabel=null, FType='Button', FAlign='right', FIndex=1, FWidth=null, FIcon='quicksilver/image/16/Save.gif', FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null, FDictionaryId=null, FSubItemRoutine='', FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='VersionEntityForm.doRestore';

--历史版本表单
insert into TsToolItem set FId='58a3ab32-734a-44db-850a-987490928f36', FPageId='512fba46-1960-4e5d-b9de-6e8c326f3c1e', FCode='Save',  FName='保存', FHint=null, FLabel=null, FType='Button',      FAlign='right', FIndex=1, FWidth=0, FIcon='quicksilver/image/16/Save.gif',  FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FDefaultEventHandler='EntityEdit.doSave';
insert into TsToolItem set FId='2a177238-a535-4a45-bc29-b292a004879b', FPageId='512fba46-1960-4e5d-b9de-6e8c326f3c1e', FCode='Other', FName=null,   FHint=null, FLabel=null, FType='ComboButton', FAlign='right', FIndex=2, FWidth=0, FIcon='quicksilver/image/16/Other.gif', FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource='SubItemTable', FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='None',       FHandlePageId=null, FDefaultEventHandler=null;
insert into TsToolItemSubItem set FId='4a6cbb19-11f8-4544-bc6e-0a73cfda5928', FToolItemId='2a177238-a535-4a45-bc29-b292a004879b', FCode='BillPrint', FName='单据打印', FExpandMode='None', FIndex=1, FIcon='quicksilver/image/unit/Bill.gif', FVisibleCondition='', FEnableCondition='', FHandleType='JavaScript', FHandlePageId=null, FEventHandler='EntityEdit.doBillPrint';

insert into TsForm set FDefault=1, FGroupMode='Double', FId='39942e8e-29fd-4e6d-817a-5c7e6db96846', FIndex=1, FName='默认', FPageId=null, FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3';
java setFormFields('39942e8e-29fd-4e6d-817a-5c7e6db96846', '(b2f9a797-7257-470b-b4b0-957a0822cb52,基本信息,FUnitId|FNumber|FUserId|FSaveTime|FName)');

insert into TsList set FDefault=1, FId='d8df5eff-b8c7-45f7-99db-26405b860498', FIndex=null, FMultiPage=1, FName='历史版本列表（默认）', FPageId=null,                                   FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3';
insert into TsList set FDefault=0, FId='0a4486e8-3d39-4b90-b41f-308a181ce6bb', FIndex=null, FMultiPage=1, FName='历史版本选择列表',     FPageId='88999b24-9939-4647-8ad6-da95b640fcb8', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3';
insert into TsList set FDefault=0, FId='6631b29d-ee5f-40d4-8e98-0770d917c70b', FIndex=null, FMultiPage=1, FName='历史版本首页列表',     FPageId='9b796431-f132-49d1-b306-5d1d618f9c1b', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3';
java setListFields('d8df5eff-b8c7-45f7-99db-26405b860498', 'FNumber,FUserId,FSaveTime');
java setListFields('0a4486e8-3d39-4b90-b41f-308a181ce6bb', 'FNumber,FUserId,FSaveTime');
java setListFields('6631b29d-ee5f-40d4-8e98-0770d917c70b', 'FNumber,FUserId,FSaveTime');

insert into TsPrivilege set FId='fff9311a-1adb-438a-81f7-61a1c515ce6a', FName='历史版本管理', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FModuleId='00000000-0000-0000-0008-990000000010', FPrivilegeTypeId='00000000-0000-0000-1005-000000000006', FUseExisting=0, FSourcePrivilegeId=null, FCanBeUser=0, FCanBeDepartment=0, FCanBeGlobal=1, FUserFields=null, FDepartmentFields=null, FExtraOrSql=null, FEditId='5992c3d2-0b4a-478c-bbfa-2089819ad575', FIndex=null;
insert into TsPrivilege set FId='2c530a1f-dfa3-4e8e-8498-a7e21a76ced3', FName='历史版本查看', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FModuleId='00000000-0000-0000-0008-990000000010', FPrivilegeTypeId='00000000-0000-0000-1005-000000000002', FUseExisting=0, FSourcePrivilegeId=null, FCanBeUser=0, FCanBeDepartment=0, FCanBeGlobal=1, FUserFields=null, FDepartmentFields=null, FExtraOrSql=null, FEditId='5992c3d2-0b4a-478c-bbfa-2089819ad575', FIndex=null;

insert into TsQuerySchema set FId='60d6fe7f-fdac-4a07-a8a8-b10a58d950eb', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FName='全部历史版本',   FType='condition',  FPublic=1, FTemp=0, FGlobalAutoQuery=0, FShare=0, FUserId=null, FConditionId=null, FSqlSource='None', FSql=null, FIndex=1, FUpdateTime=null, FOriginSchemaId=null;
insert into TsQuerySchema set FId='ea3bb739-d748-4f60-9975-35c97738d778', FUnitId='9638ca92-70a6-45eb-945c-4bf98d0187d3', FName='历史版本收藏夹', FType='collection', FPublic=1, FTemp=0, FGlobalAutoQuery=0, FShare=0, FUserId=null, FConditionId=null, FSqlSource='None', FSql=null, FIndex=3, FUpdateTime=null, FOriginSchemaId=null;

--------------------------------------------------------------------------------

java refreshSerial('TsFieldGroup', 'FFormId');

insert into TsRelation (FId, FOppositeId, FUnitId1, FUnitId2, FName, FOppositeName, FType, FTable, FField1, FField2, FDeleteAction1, FDeleteAction2, FPrivilegeTypeId1, FPrivilegeTypeId2)
select FOppositeId, FId, FUnitId2, FUnitId1, FOppositeName, FName, FType, FTable, FField2, FField1, FDeleteAction2, FDeleteAction1, FPrivilegeTypeId2, FPrivilegeTypeId1
from TsRelation T
where not exists (select * from TsRelation where FId = T.FOppositeId);

--------------------------------------------------------------------------------

update TsSystemParameter set FValue='20121230-01' where FKey='bac6459a-db58-49b1-b014-9aed20b3b3ef' and FValue < '20121230-01';
