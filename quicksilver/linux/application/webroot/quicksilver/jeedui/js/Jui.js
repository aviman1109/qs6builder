var Jui={version:"6.9.9.1.3",use:function(){var c={"Jui.option.Form":["Jui.option.BackForm","Jui.option.TabStrip","Jui.option.Grid","Jui.option.List"],"Jui.option.List":["Jui.option.BackForm","Jui.option.Grid"],"Jui.graph.StretchGraph":["Jui.graph.Graph"]};
var a=Jui.array.toSet(["Jui.option.BackForm"]);
if(Jui.use._imported==null){Jui.use._imported={};
}for(var b=0;
b<arguments.length;
++b){var d=arguments[b];
if(d.indexOf(".")==-1){d="Jui.option."+d;
}if(!Jui.use._imported[d]&&!/^Jui.basic./.test(d)){Jui.use._imported[d]=true;
Jui.use.apply(Jui,c[d]||[]);
var e=d.split(".").slice(1).join("/");
Jui.script.importJs(Jui.script.getPath()+"/"+e+".js");
if(!(d in a)){Jui.script.importCss(Jui.theme.getPath()+"/"+e+".css");
}}}},$p:function(c){var d=" ";
for(var a in c){var b=c[a];
if(b!=null){d+=a+"='"+(""+b).replace(/&/g,"&amp;").replace(/\>/g,"&gt;")+"' ";
}}return d;
},$h:function(a,b){if(a==null){return"";
}if(typeof(a)!="string"){a=a+"";
}a=a.replace(/&/g,"&amp;").replace(/\>/g,"&gt;").replace(/\</g,"&lt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br>");
return b?a.replace(/ /g,"&nbsp;"):a;
},$s:function(){var c=[];
for(var b=arguments.length-1;
b>=0;
--b){var a=arguments[b];
if(typeof(a)=="string"&&!Jui.string.isEmpty(a)){c=c.concat(a.split(";"));
}else{if(typeof(a)=="object"&&a!=null){for(var d in a){if(a[d]!=null){c.push(d+":"+a[d]);
}}}}}return c.length==0?null:c.join(";");
},$define:function(f,g,e){var h=window;
var b=f.split(".");
for(var c=0;
c<b.length-1;
++c){var a=b[c];
if(h[a]==null){h[a]={};
}h=h[a];
}var d=function(){};
if(g!=null){Jui.object.merge(d,g,true);
d.prototype=new g();
}if(e!=null){for(var c=0;
c<e.length;
++c){var j=e[c];
Jui.object.merge(d,j,false);
Jui.object.merge(d.prototype,j.prototype,false);
}}d.superClass=g;
d.toString=function(){return"class "+f;
};
h[b[b.length-1]]=d;
},$bind:function(a,b){a.element=b;
if(b!=null){b._owner=a;
}},$owner:function(a,b){var c=a;
if(c==null){try{c=event.srcElement;
}catch(c){console.log(Jui.util.getCallStack());
throw c;
}}while(c!=null&&(c._owner==null||b!=null&&c.className.indexOf(b)==-1)){c=c.parentElement;
}return c&&c._owner;
}};
Jui.script={_path:null,getPath:function(){if(Jui.script._path==null){var a=document.getElementsByTagName("script");
var b=a[a.length-1];
Jui.script._path=b.src.replace(/\/[^\/]*$/,"");
}return Jui.script._path;
},importJs:function(a){document.writeln("<script src='"+a+"?v="+Jui.version+"'><\/script>");
},importCss:function(a){document.writeln("<link rel='stylesheet' type='text/css' href='"+a+"?v="+Jui.version+"'>");
}};
Jui.theme={_name:"lightblue",getName:function(){return Jui.theme._name;
},setName:function(a){Jui.theme._name="lightblue";
},getPath:function(){return Jui.script.getPath()+"/../theme/"+Jui.theme.getName();
}};
(function(){})();
Jui.util={clone:function(a){return Jui.util._clone(a,[]);
},coalesce:function(){for(var a=0;
a<arguments.length;
++a){if(!Jui.string.isEmpty(arguments[a])){return arguments[a];
}}},execute:function(func,target){if(func==null){throw new Error("The fuction to execute cannot be null.");
}if(typeof(func)=="string"){if(func.indexOf("(")!=-1){return eval(func);
}var f=eval(func);
if(f==null){throw new Error("Function '"+func+"' does not exist.");
}func=f;
}var args=Jui.array.wrap(arguments).slice(2);
return func.apply(target||window,args);
},alertAndThrow:function(a){alert(a);
throw a;
},getFullUrl:function(a){a=Jui.string.trim(a);
if(!/^http(s?):\/\//i.test(a)){a="http://"+a;
}return a;
},getWeekDayName:function(b,a){var c=a?"Jui.ShortWeekDays":"Jui.LongWeekDays";
return Jui.i18n.getText(c).split(",")[b];
},_clone:function(e,c){if(typeof(e)!="object"||e==null){return e;
}else{if(e instanceof Date){return new Date(e.getTime());
}}for(var b=0;
b<c.length;
++b){if(e==c[b][0]){return c[b][1];
}}if(Jui.array.isArray(e)){var f=[];
c.push([e,f]);
for(var b=0;
b<e.length;
++b){f.push(Jui.util._clone(e[b],c));
}return f;
}else{var a={};
c.push([e,a]);
for(var d in e){a[d]=Jui.util._clone(e[d],c);
}return a;
}},getCallStack:function(){var a=[];
for(var b=arguments.callee.caller.caller;
b!=null;
b=b.caller){a.push(b.toString().replace(/\s+/g," "));
}return a.join("\n");
},getIdentifiers:function(c){var a=[];
var b=/(\w+\$?)/g;
var d;
while((d=b.exec(c))!==null){a.push(d[0]);
}return a;
}};
Jui.popup={_serial:0,_map:{},_currentOwner:null,_currentPopups:[],$create:function(b,a){return Jui.window.getTop().Jui.popup._create(b,a,document);
},_create:function(c,a,d){var b=Jui.dom.insertHtml(document.body,"BeforeEnd",c);
b._owner=a;
b._document=d;
Jui.popup._map[++Jui.popup._serial]=b;
return b;
},$show:function(c,f,d,a,e){var b=Jui.window.getTop();
if(!f.isTop&&b!=window){var g=Jui.window.getCoord();
f.left=f.left==null?null:f.left+g.x;
f.right=f.right==null?null:f.right+g.x;
f.top=f.top==null?null:f.top+g.y;
f.bottom=f.bottom==null?null:f.bottom+g.y;
}return b.Jui.popup._show(c,f,d,a,e);
},_show:function(a,b,c,o,m){if(a._owner!=Jui.popup._currentOwner){Jui.popup._hideCurrent();
Jui.popup._currentOwner=a._owner;
}for(var h=Jui.popup._currentPopups.length-1;
h>=0;
--h){if(Jui.popup._currentPopups[h]==a){Jui.popup._currentPopups.splice(h,1);
}}var f=Jui.theme["Popup.Margin"];
var e=document.documentElement.scrollLeft;
var d=document.documentElement.scrollTop;
var g=b.right+1;
var l=document.documentElement.clientWidth-b.left;
var j=b.bottom+1;
var p=document.documentElement.clientHeight-b.top;
if(m&&j<o&&p<o){o=Math.max(j-f,p-f,2);
}var n=l<c&&g>=c;
var k=p<o&&j>=o;
a.style.left=e+(n?b.right-c+1:b.left)+"px";
a.style.top=d+(k?b.bottom-o+1:b.top)+"px";
a.style.width=c+"px";
a.style.height=o+"px";
a.style.display="block";
a.scrollTop=0;
Jui.popup._currentPopups.push(a);
return{isLeft:n,isTop:k};
},$isOpen:function(a){return a!=null&&a.style.display=="block";
},$hide:function(a){Jui.window.getTop().Jui.popup._hide(a);
},_hide:function(a){a.style.display="none";
var b=Jui.popup._currentPopups;
for(var c=b.length-1;
c>=0;
--c){if(b[c]==a){b.splice(c,1);
}}if(b.length==0){Jui.popup._currentOwner=null;
}},_hideCurrent:function(){if(window!=Jui.window.getTop()){Jui.window.getTop().Jui.popup._hideCurrent();
}if(Jui.popup._currentOwner!=null){try{if(Jui.popup._currentOwner.$hidePopup!=null){Jui.popup._currentOwner.$hidePopup();
Jui.popup._currentPopups=[];
Jui.popup._currentOwner=null;
return;
}}catch(c){}for(var b=0,a=Jui.popup._currentPopups;
b<a.length;
++b){a[b].style.display="none";
}Jui.popup._currentPopups=[];
try{if(Jui.popup._currentOwner.$doPopupHide!=null){Jui.popup._currentOwner.$doPopupHide();
}}catch(c){}Jui.popup._currentOwner=null;
}},doWindowLoad:function(){Jui.popup._windowInnerWidth=window.innerWidth;
Jui.popup._windowInnerHeight=window.innerHeight;
},doWindowResize:function(){if(window.innerWidth!=Jui.popup._windowInnerWidth||window.innerHeight!=Jui.popup._windowInnerHeight){Jui.popup._windowInnerWidth=window.innerWidth;
Jui.popup._windowInnerHeight=window.innerHeight;
Jui.popup._hideCurrent();
}},doDocumentMouseDown:function(){Jui.popup._hideCurrent();
},$free:function(a){a._document=null;
Jui.dom.removeElement(a);
},_garbageCollect:function(){var g=0;
for(var c in Jui.popup._map){try{var b=Jui.popup._map[c];
if(b._document==null||!b._document._ready){delete Jui.popup._map[c];
continue;
}var a=b._owner;
while(a.element==null&&a.getOwner!=null&&a.getOwner()!=null){a=a.getOwner();
}var d=a.element;
while(d!=null&&d.parentElement!=null){d=d.parentElement;
}if(d!=null&&d.tagName!="HTML"){delete Jui.popup._map[c];
continue;
}++g;
}catch(f){delete Jui.popup._map[c];
}}if(g>1000){console.warn("too many("+g+") popups.");
}}};
Jui.random={_letters:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_hex_digits:"0123456789abcdef".split(""),_sumEventX:0,_sumEventY:0,_serial:0,_crypto:window.crypto||window.msCrypto,next:function(){var i=Jui.random._nextIntegers();
var f=i[0]^i[1];
var e=i[2]^i[3];
var h=f&33554431;
var g=e&268435455;
return(h*268435456+g)/(33554431*268435456+268435455);
},nextInt:function(b){var c=Jui.random._nextIntegers();
var a=c[0]^c[1]^c[2]^c[3];
if((b||0)>0){return(a&2147483647)%b;
}else{return a;
}},nextString:function(d,c,a){if(d==null){d=3;
}if(c==null){c=10;
}if(a==null){a=Jui.random._letters;
}var f=d==c?d:d+Jui.random.nextInt(c-d+1);
var b=[];
for(var e=0;
e<f;
++e){b.push(a.charAt(Jui.random.nextInt(a.length)));
}return b.join("");
},nextUuid:function(){var d=Jui.random._nextBytes();
d[6]=64|(d[6]&15);
var f=[4,6,8,10];
var c=[];
for(var e=0;
e<d.length;
++e){var a=d[e];
if(e==4||e==6||e==8||e==10){c.push("-");
}c.push(Jui.random._hex_digits[(a>>4)&15]);
c.push(Jui.random._hex_digits[a&15]);
}return c.join("");
},doMouseMove:function(a){Jui.random._sumEventX=(Jui.random._sumEventX+a.screenX)%2147483647;
Jui.random._sumEventY=(Jui.random._sumEventY+a.screenY)%2147483647;
},_nextIntegers:function(){if(Jui.random._crypto==null){return Jui.md5.asIntegers(Jui.random._getHashTarget());
}var a=new Int32Array(4);
Jui.random._crypto.getRandomValues(a);
return a;
},_nextBytes:function(){if(Jui.random._crypto==null){return Jui.md5.asUint8Array(Jui.random._getHashTarget());
}var a=new Uint8Array(16);
Jui.random._crypto.getRandomValues(a);
return a;
},_getHashTarget:function(){var a=[];
a.push(new Date().getTime());
a.push(Jui.random._serial++);
a.push(Jui.random._sumEventX);
a.push(Jui.random._sumEventY);
return a.join("");
}};
Jui.message={alert:function(a,b){return Jui.basic.MessageBox.open({icon:"warning",text:a,callback:b});
},info:function(a,b){return Jui.basic.MessageBox.open({icon:"info",text:a,callback:b});
},error:function(a,b){return Jui.basic.MessageBox.open({icon:"error",text:a,callback:b});
},confirm:function(a,d,c){var b=Jui.basic.MessageBox;
return b.open({icon:"question",text:a,buttons:b.OKCANCEL,callback:function(e){if(d!=null&&(c||e!="cancel")){d(e);
}}});
},ync:function(a,d,c){var b=Jui.basic.MessageBox;
return b.open({icon:"question",text:a,buttons:b.YESNOCANCEL,callback:function(e){if(d!=null&&(c||e!="cancel")){d(e);
}}});
},hint:function(b,a,c){return Jui.basic.MessageBox.open({type:"hint",icon:a,text:b,callback:c});
},htmlHint:function(b,a,c){return Jui.basic.MessageBox.open({type:"hint",icon:a,html:b,callback:c});
},success:function(a,b){return Jui.basic.MessageBox.open({type:"hint",icon:"success",duration:1,text:a,callback:b});
},progress:function(a){return Jui.basic.ProgressBar.open({callback:a});
}};
Jui.event={preventDefault:function(){var a=event||Jui.window.getTop().event;
if(a.preventDefault){a.preventDefault();
}else{a.returnValue=false;
}},stopPropagation:function(){var a=event||Jui.window.getTop().event;
if(a.stopPropagation){a.stopPropagation();
}else{a.cancelBubble=true;
}},stop:function(){Jui.event.preventDefault();
Jui.event.stopPropagation();
},addCustomEventListener:function(e,b,f,a){if(f==null){throw"listener must be a function";
}var d=Jui.event._getCustomEventHolder(e,b,true);
if(d!=null){var g=d[a?"before":"after"];
for(var c=0;
c<g.length;
++c){if(g[c]==f){return;
}}g.push(f);
}},removeCustomEventListener:function(e,b,f,a){var d=Jui.event._getCustomEventHolder(e,b);
if(d!=null){var g=d[a?"before":"after"];
for(var c=g.length-1;
c>=0;
--c){if(g[c]==f){g.splice(c,1);
}}}},fireCustomEvent:function(f,h,c){var l=Jui.event._getCustomEventHolder(f,h);
if(l!=null){var b=c!="before"&&c!="after";
var a=b?[l.before,l.after]:[l[c]];
for(var g=0;
g<a.length;
++g){for(var d=0;
d<a[g].length;
++d){try{if(a[g][d]()==false){return false;
}}catch(k){console.error(k);
}}}}},_getCustomEventHolder:function(b,a,d){try{if(/^on/.test(a)){a=a.substring(2);
}if(b._juiEvents==null&&d){b._juiEvents={};
}if(b._juiEvents!=null&&b._juiEvents[a]==null&&d){b._juiEvents[a]={before:[],after:[]};
}return b._juiEvents&&b._juiEvents[a];
}catch(c){console.error(c);
}},attach:function(b,a,c){if(b.addEventListener){b.addEventListener(a,c,false);
}else{if(b.attachEvent){b.attachEvent("on"+a,c);
}}},detach:function(b,a,c){if(b.removeEventListener){b.removeEventListener(a,c,false);
}else{if(b.detachEvent){b.detachEvent("on"+a,c);
}}}};
Jui.cast={toBool:function(b,a){if(b==null){return a==true;
}return b==true||(typeof(b)=="string"&&b.toLowerCase()=="true");
},toDate:function(a){switch(a==null?"undefined":typeof(a)){case"number":return new Date(a);
case"string":return Jui.cast._stringToDate(a);
case"object":return Jui.cast._objectToDate(a);
default:return null;
}},toString:function(a,b){switch(a==null?"undefined":typeof(a)){case"boolean":return a.toString();
case"number":return Jui.cast._numberToString(a,b);
case"string":return a;
case"object":return Jui.cast._objectToString(a,b);
case"function":return a.toString();
default:return null;
}},toNumber:function(a){switch(a==null?"undefined":typeof(a)){case"boolean":return a?1:0;
case"number":return a;
case"string":return Jui.cast._stringToNumber(a);
default:return null;
}},toStringWithDigitLength:function(g,e){if(g==0){return"0";
}var h=Math.pow(10,e-1);
var i=0;
while(g<h){i++;
g*=10;
}var f=(g+"").replace(/\..*/,"");
var d=f.length<=i?"0":f.substring(0,f.length-i);
var c=f.length<=i?f:f.substring(f.length-i);
while(c.length<i){c="0"+c;
}c=c.replace(/0+$/,"");
return c==""?d:d+"."+c;
},toFileSizeText:function(d,b){if(d==null){return"";
}var a=["B","KB","MB","GB","TB","PB"];
for(var c=0;
c<a.length;
++c){if(d<10){var e=Jui.cast.toString(d,"0.00");
return(b?e.replace(/\.00/,""):e)+" "+a[c];
}else{if(d<100){var e=Jui.cast.toString(d,"0.0");
return(b?e.replace(/\.0/,""):e)+" "+a[c];
}else{if(d<1000||c==a.length-1){return Jui.cast.toString(d,"0")+" "+a[c];
}else{d=d/1024;
}}}}},_stringToDate:function(c){if(c=="now"){return new Date();
}if(!/^((?:\d\d)?\d\d)-(\d?\d)-(\d?\d)(?: (\d?\d):(\d?\d)(?::(\d?\d)(?:.(\d+))?)?)?$/.test(c)){return null;
}var d=[0,0,0,0,0,0,0];
for(var a=1;
a<=7;
++a){var b=RegExp["$"+a];
if(b==""){break;
}d[a-1]=parseInt(b);
}return new Date(d[0]<100?2000+d[0]:d[0],d[1]-1,d[2],d[3],d[4],d[5],d[6]);
},_objectToDate:function(a){if(a.constructor.toString()==Date.toString()){return a;
}else{return null;
}},_numberToString:function(f,h){if(h==null){return f.toString();
}var b=[];
var e=h.match(/[,0]*(?:\.|$)/)[0].replace(/[,\.]/g,"").length;
var c=h.match(/\.0*|$/)[0].replace(/\./,"").length;
var g=h.match(/,[0#]*(?:\.|$)|$/)[0].replace(/[,\.]/g,"").length;
var a=f<0?"-":"";
f=Math.round(Math.abs(f)*Math.pow(10,c));
for(var d=0;
d<c;
++d,f=Math.floor(f/10)){b.push(f%10);
}if(c>0){b.push(".");
}for(var d=0;
d<e||f>0;
++d,f=Math.floor(f/10)){b.push((f%10)+(d>0&&d%g==0?",":""));
}return a+b.reverse().join("");
},_objectToString:function(k,j){if(k.constructor.toString()!=Date.toString()){return null;
}if(j==null){j="yyyy-MM-dd HH:mm:ss";
}var g=k.getFullYear();
var c=k.getMonth()+1;
var f=k.getDate();
var e=k.getHours();
var b=k.getMinutes();
var l=k.getSeconds();
var a=k.getMilliseconds();
var i=k.getDay();
return j.replace("yyyy",g).replace("yy",g%100<10?"0"+g%100:g%100).replace("MM",c<10?"0"+c:c).replace("M",c).replace("dd",f<10?"0"+f:f).replace("d",f).replace("HH",e<10?"0"+e:e).replace("H",e).replace("mm",b<10?"0"+b:b).replace("m",b).replace("ss",l<10?"0"+l:l).replace("s",l).replace("SSS",a<10?"00"+a:(a<100?"0"+a:a)).replace("S",a).replace("ww",Jui.util.getWeekDayName(i,false)).replace("w",Jui.util.getWeekDayName(i,true));
},_stringToNumber:function(b){var a=parseFloat(b.replace(/,/g,""));
return isNaN(a)?null:a;
}};
Jui.object={isEmpty:function(a){if(a!=null){for(var b in a){if(b!=null){return false;
}}}return true;
},remove:function(a){for(var b=1;
b<arguments.length;
++b){delete a[arguments[b]];
}return a;
},merge:function(g){var f=arguments[arguments.length-1];
var c=f==true;
var d=arguments.length-(typeof(f)=="boolean"?2:1);
for(var b=0;
b<d;
++b){var a=arguments[1+b];
if(a!=null){for(var e in a){if(c||!(e in g)){g[e]=a[e];
}}}}return g;
}};
Jui.window={isTop:function(){return window==Jui.window.getTop();
},getTop:function(){var b=window;
for(var a=window;
a!=a.parent;
){a=a.parent;
try{if(a.Jui!=null){b=a;
}}catch(c){break;
}}return b;
},getCoord:function(){var d={x:0,y:0};
var b=Jui.window.getTop();
for(var a=window;
a!=b;
a=a.parent){var c=a.frameElement.getBoundingClientRect();
d.x+=c.left;
d.y+=c.top;
}return d;
},toTopCoord:function(a){var c=Jui.window.getTop();
for(var b=window;
b!=c;
b=b.parent){var d=b.frameElement.getBoundingClientRect();
a.x+=d.left;
a.y+=d.top;
}return a;
}};
Jui.upload={_mask:null,_input:null,selectFile:function(a,c){a=a||{};
if(Jui.upload._input!=null){Jui.dom.removeElement(Jui.upload._input);
}var b="<input type=file style='display:none'>";
Jui.upload._input=Jui.dom.insertHtml(document.body,"BeforeEnd",b);
Jui.upload._input.multiple=Jui.cast.toBool(a.multiple,false);
Jui.upload._input.accept=a.accept;
Jui.upload._input.value=null;
Jui.upload._input.onchange=function(){if(Jui.upload._checkFiles(this.files,a)){c(this.files,a);
}};
Jui.upload._input.click();
},setFileDropZone:function(b,a,d){a=a||{};
var c=Jui.dom.element(b);
c._fileUploadInfo={options:a,callback:d};
Jui.event.attach(c,"dragenter",Jui.upload._doFileDragEnter);
},_doFileDragEnter:function(){Jui.event.stop();
if(Jui.array.contains(event.dataTransfer.types,"Files")){if(Jui.upload._mask==null){var a="<div class=JuiFileDropZoneMask></div>";
Jui.upload._mask=Jui.dom.insertHtml(document.body,"BeforeEnd",a);
Jui.upload._mask.ondragleave=Jui.upload._doFileDragLeave;
Jui.upload._mask.ondragover=Jui.upload._doFileDragOver;
Jui.upload._mask.ondrop=Jui.upload._doFileDrop;
}Jui.upload._fileDropZone=this;
Jui.upload._fileUploadInfo=this._fileUploadInfo;
var b=this.getBoundingClientRect();
Jui.upload._mask.style.left=b.left+"px";
Jui.upload._mask.style.top=b.top+"px";
Jui.upload._mask.style.width=b.width+"px";
Jui.upload._mask.style.height=b.height+"px";
Jui.upload._mask.style.display="block";
}},_doFileDragLeave:function(a){Jui.event.stop();
this.style.display="none";
},_doFileDragOver:function(){Jui.event.stop();
event.dataTransfer.dropEffect="copy";
},_doFileDrop:function(b){Jui.event.stop();
this.style.display="none";
var c=Jui.upload._fileUploadInfo;
var a=b.dataTransfer.files;
if(Jui.upload._checkFiles(a,c.options)){c.callback.call(Jui.upload._fileDropZone,a,c.options);
}},_checkFiles:function(e,a){if(!a.multiple&&e.length!=1){Jui.message.alert(Jui.i18n.getText("Jui.Upload.FileCountInvalid"));
return false;
}var b=e[0];
var d=function(g,h){if(g!=null){if(typeof(g)=="string"){g=new RegExp(g);
return g.test(h);
}}return true;
};
if(!d(a.typePattern,b.type)||!d(a.namePattern,b.name)){var c=Jui.i18n.getText("Jui.Upload.FileTypeInvalid");
Jui.message.alert(c.replace("${0}",b.name));
return false;
}if(b.size>a.maxSize){var c=Jui.i18n.getText("Jui.Upload.FileSizeInvalid");
var f=Jui.cast.toFileSizeText(a.maxSize,true);
Jui.message.alert(c.replace("${0}",b.name).replace("${1}",f));
return false;
}return true;
}};
Jui.array={isEmpty:function(a){return a==null||a.length==0;
},isArray:function(a){try{return a!=null&&typeof(a)=="object"&&"splice" in a&&"unshift" in a;
}catch(b){return a!=null&&typeof(a.length)=="number";
}},insert:function(d,a,c){for(var b=d.length;
b>a;
--b){d[b]=d[b-1];
}d[a]=c;
},wrap:function(b){var c=[];
for(var a=0;
a<b.length;
++a){c.push(b[a]);
}return c;
},contains:function(c,b){for(var a=0;
a<c.length;
++a){if(c[a]==b){return true;
}}return false;
},remove:function(c,b){for(var a=c.length-1;
a>=0;
--a){if(c[a]==b){c.splice(a,1);
}}return c;
},repeat:function(c,b){var d=[];
for(var a=0;
a<b;
++a){d.push(c);
}return d;
},extractProperty:function(d,c){var a=[];
for(var b=0;
b<d.length;
++b){a.push(d[b][c]);
}return a;
},wrapAsProperty:function(e,d){var a=[];
for(var b=0;
b<e.length;
++b){var c={};
c[d]=e[b];
a.push(c);
}return a;
},transformProperty:function(g,a){var b=[];
for(var d=0;
d<g.length;
++d){var e=g[d];
var c={};
for(var f in a){c[a[f]]=e[f];
}b.push(c);
}return b;
},toSet:function(d,a){var c={};
for(var b=0;
b<d.length;
++b){c[a==null?d[b]:d[b][a]]=true;
}return c;
},toMap:function(d,a){var c={};
for(var b=0;
b<d.length;
++b){c[d[b][a]]=d[b];
}return c;
},make:function(a){return Jui.array.isArray(a)?a:[a];
},numericSort:function(a){return a.sort(function(d,c){return parseFloat(d)-parseFloat(c);
});
},stableSort:function(b,a){Jui.array._mergeSort(b,0,b.length,a,new Array(b.length));
return b;
},find:function(e,d){if(e!=null){outer:for(var b=0;
b<e.length;
++b){var c=e[b];
for(var a in d){if(c[a]!=d[a]){continue outer;
}}return c;
}}},_mergeSort:function(f,e,a,d,b){if(e<a-1){var c=(e+a)>>1;
Jui.array._mergeSort(f,e,c,d,b);
Jui.array._mergeSort(f,c,a,d,b);
Jui.array._merge(f,e,c,a,d,b);
}},_merge:function(n,c,r,f,l,q){var h=c;
var g=r;
var e=0;
while(h<r&&g<f){var p=n[h];
var o=n[g];
if((l==null&&p<=o)||(l!=null&&l(p,o)<=0)){q[e++]=n[h++];
}else{q[e++]=n[g++];
}}while(h<r){q[e++]=n[h++];
}while(g<f){q[e++]=n[g++];
}for(var d=0;
d<e;
++d){n[c+d]=q[d];
}}};
Jui.string={escapeHtml:Jui.$h,isEmpty:function(a){return a==null||/^\s*$/.test(a);
},trim:function(a){if(a==null){return null;
}else{if(typeof(a)=="string"){return a.replace(/^\s+|\s+$/g,"");
}else{return a+"";
}}},repeat:function(d,c){var a=[];
for(var b=0;
b<c;
++b){a.push(d);
}return a.join("");
},upperFirstLetter:function(a){if(Jui.string.isEmpty(a)){return a;
}return a.substring(0,1).toUpperCase()+a.substring(1);
},upper:function(a){return typeof(a)=="string"?a.toUpperCase():a;
},lower:function(a){return typeof(a)=="string"?a.toLowerCase():a;
},replaceForEval:function(a){return a.replace(/\\/g,"\\\\").replace(/\r|\n|\u2083/g," ").replace(/'/g,"\\'");
}};
Jui.math={pointInRange:function(a,b){return a.x>=b.left&&a.x<=b.right&&a.y>=b.top&&a.y<=b.bottom;
},pointsEqual:function(d,c){return d==c||(d!=null&&c!=null&&d.x==c.x&&d.y==c.y);
},getAngle:function(f,d,i){var g=Jui.math.getPointPointDistance(f,d);
var h=Jui.math.getPointPointDistance(d,i);
var e=Jui.math.getPointPointDistance(i,f);
return Math.acos((g*g+h*h-e*e)/(2*g*h));
},getPointPointSlope:function(d,c){if(d.x==c.x&&d.y==c.y){return 0;
}else{if(d.x==c.x){return c.y>d.y?Math.PI/2:-Math.PI/2;
}else{if(d.y==c.y){return c.x>d.x?0:Math.PI;
}else{return Math.atan((c.y-d.y)/(c.x-d.x))+(c.x>d.x?0:Math.PI);
}}}},getPointPointDistance:function(d,c){return Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2));
},getPointLineDistance:function(c,e,b){if(e.x==b.x&&e.y==b.y){return Jui.math.getPointPointDistance(c,e);
}var a=b.y-e.y;
var f=e.x-b.x;
var d=b.x*e.y-b.y*e.x;
return Math.abs(a*c.x+f*c.y+d)/Math.sqrt(a*a+f*f);
},getPointLineSegmentDistance:function(b,c,a){if(c.x==a.x&&c.y==a.y){return Jui.math.getPointPointDistance(b,c);
}else{if(Jui.math.getAngle(b,c,a)>Math.PI/2){return Jui.math.getPointPointDistance(b,c);
}else{if(Jui.math.getAngle(b,a,c)>Math.PI/2){return Jui.math.getPointPointDistance(b,a);
}else{return Jui.math.getPointLineDistance(b,c,a);
}}}}};
Jui.md5={_hex_digits:"0123456789abcdef".split(""),asString:function(c){var f=Jui.md5.asIntegers(c);
var e=[];
for(var b=0;
b<f.length;
b++){var d=f[b];
for(var a=0;
a<4;
a++){e.push(Jui.md5._hex_digits[(d>>(a*8+4))&15]);
e.push(Jui.md5._hex_digits[(d>>(a*8))&15]);
}}return e.join("");
},asUint8Array:function(d){var f=Jui.md5.asIntegers(d);
var a=new Uint8Array(16);
for(var c=0;
c<f.length;
++c){var e=f[c];
for(var b=0;
b<4;
++b){a[c*4+b]=(e>>(b*8))&255;
}}return a;
},asIntegers:function(b){var a;
if(typeof b==="string"){a=Jui.md5._toUtf8Bytes(b);
}else{if(Array.isArray(b)){a=b;
}else{throw new Error("Jui.md5 argument should be either string or byte array");
}}return Jui.md5._hash(a);
},_hash:function(a){var e=a.length;
var d=[1732584193,-271733879,-1732584194,271733878];
var c;
for(c=64;
c<=a.length;
c+=64){Jui.md5._hashCycle(d,Jui.md5._hashBlk(a.slice(c-64,c)));
}a=a.slice(c-64);
var b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
for(c=0;
c<a.length;
c++){b[c>>2]|=a[c]<<((c%4)<<3);
}b[c>>2]|=128<<((c%4)<<3);
if(c>55){Jui.md5._hashCycle(d,b);
for(c=0;
c<16;
c++){b[c]=0;
}}b[14]=e*8;
Jui.md5._hashCycle(d,b);
return d;
},_hashBlk:function(a){var c=[];
var b;
for(b=0;
b<64;
b+=4){c[b>>2]=a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24);
}return c;
},_hashCycle:function(f,h){var g=f[0];
var e=f[1];
var j=f[2];
var i=f[3];
g=Jui.md5._ff(g,e,j,i,h[0],7,-680876936);
i=Jui.md5._ff(i,g,e,j,h[1],12,-389564586);
j=Jui.md5._ff(j,i,g,e,h[2],17,606105819);
e=Jui.md5._ff(e,j,i,g,h[3],22,-1044525330);
g=Jui.md5._ff(g,e,j,i,h[4],7,-176418897);
i=Jui.md5._ff(i,g,e,j,h[5],12,1200080426);
j=Jui.md5._ff(j,i,g,e,h[6],17,-1473231341);
e=Jui.md5._ff(e,j,i,g,h[7],22,-45705983);
g=Jui.md5._ff(g,e,j,i,h[8],7,1770035416);
i=Jui.md5._ff(i,g,e,j,h[9],12,-1958414417);
j=Jui.md5._ff(j,i,g,e,h[10],17,-42063);
e=Jui.md5._ff(e,j,i,g,h[11],22,-1990404162);
g=Jui.md5._ff(g,e,j,i,h[12],7,1804603682);
i=Jui.md5._ff(i,g,e,j,h[13],12,-40341101);
j=Jui.md5._ff(j,i,g,e,h[14],17,-1502002290);
e=Jui.md5._ff(e,j,i,g,h[15],22,1236535329);
g=Jui.md5._gg(g,e,j,i,h[1],5,-165796510);
i=Jui.md5._gg(i,g,e,j,h[6],9,-1069501632);
j=Jui.md5._gg(j,i,g,e,h[11],14,643717713);
e=Jui.md5._gg(e,j,i,g,h[0],20,-373897302);
g=Jui.md5._gg(g,e,j,i,h[5],5,-701558691);
i=Jui.md5._gg(i,g,e,j,h[10],9,38016083);
j=Jui.md5._gg(j,i,g,e,h[15],14,-660478335);
e=Jui.md5._gg(e,j,i,g,h[4],20,-405537848);
g=Jui.md5._gg(g,e,j,i,h[9],5,568446438);
i=Jui.md5._gg(i,g,e,j,h[14],9,-1019803690);
j=Jui.md5._gg(j,i,g,e,h[3],14,-187363961);
e=Jui.md5._gg(e,j,i,g,h[8],20,1163531501);
g=Jui.md5._gg(g,e,j,i,h[13],5,-1444681467);
i=Jui.md5._gg(i,g,e,j,h[2],9,-51403784);
j=Jui.md5._gg(j,i,g,e,h[7],14,1735328473);
e=Jui.md5._gg(e,j,i,g,h[12],20,-1926607734);
g=Jui.md5._hh(g,e,j,i,h[5],4,-378558);
i=Jui.md5._hh(i,g,e,j,h[8],11,-2022574463);
j=Jui.md5._hh(j,i,g,e,h[11],16,1839030562);
e=Jui.md5._hh(e,j,i,g,h[14],23,-35309556);
g=Jui.md5._hh(g,e,j,i,h[1],4,-1530992060);
i=Jui.md5._hh(i,g,e,j,h[4],11,1272893353);
j=Jui.md5._hh(j,i,g,e,h[7],16,-155497632);
e=Jui.md5._hh(e,j,i,g,h[10],23,-1094730640);
g=Jui.md5._hh(g,e,j,i,h[13],4,681279174);
i=Jui.md5._hh(i,g,e,j,h[0],11,-358537222);
j=Jui.md5._hh(j,i,g,e,h[3],16,-722521979);
e=Jui.md5._hh(e,j,i,g,h[6],23,76029189);
g=Jui.md5._hh(g,e,j,i,h[9],4,-640364487);
i=Jui.md5._hh(i,g,e,j,h[12],11,-421815835);
j=Jui.md5._hh(j,i,g,e,h[15],16,530742520);
e=Jui.md5._hh(e,j,i,g,h[2],23,-995338651);
g=Jui.md5._ii(g,e,j,i,h[0],6,-198630844);
i=Jui.md5._ii(i,g,e,j,h[7],10,1126891415);
j=Jui.md5._ii(j,i,g,e,h[14],15,-1416354905);
e=Jui.md5._ii(e,j,i,g,h[5],21,-57434055);
g=Jui.md5._ii(g,e,j,i,h[12],6,1700485571);
i=Jui.md5._ii(i,g,e,j,h[3],10,-1894986606);
j=Jui.md5._ii(j,i,g,e,h[10],15,-1051523);
e=Jui.md5._ii(e,j,i,g,h[1],21,-2054922799);
g=Jui.md5._ii(g,e,j,i,h[8],6,1873313359);
i=Jui.md5._ii(i,g,e,j,h[15],10,-30611744);
j=Jui.md5._ii(j,i,g,e,h[6],15,-1560198380);
e=Jui.md5._ii(e,j,i,g,h[13],21,1309151649);
g=Jui.md5._ii(g,e,j,i,h[4],6,-145523070);
i=Jui.md5._ii(i,g,e,j,h[11],10,-1120210379);
j=Jui.md5._ii(j,i,g,e,h[2],15,718787259);
e=Jui.md5._ii(e,j,i,g,h[9],21,-343485551);
f[0]=Jui.md5._add32(g,f[0]);
f[1]=Jui.md5._add32(e,f[1]);
f[2]=Jui.md5._add32(j,f[2]);
f[3]=Jui.md5._add32(i,f[3]);
},_cmn:function(h,e,d,c,g,f){e=Jui.md5._add32(Jui.md5._add32(e,h),Jui.md5._add32(c,f));
return Jui.md5._add32((e<<g)|(e>>>(32-g)),d);
},_add32:function(d,c){return(d+c)&4294967295;
},_ff:function(g,f,k,j,e,i,h){return Jui.md5._cmn((f&k)|((~f)&j),g,f,e,i,h);
},_gg:function(g,f,k,j,e,i,h){return Jui.md5._cmn((f&j)|(k&(~j)),g,f,e,i,h);
},_hh:function(g,f,k,j,e,i,h){return Jui.md5._cmn(f^k^j,g,f,e,i,h);
},_ii:function(g,f,k,j,e,i,h){return Jui.md5._cmn(k^(f|(~j)),g,f,e,i,h);
},_toUtf8Bytes:function(d){var a=[];
for(var c=0;
c<d.length;
c++){var b=d.charCodeAt(c);
if(b<128){a.push(b);
}else{if(b<2048){a.push(192|(b>>6),128|(b&63));
}else{if(b<55296||b>=57344){a.push(224|(b>>12),128|((b>>6)&63),128|(b&63));
}else{c++;
b=65536+(((b&1023)<<10)|(d.charCodeAt(c)&1023));
a.push(240|(b>>18),128|((b>>12)&63),128|((b>>6)&63),128|(b&63));
}}}}return a;
}};
Jui.dom={element:function(a){if(typeof(a)=="object"&&a!=null){return a;
}else{if(typeof(a)=="string"){return document.getElementById(a);
}}},insertHtml:function(d,b,c){b=b==null?"beforeend":b.toLowerCase();
if(d.insertAdjacentHTML){switch(b){case"beforebegin":d.insertAdjacentHTML("BeforeBegin",c);
return d.previousSibling;
case"afterbegin":d.insertAdjacentHTML("AfterBegin",c);
return d.firstChild;
case"beforeend":d.insertAdjacentHTML("BeforeEnd",c);
return d.lastChild;
case"afterend":d.insertAdjacentHTML("AfterEnd",c);
return d.nextSibling;
}}else{var a=d.ownerDocument.createRange();
switch(b){case"beforebegin":a.setStartBefore(d);
d.parentNode.insertBefore(a.createContextualFragment(c),d);
return d.previousSibling;
case"afterbegin":if(d.firstChild){a.setStartBefore(d.firstChild);
d.insertBefore(a.createContextualFragment(c),d.firstChild);
}else{d.innerHTML=c;
}return d.firstChild;
case"beforeend":if(d.lastChild){a.setStartAfter(d.lastChild);
d.appendChild(a.createContextualFragment(c));
}else{d.innerHTML=c;
}return d.lastChild;
case"afterend":a.setStartAfter(d);
d.parentNode.insertBefore(a.createContextualFragment(c),d.nextSibling);
return d.nextSibling;
}}},insertElement:function(b,a,c){a=a.toLowerCase();
if(b.insertAdjacentElement){switch(a){case"beforebegin":b.insertAdjacentElement("BeforeBegin",c);
break;
case"afterbegin":b.insertAdjacentElement("AfterBegin",c);
break;
case"beforeend":b.insertAdjacentElement("BeforeEnd",c);
break;
case"afterend":b.insertAdjacentElement("AfterEnd",c);
break;
}}else{switch(a){case"beforebegin":b.parentNode.insertBefore(c,b);
break;
case"afterbegin":b.insertBefore(c,b.firstChild);
break;
case"beforeend":b.appendChild(c);
break;
case"afterend":b.parentNode.insertBefore(c,b.nextSibling);
break;
}}},removeElement:function(a){return a.parentNode.removeChild(a);
},getAncestor:function(c,a){var b=a||event.srcElement;
while(b!=null&&b.getAttribute("_mark")!=c){b=b.parentElement||b.parentNode;
}return b;
},getAncestorByTagName:function(b,a){var c=a||event.srcElement;
b=b.toUpperCase();
while(c!=null&&c.tagName!=b){c=c.parentElement||c.parentNode;
}return c;
},getAncestorByClassName:function(b,a){var d=a||event.srcElement;
var c=new RegExp("( |^)"+b+"( |$)");
while(d!=null&&!c.test(d.className)){d=d.parentElement||d.parentNode;
}return d;
},getElementsByClassName:function(e,d){if(e.getElementsByClassName){return e.getElementsByClassName(d);
}var f=[];
var c=new RegExp("(^|s)"+d.replace(/-/g,"-")+"(s|$)");
for(var b=0,a=e.all;
b<a.length;
++b){if(c.test(a[b].className)){f.push(a[b]);
}}return f;
},setAttribute:function(b,a,c){b.setAttribute(a,c);
if(Jui.browser.ie){b.className=b.className;
}},setAttributes:function(c,a){if(a!=null){for(var b in a){c.setAttribute(b,a[b]);
}if(Jui.browser.ie){c.className=c.className;
}}},tagAttribute:function(b,a,d,c){if(d){b.setAttribute(a,c==null?true:c);
}else{b.removeAttribute(a);
}if(Jui.browser.ie){b.className=b.className;
}},removeAttribute:function(b,a){b.removeAttribute(a);
if(Jui.browser.ie){b.className=b.className;
}},removeAttributes:function(c,a){for(var b=0;
b<a.length;
++b){c.removeAttribute(a[b]);
}if(Jui.browser.ie){c.className=c.className;
}},addClass:function(c,d){var a=c.className;
for(var b=0,f=Jui.array.make(d);
b<f.length;
++b){var e=f[b];
if(!new RegExp("\\b"+e+"\\b").test(a)){a=Jui.string.trim(a+" "+e);
}}if(a!=c.className){c.className=a;
}},removeClass:function(c,e){var a=c.className;
for(var b=0,g=Jui.array.make(e);
b<g.length;
++b){var f=g[b];
var d=new RegExp("\\b"+f+"\\b","g");
if(d.test(a)){a=Jui.string.trim(a.replace(d," "));
}}if(a!=c.className){c.className=a;
}},tagClass:function(b,c,a){if(a){Jui.dom.addClass(b,c);
}else{Jui.dom.removeClass(b,c);
}},setStyle:function(b,c){for(var a=0,d=c.split(";");
a<d.length;
++a){var e=d[a].split(":");
if(e.length==2){b.style[Jui.string.trim(e[0])]=Jui.string.trim(e[1]);
}}},getComputedStyle:function(a){return window.getComputedStyle==null?a.currentStyle:window.getComputedStyle(a);
},getRelativePoint:function(b,a,d){var c=b.getBoundingClientRect();
return{x:a-c.left,y:d-c.top};
},setInnerText:function(a,b){if(Jui.browser.mozilla){while(a.firstChild!=null){a.removeChild(a.firstChild);
}a.appendChild(document.createTextNode(b));
}else{a.innerText=b;
}},getFrameWindow:function(a){return a.contentWindow||a.window;
},scrollToVisible:function(b){var d=b.getBoundingClientRect();
while(b.parentElement!=null){var c=b.parentElement;
var a=c.getBoundingClientRect();
if(c.clientWidth<c.scrollWidth||c.clientHeight<c.scrollHeight){if(d.bottom>a.bottom){c.scrollTop+=d.bottom-a.bottom;
}if(d.top<a.top){c.scrollTop-=a.top-d.top;
}if(d.right>a.right){c.scrollLeft+=d.right-a.right;
}if(d.left<a.left){c.scrollLeft-=a.left-d.left;
}break;
}b=c;
}},$isMouseOverText:function(h,a){if(h.value.length==0){return false;
}if(Jui.dom._textSizeHelper==null){var e="<div style='position:absolute;top:-100px;display:inline;white-space:nowrap'></div>";
Jui.dom._textSizeHelper=Jui.dom.insertHtml(document.body,"BeforeEnd",e);
}Jui.dom._textSizeHelper.innerHTML=Jui.$h(h.value,true);
var b=Jui.dom.getComputedStyle(h);
var i=Jui.browser.ie?a.offsetX:a.offsetX-parseInt(b.borderLeftWidth);
var g=Jui.browser.ie?a.offsetY:a.offsetY-parseInt(b.borderTopWidth);
var c=Jui.dom._textSizeHelper.offsetWidth;
var j=parseInt(b.fontSize);
var d=parseInt(b.paddingLeft);
var f=parseInt(b.paddingTop)+(parseInt(b.lineHeight)-j)/2;
return i>=d&&i<d+c&&g>=f&&g<f+j;
}};
Jui.browser={parseUserAgent:function(g){var d=/(webkit)[ \/]([\w.]+)/;
var c=/(trident)\/([\w.]+)/;
var f=/(mozilla)(?:.*? rv:([\w.]+))?/;
var e=g.toLowerCase();
var b=d.exec(e)||c.exec(e)||e.indexOf("compatible")<0&&f.exec(e)||[];
var a={};
a.type=b[1]||"";
a.version=b[2]||"0";
a.majorVersion=parseInt(b[2])||0;
a.supportCanvas=a.type!="trident"||a.majorVersion>4;
a[a.type]=true;
if(a.type=="trident"){a.ie=true;
}return a;
},getCookie:function(a){var c=document.cookie.split("; ");
for(var b=0;
b<c.length;
++b){var d=c[b].split("=");
if(d[0]==a){return unescape(d[1]);
}}},setCookie:function(b,c){var a=new Date();
a.setFullYear(a.getFullYear()+1);
document.cookie=b+"="+escape(c)+"; expires="+a.toGMTString();
},deleteCookie:function(b){var a=new Date(0);
document.cookie=b+"=; expires="+a.toGMTString();
},getScrollBarWidth:function(){if(Jui.browser._scrollBarWidth==null){var a="<div style='position:fixed;top:0px;left:0px;width:80px;height:80px;overflow:scroll'></div>";
var c=Jui.dom.insertHtml(document.body,"BeforeEnd",a);
var b=c.offsetWidth-c.clientWidth;
if(b>0){Jui.browser._scrollBarWidth=b;
}document.body.removeChild(c);
}return Jui.browser._scrollBarWidth==null?16:Jui.browser._scrollBarWidth;
}};
Jui.i18n={_locale:null,_textGetter:null,getText:function(a){var b=Jui.i18n._textGetter;
return(b==null?Jui.i18n.map[a]:b(a))||a;
},getLocale:function(){if(Jui.i18n._locale==null){var a=Jui.browser.getCookie("Language");
if(Jui.string.isEmpty(a)){a=(navigator.language||navigator.browserLanguage||"en-us").toLowerCase();
}Jui.i18n._locale=a.replace(/[^\w-].*/g,"");
}return Jui.i18n._locale;
},setTextGetter:function(a){Jui.i18n._textGetter=a;
},$getFileName:function(){var a=Jui.i18n.getLocale();
if(a!="zh-cn"&&a!="zh-tw"&&a!="en-us"){a="en-us";
}return a+".js";
}};
Jui.$define("Jui.basic.ElementDraggable");
Jui.basic.ElementDraggable.prototype.$recordElementDragPosition=function(){var a=this;
a._eventPoint={x:event.clientX,y:event.clientY};
a._position={x:a.element.offsetLeft,y:a.element.offsetTop};
};
Jui.basic.ElementDraggable.prototype.$startElementDrag=function(){var a=this;
a._dragTo=null;
a._isDragging=true;
a._savedDragOver=document.body.ondragover;
a._savedDrop=document.body.ondrop;
document.body.ondragover=a.$class.doElementDragOver;
document.body.ondrop=a.$class.doDrop;
event.dataTransfer.effectAllowed="move";
if(event.dataTransfer.setDragImage){event.dataTransfer.setData("custom","jui-element-drag");
}};
Jui.basic.ElementDraggable.prototype.$endElementDrag=function(){var a=this;
if(a._isDragging){a._isDragging=false;
document.body.ondragover=a._savedDragOver;
document.body.ondrop=a._savedDrop;
a._savedDragOver=null;
a._savedDrop=null;
}};
Jui.basic.ElementDraggable.doElementDragOver=function(){var a=Jui.$owner();
if(a!=null&&a._isDragging){Jui.event.preventDefault();
a._moveElementOnDrag();
}};
Jui.basic.ElementDraggable.doElementDrop=function(){var a=Jui.$owner();
if(a!=null&&a._isDragging){a._moveElementOnDrag();
}};
Jui.basic.ElementDraggable.prototype._moveElementOnDrag=function(){var c=this;
var e=c._position.x+event.clientX-c._eventPoint.x;
var d=c._position.y+event.clientY-c._eventPoint.y;
var a=document.body.offsetWidth-c.element.offsetWidth;
var f=document.body.offsetHeight-c.element.offsetHeight;
var b={x:Math.max(0,Math.min(e,a)),y:Math.max(0,Math.min(d,f))};
if(c._dragTo==null||c._dragTo.x!=b.x||c._dragTo.y!=b.y){c._dragTo=b;
if(c._timer!=null){clearTimeout(c._timer);
}c._timer=setTimeout(function(){c._timer=null;
c.element.style.left=b.x+"px";
c.element.style.top=b.y+"px";
});
}};
Jui.$define("Jui.basic.Control");
Jui.basic.Control.create=function(b){b=b||{};
if(b.target==null){Jui.basic.Control._sn=(Jui.basic.Control._sn||0)+1;
var e="_JUI_"+Jui.basic.Control._sn+"_";
document.writeln(this.getHtml(b,e));
var c=this.initialize(document.getElementById(e),b,this);
return c;
}else{if(b.target=="none"){var a=document.createElement("div");
a.innerHTML=this.getHtml(b);
var c=this.initialize(a.firstChild,b,this);
return c;
}else{var d=Jui.dom.element(b.target);
Jui.dom.insertHtml(d,"BeforeEnd",this.getHtml(b));
var c=this.initialize(d.lastChild,b,this);
return c;
}}};
Jui.basic.Control.initialize=function(c,b,a){b=b||{};
var d=new a();
d.$class=a;
d.$superClass=a.superClass;
d._args=b;
d._owner=b.owner;
d._id=b.id;
d._name=b.name;
d._attributes={};
Jui.$bind(d,c);
d.setHint(b.hint);
return d;
};
Jui.basic.Control.prototype.getId=function(){return this._id;
};
Jui.basic.Control.prototype.getName=function(){return this._name;
};
Jui.basic.Control.prototype.getArgs=function(){return this._args;
};
Jui.basic.Control.prototype.getArgValue=function(a){return this._args[a];
};
Jui.basic.Control.prototype.getOwner=function(){return this._owner;
};
Jui.basic.Control.prototype.isDisabled=function(){return/Disabled/.test(this.element.className);
};
Jui.basic.Control.prototype.setDisabled=function(b){var a=this._cssClass||this.element.className.replace(/ .*/,"");
var b=Jui.cast.toBool(b,true);
Jui.dom.tagClass(this.element,a+"Disabled",b);
Jui.dom.tagAttribute(this.element,"disabled",b);
};
Jui.basic.Control.prototype.isVisible=function(){return this.element.style.display!="none";
};
Jui.basic.Control.prototype.setVisible=function(a){this.element.style.display=Jui.cast.toBool(a,true)?"":"none";
};
Jui.basic.Control.prototype.setHint=function(a){this.element.title=a||"";
};
Jui.basic.Control.prototype.getAttribute=function(a){return this._attributes[a];
};
Jui.basic.Control.prototype.setAttribute=function(a,b){this._attributes[a]=b;
};
Jui.basic.Control.prototype.setAttributes=function(a){Jui.object.merge(this._attributes,a,true);
};
Jui.basic.Control.prototype.setElementStyle=function(a){Jui.dom.setStyle(this.element,a);
};
Jui.basic.Control.prototype.addEventListener=function(a,c){var b=this;
if(!/^on/.test(a)){a="on"+a;
}b._eventListeners=b._eventListeners||{};
b._eventListeners[a]=b._eventListeners[a]||[];
b._eventListeners[a].push(c);
};
Jui.basic.Control.prototype.removeEventListener=function(a,d){var c=(this._eventListeners&&this._eventListeners[a])||[];
for(var b=c.length-1;
b>=0;
--b){if(c[b]==d){c.splice(b,1);
}}};
Jui.basic.Control.prototype.fireEvent=function(b,d){if(!/^on/.test(b)){b="on"+b;
}var j=undefined;
var g=[].concat(this[b],this._eventListeners&&this._eventListeners[b]);
for(var e=0;
e<g.length;
++e){var c=g[e];
if(typeof(c)=="function"||typeof(c)=="string"&&!Jui.string.isEmpty(c)){var a=d||{};
var f=[c,this,a].concat(Jui.array.wrap(arguments).slice(2));
var h=Jui.util.execute.apply(Jui.util,f);
if(e==0&&this[b]!=null){j=h;
}if(h==false){break;
}}}return j;
};
Jui.basic.Control.prototype.$addElementClass=function(d){var b=this._cssClass||this.element.className.replace(/ .*/,"");
var c=Jui.array.make(d);
for(var a=0;
a<c.length;
++a){c[a]=b+c[a];
}Jui.dom.addClass(this.element,c);
};
Jui.basic.Control.prototype.$removeElementClass=function(d){var b=this._cssClass||this.element.className.replace(/ .*/,"");
var c=Jui.array.make(d);
for(var a=0;
a<c.length;
++a){c[a]=b+c[a];
}Jui.dom.removeClass(this.element,c);
};
Jui.basic.Control.prototype.$tagElementClass=function(c,a){var b=this._cssClass||this.element.className.replace(/ .*/,"");
Jui.dom.tagClass(this.element,b+c,a);
};
Jui.$define("Jui.basic.Box",Jui.basic.Control);
Jui.basic.Box.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d.setClearOnDisable(Jui.cast.toBool(b.clearOnDisable,false));
d.setRestoreOnEnable(Jui.cast.toBool(b.restoreOnEnable,false));
return d;
};
Jui.basic.Box.prototype.setAutoCompleteItems=function(c,a){var b=this;
if(c!=b._autoCompleteSequence||new Date().getTime()>b._autoCompleteDeadline){return;
}else{if(a.length==0){b.$hideAutoCompletePopupList();
}else{b.$showAutoCompletePopupList(a);
}}};
Jui.basic.Box.prototype.setAutoComplete=function(b){var a=this;
a._autoComplete=Jui.cast.toBool(b,false);
if(b){Jui.event.attach(a._input,"keyup",Jui.basic.Box.doAutoCompletableEvent);
Jui.event.attach(a._input,"paste",Jui.basic.Box.doAutoCompletableEvent);
Jui.event.attach(a._input,"cut",Jui.basic.Box.doAutoCompletableEvent);
Jui.event.attach(a._input,"blur",Jui.basic.Box.doAutoCompleteCancel);
}else{Jui.event.detach(a._input,"keyup",Jui.basic.Box.doAutoCompletableEvent);
Jui.event.detach(a._input,"paste",Jui.basic.Box.doAutoCompletableEvent);
Jui.event.detach(a._input,"cut",Jui.basic.Box.doAutoCompletableEvent);
Jui.event.detach(a._input,"blur",Jui.basic.Box.doAutoCompleteCancel);
}};
Jui.basic.Box.prototype.isAutoComplete=function(){return this._autoComplete;
};
Jui.basic.Box.prototype.setAutoCompleteDelay=function(a){var b=this;
b._autoCompleteDelay=a||200;
};
Jui.basic.Box.prototype.getAutoCompleteDelay=function(){return this._autoCompleteDelay;
};
Jui.basic.Box.prototype.setAutoCompleteMaxWait=function(a){var b=this;
b._autoCompleteMaxWait=a||3000;
};
Jui.basic.Box.prototype.getAutoCompleteMaxWait=function(){return this._autoCompleteMaxWait;
};
Jui.basic.Box.prototype.setDisabled=function(a){var b=this;
var d=b.isDisabled();
Jui.basic.Control.prototype.setDisabled.call(b,a);
var c=b.isDisabled();
if(c!=d){if(c&&b._restoreOnEnable){b._savedValue=b.getValue();
b._savedText=b.getText==null?null:b.getText();
}if(c&&b._clearOnDisable){b.setValue();
}if(!c&&b._restoreOnEnable&&"_savedValue" in b){b.setValue(b._savedValue,b._savedText);
}}};
Jui.basic.Box.prototype.isClearOnDisable=function(){return this._clearOnDisable;
};
Jui.basic.Box.prototype.setClearOnDisable=function(b){var a=this;
a._clearOnDisable=Jui.cast.toBool(b,true);
};
Jui.basic.Box.prototype.isRestoreOnEnable=function(){return this._restoreOnEnable;
};
Jui.basic.Box.prototype.setRestoreOnEnable=function(b){var a=this;
a._restoreOnEnable=Jui.cast.toBool(b,true);
};
Jui.basic.Box.prototype.getForm=function(){return this._form;
};
Jui.basic.Box.prototype.setForm=function(b){var a=this;
a._form=b;
};
Jui.basic.Box.doAutoCompletableEvent=function(){var a=Jui.$owner();
if(a._autoComplete&&(event.keyCode==40||a._input.value!=a._lastAutoCompleteValue)){var c=a.$incrementAutoCompleteSequence();
var b=a._input.value;
a._autoCompleteDeadline=new Date().getTime()+a._autoCompleteMaxWait;
a._lastAutoCompleteValue=b;
if(a._autoCompleteTimer!=null){clearTimeout(a._autoCompleteTimer);
a._autoCompleteTimer=null;
}if(Jui.string.isEmpty(a._input.value)){a.$hideAutoCompletePopupList();
}else{a._autoCompleteTimer=setTimeout(function(){a._autoCompelteTimer=null;
a.fireEvent("onautocomplete",{sequence:c,text:b});
},a._autoCompleteDelay);
}}};
Jui.basic.Box.doAutoCompleteCancel=function(){Jui.$owner().$incrementAutoCompleteSequence();
};
Jui.basic.Box.prototype.$initializeAutoComplete=function(a){var b=this;
b.onautocomplete=a.onautocomplete;
b._autoCompleteDelay=a.autoCompleteDelay==null?200:parseInt(a.autoCompleteDelay);
b._autoCompleteMaxWait=a.autoCompleteMaxWait==null?3000:parseInt(a.autoCompleteMaxWait);
b.setAutoComplete(Jui.cast.toBool(a.autoComplete,true));
};
Jui.basic.Box.prototype.$incrementAutoCompleteSequence=function(){var a=this;
a._autoCompleteSequence=(a._autoCompleteSequence||0)+1;
return a._autoCompleteSequence;
};
Jui.$define("Jui.basic.EntityBox",Jui.basic.Box);
Jui.basic.EntityBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"EntityBox");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+" oncontextmenu=Jui.event.stop()><input class='JuiInput JuiEntityBoxText'><div class=JuiEntityBoxMagnifier unselectable=on onselectstart='return false'></div><div class=JuiEntityBoxArrow unselectable=on onselectstart='return false'></div></div>";
};
Jui.basic.EntityBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"EntityBox";
d._input=c.children[0];
d._magnifier=c.children[1];
d._arrow=c.children[2];
d._items=null;
d._popupList=null;
d._itemsLoaded=false;
d._textModifiedByHand=false;
d._timestamp=-1;
d.onbeforedrop=b.onbeforedrop;
d.onbeforeselect=b.onbeforeselect;
d.onchange=b.onchange;
d.onkeydown=b.onkeydown;
d.onpopupclick=b.onpopupclick;
d.onselect=b.onselect;
d.onsetfocus=b.onsetfocus;
d.onview=b.onview;
d._input.onmousemove=d.$class.doInputMouseMove;
d._input.onclick=d.$class.doInputClick;
d._input.onchange=d.$class.doInputChange;
d.$initializeAutoComplete(b);
d.setBackgroundColor(b.backgroundColor);
d.setMagnifier(Jui.cast.toBool(b.hasMagnifier,true));
d.setDropdown(Jui.cast.toBool(b.hasDropdown,true));
d.setLink(Jui.cast.toBool(b.hasLink,true));
d.setEnterSelect(Jui.cast.toBool(b.enterSelect,true));
d.setEntityType(b.entityType);
d.setTextField(b.textField);
d.setAcceptPureText(b.acceptPureText);
d.setKeepValueOnTextChange(b.keepValueOnTextChange);
d.setEmptyText(b.emptyText);
d.setSelectOnly(Jui.cast.toBool(b.selectOnly,false));
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.loadItems(b.items);
d.setValue(b.value,b.text);
return d;
};
Jui.basic.EntityBox.prototype.setBackgroundColor=function(a){if(!Jui.string.isEmpty(a)){this.element.style.backgroundColor=a;
}};
Jui.basic.EntityBox.prototype.hasMagnifier=function(){return this._magnifier.style.display!="none";
};
Jui.basic.EntityBox.prototype.setMagnifier=function(a){this._magnifier.style.display=Jui.cast.toBool(a,true)?"":"none";
this._refreshIconCountClass();
};
Jui.basic.EntityBox.prototype.hasDropdown=function(){return this._arrow.style.display!="none";
};
Jui.basic.EntityBox.prototype.setDropdown=function(a){this._arrow.style.display=Jui.cast.toBool(a,true)?"":"none";
this._refreshIconCountClass();
};
Jui.basic.EntityBox.prototype.hasLink=function(){return this._hasLink;
};
Jui.basic.EntityBox.prototype.setLink=function(a){var b=this;
b._hasLink=Jui.cast.toBool(a,true);
Jui.dom.tagAttribute(b._input,"NoLink",!b._hasLink||b._value==null);
};
Jui.basic.EntityBox.prototype.isEnterSelect=function(){return this._enterSelect;
};
Jui.basic.EntityBox.prototype.setEnterSelect=function(a){var b=this;
b._enterSelect=Jui.cast.toBool(a,true);
};
Jui.basic.EntityBox.prototype.getEntityType=function(){return this._entityType;
};
Jui.basic.EntityBox.prototype.setEntityType=function(b){var a=this;
a._entityType=b;
};
Jui.basic.EntityBox.prototype.getTextField=function(){return this._textField;
};
Jui.basic.EntityBox.prototype.setTextField=function(a){var b=this;
b._textField=a;
};
Jui.basic.EntityBox.prototype.isAcceptPureText=function(){return this._acceptPureText;
};
Jui.basic.EntityBox.prototype.setAcceptPureText=function(a){var b=this;
b._acceptPureText=a;
};
Jui.basic.EntityBox.prototype.isKeepValueOnTextChange=function(){return this._keepValueOnTextChange;
};
Jui.basic.EntityBox.prototype.setKeepValueOnTextChange=function(b){var a=this;
a._keepValueOnTextChange=b;
};
Jui.basic.EntityBox.prototype.focus=function(){this.fireEvent("onsetfocus");
this._input.focus();
};
Jui.basic.EntityBox.prototype.setDisabled=function(a){Jui.basic.Box.prototype.setDisabled.call(this,a);
var b=this;
a=b.isDisabled();
b.element.onclick=a?null:b.$class.doClick;
b._input.readOnly=a||b.isSelectOnly();
b._input.tabIndex=a?-1:0;
b._input.onfocus=a?null:b.$class.doInputFocus;
b._input.onblur=a?null:b.$class.doInputBlur;
b._input.onkeydown=a?null:b.$class.doInputKeyDown;
b._magnifier.onclick=a?null:b.$class.doMagnifierClick;
b._arrow.onmousedown=a?null:b.$class.doArrowMouseDown;
};
Jui.basic.EntityBox.prototype.isSelectOnly=function(){return this._selectOnly;
};
Jui.basic.EntityBox.prototype.setSelectOnly=function(a){var b=this;
b._selectOnly=Jui.cast.toBool(a,true);
b._input.readOnly=b._selectOnly||b.isDisabled();
};
Jui.basic.EntityBox.prototype.setEmptyText=function(a){this._input.placeholder=a||"";
};
Jui.basic.EntityBox.prototype.getValue=function(){return this._value;
};
Jui.basic.EntityBox.prototype.setValue=function(b,c){if(b!=null&&typeof(b)=="object"){c=b.text;
b=b.value;
}var a=this;
a._value=b||null;
a._input.value=c||"";
a._textModifiedByHand=false;
Jui.dom.tagAttribute(a._input,"NoLink",!a._hasLink||a._value==null);
};
Jui.basic.EntityBox.prototype.getText=function(){return this._input.value;
};
Jui.basic.EntityBox.prototype.toText=function(a,b){return Jui.string.trim(b||"");
};
Jui.basic.EntityBox.prototype.loadItems=function(a,c){var b=this;
if(c==null||c>b._timestamp){b._items=a||[];
b._itemsLoaded=false;
b._timestamp=c||-1;
}};
Jui.basic.EntityBox.doClick=function(){Jui.$owner()._input.focus();
};
Jui.basic.EntityBox.doInputFocus=function(){Jui.$owner(this).$addElementClass("Focused");
};
Jui.basic.EntityBox.doInputBlur=function(){Jui.$owner(this).$removeElementClass("Focused");
};
Jui.basic.EntityBox.doInputMouseMove=function(){var a=this;
var b=Jui.$owner(a);
a.style.cursor=b.hasLink()&&Jui.dom.$isMouseOverText(a,event)?"pointer":"";
};
Jui.basic.EntityBox.doInputClick=function(){var a=Jui.$owner();
if(!Jui.string.isEmpty(a._input.value)&&a._input.style.cursor=="pointer"){a.fireEvent("onview");
}};
Jui.basic.EntityBox.doInputChange=function(){var a=Jui.$owner(this);
a._textModifiedByHand=true;
if(a._value!=null&&(!a._keepValueOnTextChange||Jui.string.isEmpty(a._input.value))){a._value=null;
a._input.setAttribute("NoLink",true);
a.fireEvent("onchange");
}};
Jui.basic.EntityBox.doInputKeyDown=function(){var a=Jui.$owner();
if(event.keyCode==13&&a._enterSelect){if(a.fireEvent("onbeforeselect")!=false){a.fireEvent("onselect",{type:"key"});
}}if(event.keyCode==27){if(Jui.browser.mozilla){a._input.blur();
}a.setValue(null,"");
if(Jui.browser.mozilla){a._input.focus();
}a.fireEvent("onchange");
}if(!a._selectOnly){a.fireEvent("onkeydown",{keyCode:event.keyCode});
}};
Jui.basic.EntityBox.doMagnifierClick=function(){var a=Jui.$owner();
if(a.fireEvent("onbeforeselect")!=false){a.fireEvent("onselect",{type:"mouse"});
}};
Jui.basic.EntityBox.doArrowMouseDown=function(){var a=Jui.$owner();
if(event.srcElement==a._input&&!a.isSelectOnly()){return;
}if(/ArrowDown/.test(a.element.className)){a.$removeElementClass(["ArrowDown","DropUp","DropDown"]);
return;
}Jui.event.stopPropagation();
if(a.fireEvent("onbeforedrop")!=false){a._showPopupList(a._items,true);
}};
Jui.basic.EntityBox.doPopupItemClick=function(b){var a=this.getOwner();
a.setValue(b.value,b.text);
a.fireEvent("onpopupclick",{value:b.value,text:b.text});
a.fireEvent("onchange");
};
Jui.basic.EntityBox.doPopupHide=function(){var a=this;
var b=a.getOwner();
b.$removeElementClass(["ArrowDown","DropUp","DropDown"]);
};
Jui.basic.EntityBox.prototype.$showAutoCompletePopupList=function(a){this._showPopupList(a,false);
};
Jui.basic.EntityBox.prototype.$hideAutoCompletePopupList=function(){if(this._popupList!=null){this._popupList.hide();
}};
Jui.basic.EntityBox.prototype._refreshIconCountClass=function(){var a=this;
var b=(a._magnifier.style.display=="none"?0:1)+(a._arrow.style.display=="none"?0:1);
a.$removeElementClass(["0Icon","1Icon"]);
if(b<2){a.$addElementClass(b+"Icon");
}};
Jui.basic.EntityBox.prototype._showPopupList=function(d,b){var f=this;
if(f._popupList==null){f._popupList=Jui.basic.PopupList.create({owner:f});
f._popupList.onclick=Jui.basic.EntityBox.doPopupItemClick;
f._popupList.onhide=Jui.basic.EntityBox.doPopupHide;
}if(!b||!f._itemsLoaded){var a=d||[];
if(a.length>0&&a[0].items==null){a=[{items:a}];
}f._popupList.setItems(a);
}if(b){f._itemsLoaded=true;
}var e=Jui.theme[f._face+".PopupOffsetH"]||0;
var c=Jui.theme[f._face+".PopupOffsetV"]||1;
var g=f._popupList.showTo(f.element,e,c);
f.$removeElementClass(["ArrowDown","DropUp","DropDown"]);
f.$addElementClass(g.isTop?"DropUp":"DropDown",true);
f.$tagElementClass("ArrowDown",b);
};
Jui.$define("Jui.basic.DateBox",Jui.basic.Box);
Jui.basic.DateBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"DateBox");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+" oncontextmenu=Jui.event.stop()><input class='JuiInput JuiDateBoxText'><div class=JuiDateBoxIcon unselectable=on onselectstart='return false'></div></div>";
};
Jui.basic.DateBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"DateBox";
d._inputElem=c.firstChild;
d._iconElem=c.lastChild;
d._fireEventOnBlur=true;
d._popup=null;
d.onchange=b.onchange;
d.onkeydown=b.onkeydown;
d.onsetfocus=b.onsetfocus;
d.setBackgroundColor(b.backgroundColor);
d.setEmptyText(b.emptyText);
d.setFormat(b.format);
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.setValue(b.value);
return d;
};
Jui.basic.DateBox.prototype.focus=function(){this.fireEvent("onsetfocus");
this._inputElem.focus();
};
Jui.basic.DateBox.prototype.setBackgroundColor=function(a){if(!Jui.string.isEmpty(a)){this.element.style.backgroundColor=a;
}};
Jui.basic.DateBox.prototype.setEmptyText=function(a){this._inputElem.placeholder=a||"";
};
Jui.basic.DateBox.prototype.getFormat=function(){return this._format;
};
Jui.basic.DateBox.prototype.setFormat=function(c){var a=this;
var b=a._format;
a._format=c||"yyyy-MM-dd HH:mm";
a._hasTime=/H/.test(a._format);
a._inputElem.maxLength=a._format.length;
if(a._format!=b&&!Jui.string.isEmpty(a._inputElem.value)){a._setValue(a._inputElem.value);
}};
Jui.basic.DateBox.prototype.setDisabled=function(a){Jui.basic.Box.prototype.setDisabled.call(this,a);
var b=this;
a=b.isDisabled();
b.element.onclick=a?null:b.$class.doClick;
b._inputElem.readOnly=a;
b._inputElem.tabIndex=a?-1:0;
b._inputElem.onfocus=a?null:b.$class.doInputFocus;
b._inputElem.onblur=a?null:b.$class.doInputBlur;
b._inputElem.onkeydown=a?null:b.$class.doInputKeyDown;
b._iconElem.onmousedown=a?null:b.$class.doIconMouseDown;
};
Jui.basic.DateBox.prototype.getJsDate=function(){return Jui.cast.toDate(this.getValue());
};
Jui.basic.DateBox.prototype.getValue=function(){return Jui.cast.toString(this._value,this._format);
};
Jui.basic.DateBox.prototype.setValue=function(a){if(typeof(a)=="number"){a=new Date(a);
}this._setValue(a);
};
Jui.basic.DateBox.prototype.toText=function(a){if(typeof(a)=="number"){a=new Date(a);
}return Jui.cast.toString(Jui.cast.toDate(a),this._format)||"";
};
Jui.basic.DateBox.doClick=function(){Jui.$owner()._inputElem.focus();
};
Jui.basic.DateBox.doInputFocus=function(){Jui.$owner().$addElementClass("Focused");
};
Jui.basic.DateBox.doInputBlur=function(){var a=Jui.$owner();
a.$removeElementClass("Focused");
a._setValue(a._inputElem.value,a._fireEventOnBlur);
};
Jui.basic.DateBox.doInputKeyDown=function(){var a=Jui.$owner();
if(event.keyCode==27){if(Jui.browser.mozilla){a._fireEventOnBlur=false;
a._inputElem.blur();
}a._setValue(null,true);
if(Jui.browser.mozilla){a._inputElem.focus();
a._fireEventOnBlur=true;
}}a.fireEvent("onkeydown",{keyCode:event.keyCode});
};
Jui.basic.DateBox.doIconMouseDown=function(){var g=Jui.$owner();
if(/Drop/.test(g.element.className)){g.$removeElementClass(["DropUp","DropDown"]);
return;
}Jui.event.stopPropagation();
var e=g._value||new Date();
g._setPopupMonth(e.getFullYear(),e.getMonth()+1,g._value);
g._popup._timeRow.style.display=g._hasTime?"":"none";
g._popup._okCell.style.display=g._hasTime?"":"none";
if(g._hasTime){g._setPopupTime(e.getHours(),e.getMinutes());
}var h=g.element.getBoundingClientRect();
var d=Jui.theme[g._face+".PopupOffsetH"]||0;
var f=Jui.theme[g._face+".PopupOffsetV"]||1;
var a=Jui.theme["DateBox.PopupMinWidth"];
var c=Math.max(Math.round(h.right)-Math.round(h.left)+2*d,a);
var b={left:h.left-d,right:h.right-1+d,top:h.bottom-1+f,bottom:h.top-f};
var j=g._hasTime?g._popupHeight:g._popupHeight-g._timeRowHeight;
var i=Jui.popup.$show(g._popup,b,c,j);
Jui.dom.tagAttribute(g._popup,"Up",i.isTop);
g.$addElementClass(i.isTop?"DropUp":"DropDown",true);
};
Jui.basic.DateBox.doPopupHide=function(){var a=this;
var b=a.getOwner();
b.$removeElementClass(["DropUp","DropDown"]);
};
Jui.basic.DateBox.doPopupMouseDown=function(){Jui.event.stopPropagation();
};
Jui.basic.DateBox.doPopupTodayButtonClick=function(){var b=Jui.$owner();
if(b._hasTime){var a=new Date();
b._setPopupMonth(a.getFullYear(),a.getMonth()+1,a);
}else{b.$hidePopup();
b._setValue(new Date(),true);
}};
Jui.basic.DateBox.doPopupClearButtonClick=function(){var a=Jui.$owner();
a.$hidePopup();
a._setValue(null,true);
};
Jui.basic.DateBox.doPopupOkButtonClick=function(){var b=Jui.$owner();
var a=b._popupDate||new Date();
var c=b._getPopupTime();
a.setHours(c.hour,c.minute,0,0);
b.$hidePopup();
b._setValue(a,true);
};
Jui.basic.DateBox.doPopupPreviousYearClick=function(){var a=Jui.$owner();
a._setPopupMonth(a._year-1,a._month);
};
Jui.basic.DateBox.doPopupPreviousMonthClick=function(){var b=Jui.$owner();
var a=b._month==1?b._year-1:b._year;
var c=b._month==1?12:b._month-1;
b._setPopupMonth(a,c);
};
Jui.basic.DateBox.doPopupNextMonthClick=function(){var b=Jui.$owner();
var a=b._month==12?b._year+1:b._year;
var c=(b._month%12)+1;
b._setPopupMonth(a,c);
};
Jui.basic.DateBox.doPopupNextYearClick=function(){var a=Jui.$owner();
a._setPopupMonth(a._year+1,a._month);
};
Jui.basic.DateBox.doPopupTimeInputChange=function(){Jui.basic.DateBox._addPopupTimeItemValue(0);
};
Jui.basic.DateBox.doPopupTimeUpButtonClick=function(){Jui.basic.DateBox._addPopupTimeItemValue(1);
};
Jui.basic.DateBox.doPopupTimeDownButtonClick=function(){Jui.basic.DateBox._addPopupTimeItemValue(-1);
};
Jui.basic.DateBox.doPopupDateClick=function(){var a=event.srcElement;
var d=Jui.$owner(a);
var b=d._getDate(a);
if(a.tagName=="TD"){if(d._hasTime){d._setPopupMonth(b.getFullYear(),b.getMonth()+1,b);
}else{if(d._value!=null){var c=d._value;
b.setHours(c.getHours(),c.getMinutes(),c.getSeconds());
}d.$hidePopup();
d._setValue(b,true);
}}};
Jui.basic.DateBox.doPopupDateDoubleClick=function(){var a=event.srcElement;
var e=Jui.$owner(a);
if(a.tagName=="TD"&&e._hasTime){var d=e._getDate(a);
var c=e._popup._timeTable.rows[0].cells;
var b=parseInt(c[0].firstChild.firstChild.value)||0;
var f=parseInt(c[2].firstChild.firstChild.value)||0;
d.setHours(b,f,0,0);
e.$hidePopup();
e._setValue(d,true);
}};
Jui.basic.DateBox.prototype._getDate=function(b){var c=this;
var f=b.parentElement.rowIndex;
var e=parseInt(b.innerHTML);
var a=e>20&&f==2?c._month-1:(e<15&&f>=6?c._month+1:c._month);
return new Date(c._year,a-1,e);
};
Jui.basic.DateBox.prototype.$hidePopup=function(){var a=this;
if(Jui.popup.$isOpen(a._popup)){Jui.popup.$hide(a._popup);
a.$removeElementClass(["DropUp","DropDown"]);
}};
Jui.basic.DateBox.prototype._setValue=function(d,b){var c=this;
var a=c._value;
c._value=d==null?null:(Jui.cast.toDate(d)||c._value);
c._inputElem.value=c._value==null?"":Jui.cast.toString(c._value,c._format);
if(b&&Jui.cast.toString(a,c._format)!=Jui.cast.toString(c._value,c._format)){c.fireEvent("onchange");
}};
Jui.basic.DateBox.prototype._initPopup=function(){var b=this;
var a="<div class=JuiDateBoxPopup><table class=JuiDateBoxPopupTable unselectable=on onselectstart='return false'><tr><td class=JuiDateBoxPopupTopBarCell><table class=JuiDateBoxPopupTopBar><tr><td class='JuiDateBoxPopupNavigator JuiDateBoxPopupPreviousYear' onclick=Jui.basic.DateBox.doPopupPreviousYearClick()></td><td class='JuiDateBoxPopupNavigator JuiDateBoxPopupPreviousMonth' onclick=Jui.basic.DateBox.doPopupPreviousMonthClick()></td><td class=JuiDateBoxPopupCurrentYearMonth></td><td class='JuiDateBoxPopupNavigator JuiDateBoxPopupNextMonth' onclick=Jui.basic.DateBox.doPopupNextMonthClick()></td><td class='JuiDateBoxPopupNavigator JuiDateBoxPopupNextYear' onclick=Jui.basic.DateBox.doPopupNextYearClick()></td></tr></table></td></tr><tr><td align=center><table class=JuiDateBoxPopupDateTable><tr><td>"+Jui.util.getWeekDayName(0,true)+"</td><td>"+Jui.util.getWeekDayName(1,true)+"</td><td>"+Jui.util.getWeekDayName(2,true)+"</td><td>"+Jui.util.getWeekDayName(3,true)+"</td><td>"+Jui.util.getWeekDayName(4,true)+"</td><td>"+Jui.util.getWeekDayName(5,true)+"</td><td>"+Jui.util.getWeekDayName(6,true)+"</td></tr><tr class=JuiDateBoxPopupSplitter><td colspan=7><div></div></td></tr>"+Jui.string.repeat("<tr class=JuiDateBoxPopupDateRow onclick=Jui.basic.DateBox.doPopupDateClick() ondblclick=Jui.basic.DateBox.doPopupDateDoubleClick()>"+Jui.string.repeat("<td></td>",7)+"</tr>",6)+"<tr class=JuiDateBoxPopupSplitter><td colspan=7><div></div></td></tr></table></td></tr><tr><td align=center><table class=JuiDateBoxPopupTimeTable><tr><td><div class=JuiDateBoxPopupTimeItem _limit=24><input onchange=Jui.basic.DateBox.doPopupTimeInputChange()><div><span onclick=Jui.basic.DateBox.doPopupTimeUpButtonClick()></span><span onclick=Jui.basic.DateBox.doPopupTimeDownButtonClick()></span></div></div></td><td class=JuiDateBoxPopupTimeSeparator>:</td><td><div class=JuiDateBoxPopupTimeItem _limit=60><input onchange=Jui.basic.DateBox.doPopupTimeInputChange()><div><span onclick=Jui.basic.DateBox.doPopupTimeUpButtonClick()></span><span onclick=Jui.basic.DateBox.doPopupTimeDownButtonClick()></span></div></div></td></tr></table></td></tr><tr><td align=center><table class=JuiDateBoxPopupButtonTable><tr><td><div onclick=Jui.basic.DateBox.doPopupTodayButtonClick()>"+Jui.i18n.getText("Jui.DateBox.Today")+"</div></td><td><div onclick=Jui.basic.DateBox.doPopupClearButtonClick()>"+Jui.i18n.getText("Jui.DateBox.Clear")+"</div></td><td><div onclick=Jui.basic.DateBox.doPopupOkButtonClick()>"+Jui.i18n.getText("Jui.DateBox.Ok")+"</div></td></tr></table></td></tr></table></div>";
b._popup=Jui.popup.$create(a,b);
b._popup.onmousedown=Jui.basic.DateBox.doPopupMouseDown;
b._popup._monthCell=b._popup.firstChild.rows[0].cells[0].firstChild.rows[0].cells[2];
b._popup._dateTable=b._popup.firstChild.rows[1].cells[0].firstChild;
b._popup._timeRow=b._popup.firstChild.rows[2];
b._popup._timeTable=b._popup.firstChild.rows[2].cells[0].firstChild;
b._popup._okCell=b._popup.firstChild.rows[3].cells[0].firstChild.rows[0].cells[2];
b._popupHeight=b._popup.offsetHeight;
b._timeRowHeight=b._popup._timeRow.offsetHeight;
};
Jui.basic.DateBox.prototype._setPopupMonth=function(l,g,p){var k=this;
if(k._popup==null){k._initPopup();
}if(arguments.length==3){k._popupDate=p;
}var b=new Date(l,g-1,1);
var a=new Date(l,g,1);
var h=new Date(l,g-1,1-b.getDay());
k._year=l;
k._month=g;
var o=k._popupDate==null?null:k._popupDate.getFullYear();
var f=k._popupDate==null?null:k._popupDate.getMonth();
var n=k._popupDate==null?null:k._popupDate.getDate();
k._popup._monthCell.innerHTML=l+"-"+(g<10?"0"+g:g);
for(var e=0;
e<6;
++e){for(var c=0;
c<7;
++c){var m=k._popup._dateTable.rows[e+2].cells[c];
Jui.dom.tagAttribute(m,"Disabled",h<b||h>=a);
Jui.dom.tagAttribute(m,"Current",h.getFullYear()==o&&h.getMonth()==f&&h.getDate()==n);
m.innerHTML=h.getDate();
h=new Date(h.getFullYear(),h.getMonth(),h.getDate()+1);
}}};
Jui.basic.DateBox.prototype._setPopupTime=function(a,d){var c=this;
if(c._popup==null){c._initPopup();
}var b=c._popup._timeTable.rows[0].cells;
b[0].firstChild.firstChild.value=a<10?"0"+a:a;
b[2].firstChild.firstChild.value=d<10?"0"+d:d;
};
Jui.basic.DateBox.prototype._getPopupTime=function(){var c=this;
if(c._popup==null){c._initPopup();
}var b=c._popup._timeTable.rows[0].cells;
var a=parseInt(b[0].firstChild.firstChild.value)||0;
var d=parseInt(b[2].firstChild.firstChild.value)||0;
return{hour:a,minute:d};
};
Jui.basic.DateBox._addPopupTimeItemValue=function(e){var c=Jui.dom.getAncestorByClassName("JuiDateBoxPopupTimeItem");
var a=parseInt(c.getAttribute("_limit"));
var b=c.firstChild;
var d=((parseInt(b.value)||0)+a+e)%a;
b.value=d<10?"0"+d:d;
};
Jui.$define("Jui.basic.PictureBox",Jui.basic.Box);
Jui.basic.PictureBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"PictureBox");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+"><div><img></div></div>";
};
Jui.basic.PictureBox.initialize=function(e,c,b){c=c||{};
b=b||this;
var f=this.superClass.initialize(e,c,b);
f._face=c.face||"PictureBox";
f._accept=c.accept||"image/*";
f._maxSize=c.maxSize||10*1024*1024;
f._typePattern=c.typePattern||"^image/";
f._inner=e.firstChild;
f._image=f._inner.firstChild;
f._image.onload=f.$class.doImageLoaded;
f._image.onclick=f.$class.doImageClick;
e.oncontextmenu=Jui.basic.PictureBox.doContextMenu;
f.onchange=c.onchange;
f.onselect=c.onselect;
f.onsetfocus=c.onsetfocus;
f.onview=c.onview;
var d=Jui.basic.PictureBox._getMenuItems();
f._menu=Jui.basic.PopupMenu.create({owner:f,items:d,onclick:Jui.basic.PictureBox.doMenuClick});
f.setStretch(Jui.cast.toBool(c.stretch,false));
f.setUrlFunction(c.urlFunction);
f.setEnterSelect(Jui.cast.toBool(c.enterSelect,true));
f.setDisabled(Jui.cast.toBool(c.disabled,false));
f.setValue(c.value);
var a=f.getFileSelectOptions();
Jui.upload.setFileDropZone(e,a,Jui.basic.PictureBox.doFileDrop);
return f;
};
Jui.basic.PictureBox.prototype.isStretch=function(){return this._stretch;
};
Jui.basic.PictureBox.prototype.setStretch=function(a){var b=this;
b._stretch=Jui.cast.toBool(a,true);
};
Jui.basic.PictureBox.prototype.setUrlFunction=function(a){var b=this;
b._urlFunction=a;
};
Jui.basic.PictureBox.prototype.isEnterSelect=function(){return this._enterSelect;
};
Jui.basic.PictureBox.prototype.setEnterSelect=function(a){var b=this;
b._enterSelect=Jui.cast.toBool(a,true);
};
Jui.basic.PictureBox.prototype.focus=function(){this.fireEvent("onsetfocus");
};
Jui.basic.PictureBox.prototype.setDisabled=function(a){Jui.basic.Box.prototype.setDisabled.call(this,a);
};
Jui.basic.PictureBox.prototype.getValue=function(){return this._value;
};
Jui.basic.PictureBox.prototype.setValue=function(b){var a=this;
a._value=Jui.cast.toString(b)||null;
if(a._urlFunction!=null){if(a._value==null){a._image.style.position="absolute";
}else{a._image.style.position="static";
a._image.style.width="auto";
a._image.style.height="auto";
a._image.src=a._urlFunction(a._value);
}}};
Jui.basic.PictureBox.prototype.getFileSelectOptions=function(){var a=this;
return{accept:a._accept,typePattern:a._typePattern,maxSize:a._maxSize};
};
Jui.basic.PictureBox.prototype.toText=function(a){return Jui.string.isEmpty(a)?"":"[image]";
};
Jui.basic.PictureBox.doImageLoaded=function(){var f=Jui.$owner(this);
var a=f._inner.clientWidth;
var d=f._inner.clientHeight;
var b=f._image.width;
var e=f._image.height;
if(b>0&&e>0){var c=Math.min(a/b,d/e);
f._inner.style.paddingTop=(f._stretch?0:(d-e*c)/2)+"px";
f._image.style.width=f._stretch?"100%":(b*c)+"px";
f._image.style.height=f._stretch?"100%":(e*c)+"px";
}};
Jui.basic.PictureBox.doImageClick=function(){var a=Jui.$owner();
if(a._value!=null){a.fireEvent("onview");
}};
Jui.basic.PictureBox.doContextMenu=function(){var b=Jui.$owner();
var a=!b.isDisabled();
b._menu.setItemEnabled("View",b._value!=null);
b._menu.setItemEnabled("SelectFile",a);
b._menu.setItemEnabled("Clear",a);
b._menu.show();
return false;
};
Jui.basic.PictureBox.doMenuClick=function(c){var b=this.getOwner();
if(c.id=="View"){b.fireEvent("onview");
}else{if(c.id=="SelectFile"){var a=b.getFileSelectOptions();
Jui.upload.selectFile(a,function(d){b.fireEvent("onselect",{file:d[0]});
});
}else{if(c.id=="Clear"){b.setValue();
}}}};
Jui.basic.PictureBox.doFileDrop=function(a){Jui.$owner(this).fireEvent("onselect",{file:a[0]});
};
Jui.basic.PictureBox._getMenuItems=function(){return[{id:"View",text:Jui.i18n.getText("Jui.PictureBox.View")},{splitter:true},{id:"SelectFile",text:Jui.i18n.getText("Jui.PictureBox.SelectFile")},{id:"Clear",text:Jui.i18n.getText("Jui.PictureBox.Clear")}];
};
Jui.basic.PictureBox.prototype._upload=function(c){var b=this;
if(c.length!=1){Jui.message.alert(Jui.i18n.getText("Jui.PictureBox.FileCountInvalid"));
return;
}var a=c[0];
if(!/^image\//.test(a.type)){Jui.message.alert(Jui.i18n.getText("Jui.PictureBox.FileTypeInvalid"));
return;
}if(a.size>b._maxSize){var d=Jui.cast.toFileSizeText(b._maxSize,true);
Jui.message.alert(Jui.i18n.getText("Jui.PictureBox.FileSizeInvalid").replace("${0}",d));
return;
}b.fireEvent("onselect",{file:a});
};
Jui.$define("Jui.basic.ComboBox",Jui.basic.Box);
Jui.basic.ComboBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"ComboBox");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+" oncontextmenu=Jui.event.stop()><input class='JuiInput JuiComboBoxText'><div class=JuiComboBoxIcon unselectable=on onselectstart='return false'></div></div>";
};
Jui.basic.ComboBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"ComboBox";
d._icon=c.lastChild;
d._input=c.firstChild;
d._groups=null;
d._items=null;
d._map={};
d._popupList=null;
d.onbeforedrop=b.onbeforedrop;
d.onchange=b.onchange;
d.onkeydown=b.onkeydown;
d.onsetfocus=b.onsetfocus;
d.setBackgroundColor(b.backgroundColor);
d.setTextAsValue(Jui.cast.toBool(b.textAsValue,true));
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.setMaxLength(b.maxLength);
d.setDropOnly(b.dropOnly);
d.setEmptyText(b.emptyText);
d.loadItems(b.items);
d.setValue(b.value,b.text);
return d;
};
Jui.basic.ComboBox.prototype.setBackgroundColor=function(a){if(!Jui.string.isEmpty(a)){this.element.style.backgroundColor=a;
}};
Jui.basic.ComboBox.prototype.focus=function(){this.fireEvent("onsetfocus");
this._input.focus();
};
Jui.basic.ComboBox.prototype.setTextAsValue=function(b){var a=this;
a._textAsValue=Jui.cast.toBool(b,true);
};
Jui.basic.ComboBox.prototype.setDisabled=function(a){Jui.basic.Box.prototype.setDisabled.call(this,a);
var b=this;
a=b.isDisabled();
b.element.onclick=a?null:b.$class.doClick;
b._input.readOnly=a||b.isDropOnly();
b._input.tabIndex=a?-1:0;
b._input.onfocus=a?null:b.$class.doInputFocus;
b._input.onblur=a?null:b.$class.doInputBlur;
b._input.onchange=a?null:b.$class.doInputChange;
b._input.onkeydown=a?null:b.$class.doInputKeyDown;
b._input.onmousedown=a?null:b.$class.doIconMouseDown;
b._icon.onmousedown=a?null:b.$class.doIconMouseDown;
};
Jui.basic.ComboBox.prototype.isDropOnly=function(){return this._dropOnly;
};
Jui.basic.ComboBox.prototype.setDropOnly=function(a){var b=this;
b._dropOnly=Jui.cast.toBool(a,true);
b._input.readOnly=b._dropOnly||b.isDisabled();
b._input.style.cursor=b._dropOnly?"default":"";
};
Jui.basic.ComboBox.prototype.setMaxLength=function(b){var a=parseInt(b);
if(!isNaN(a)){var c=this;
c._maxLength=a<=0?2147483647:a;
c._input.maxLength=c._maxLength;
}};
Jui.basic.ComboBox.prototype.setEmptyText=function(a){this._input.placeholder=a||"";
};
Jui.basic.ComboBox.prototype.getText=function(){return this._input.value;
};
Jui.basic.ComboBox.prototype.getValue=function(){if(!this._textAsValue||this._value!=null){return this._value;
}else{return this._input.value||null;
}};
Jui.basic.ComboBox.prototype.setValue=function(a,b){a=Jui.string.trim(Jui.cast.toString(a));
if(a in this._map){this._setValue(a,this._map[a]);
}else{if(b!=null){this._setValue(a,b);
}else{this._setValue(null,a);
}}};
Jui.basic.ComboBox.prototype.toText=function(a,b){if(!Jui.string.isEmpty(b)){return b;
}if(a==null){return"";
}a=Jui.string.trim(a);
return a in this._map?this._map[a]:a;
};
Jui.basic.ComboBox.prototype.getItems=function(){return Jui.util.clone(this._items);
};
Jui.basic.ComboBox.prototype.loadItems=function(k,a){var f=this;
var b=Jui.util.clone(k)||[];
f._items=b;
f._map={};
if(b.length>0&&b[0].items==null){b=[{items:b}];
}for(var d=0;
d<b.length;
++d){var e=b[d].items;
for(var c=e.length-1;
c>=0;
--c){var h=e[c];
if(!("value" in h)){h.value=h.text;
}if(!("text" in h)){h.text=h.value;
}f._map[h.value]=h.text;
if(h.disabled==true){e.splice(c,1);
}}}var g=Jui.string.trim(f.getValue());
if(g!=null&&!(g in f._map)&&a){f._setValue();
}else{if(g!=null&&g in f._map&&f.getText()!=f._map[g]){f._setValue(g,f._map[g]);
}}f._groups=b;
};
Jui.basic.ComboBox.prototype.containsValue=function(a){return a in this._map;
};
Jui.basic.ComboBox.doClick=function(){Jui.$owner()._input.focus();
};
Jui.basic.ComboBox.doInputFocus=function(){Jui.$owner(this).$addElementClass("Focused");
};
Jui.basic.ComboBox.doInputBlur=function(){Jui.$owner(this).$removeElementClass("Focused");
};
Jui.basic.ComboBox.doInputKeyDown=function(){var a=Jui.$owner();
if(event.keyCode==27){if(Jui.browser.mozilla){a._input.blur();
}var b=a.getValue()!=null||a.getText()!="";
a._setValue(null,"");
if(Jui.browser.mozilla){a._input.focus();
}if(b){a.fireEvent("onchange");
}}a.fireEvent("onkeydown",{keyCode:event.keyCode});
};
Jui.basic.ComboBox.doInputChange=function(){var a=Jui.$owner();
a._value=null;
a.fireEvent("onchange");
};
Jui.basic.ComboBox.doIconMouseDown=function(){var c=Jui.$owner();
if(event.srcElement==c._input&&!c.isDropOnly()){return;
}if(/Drop/.test(c.element.className)){c.$removeElementClass(["DropUp","DropDown"]);
return;
}Jui.event.stopPropagation();
if(c.fireEvent("onbeforedrop")!=false){c._setPopupItems();
var b=Jui.theme[c._face+".PopupOffsetH"]||0;
var a=Jui.theme[c._face+".PopupOffsetV"]||1;
var d=c._popupList.showTo(c.element,b,a);
c.$addElementClass(d.isTop?"DropUp":"DropDown",true);
}};
Jui.basic.ComboBox.doPopupItemClick=function(b){var a=this.getOwner();
var c=a.getValue()!=b.value||a.getText()!=b.text;
a._setValue(b.value,b.text);
if(c){a.fireEvent("onchange");
}};
Jui.basic.ComboBox.doPopupHide=function(){var a=this;
var b=a.getOwner();
b.$removeElementClass(["DropUp","DropDown"]);
};
Jui.basic.ComboBox.prototype._setValue=function(b,c){var a=this;
a._value=b;
a._input.value=c==null?"":c;
};
Jui.basic.ComboBox.prototype._setPopupItems=function(){var a=this;
if(a._popupList==null){a._popupList=Jui.basic.PopupList.create({owner:a});
a._popupList.onclick=Jui.basic.ComboBox.doPopupItemClick;
a._popupList.onhide=Jui.basic.ComboBox.doPopupHide;
}else{if(a._groups==null){return;
}}a._popupList.setItems(a._groups);
a._groups=null;
};
Jui.$define("Jui.basic.HtmlBox",Jui.basic.Box);
Jui.basic.HtmlBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"HtmlBox");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+"><textarea></textarea></div>";
};
Jui.basic.HtmlBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"HtmlBox";
d._todoMap={};
d.onchange=b.onchange;
d.onkeydown=b.onkeydown;
d.onsetfocus=b.onsetfocus;
Jui.basic.HtmlBox._impl.initialize(d,c,b);
d.setMaxLength(b.maxLength);
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.setValue(b.value);
d._timer=setInterval(function(){d._routineCheck();
},100);
return d;
};
Jui.basic.HtmlBox.setEditor=function(a){if(/kindeditor/.test(a.editorPath)){Jui.basic.HtmlBox._impl=Jui.basic.HtmlBox._kindEditorImpl;
}else{if(/ckeditor/.test(a.editorPath)){Jui.basic.HtmlBox._impl=Jui.basic.HtmlBox._ckEditorImpl;
}}Jui.basic.HtmlBox._editorArgs=a.editorArgs;
Jui.basic.HtmlBox._impl.importFiles(a.editorPath);
if(a.wordPasterArgs!=null){Jui.basic.HtmlBox._isImageAutoUpload=true;
Jui.basic.HtmlBox._wpArgs=a.wordPasterArgs;
var b=a.wordPasterArgs.path;
Jui.script.importCss(b+"/css/WordPaster.css");
Jui.script.importCss(b+"/css/ui-lightness/jquery-ui-1.8.11.custom.css");
Jui.script.importJs(b+"/js/jquery.min.js");
Jui.script.importJs(b+"/js/jquery-ui-1.8.11.custom.min.js");
Jui.script.importJs(a.editorPath+"/wordpaster/js/WordPaster.js");
}};
Jui.basic.HtmlBox.initializeWordPaster=function(){if(Jui.basic.HtmlBox._isImageAutoUpload){var a=Jui.basic.HtmlBox._wpArgs;
var c=window.location.href.replace(/[^\/]+$/g,"");
var d=c+a.path+"/";
var b={config:{PostUrl:c+a.postUrl,IcoPath:d,CabPath:d+"WordPaster.cab#version="+a.cabVersion,CrxPath:d+"WordPaster.crx",CrxName:a.crxName,MimeTypeChr:a.mimeTypeChr,ClsidImagePaster:a.clsidImagePaster,ClsidUploader:a.clsidUploader,ClsidParser:a.clsidParser},activeX:{Uploader:a.company+".ImageFileUploader",ImagePaster:a.company+".ImagePaster",WordParser:a.company+".WordParser"}};
pasterMgr=new PasterManager(b);
pasterMgr.Load();
if(pasterMgr.Browser.NeedUpdate()){Jui.message.htmlHint(Jui.i18n.getText("Jui.HtmlBox.WordPasterNeedUpdate"));
}}};
Jui.basic.HtmlBox.prototype.setMaxLength=function(b){var c=this;
var a=parseInt(b);
c._maxLength=a<=0?2147483647:a;
};
Jui.basic.HtmlBox.prototype.focus=function(){this.fireEvent("onsetfocus");
Jui.basic.HtmlBox._impl.focus(this);
};
Jui.basic.HtmlBox.prototype.setDisabled=function(a){var b=this;
Jui.basic.Box.prototype.setDisabled.call(b,a);
Jui.basic.HtmlBox._impl.setDisabled(b,b.isDisabled());
};
Jui.basic.HtmlBox.prototype.getValue=function(){var a=Jui.basic.HtmlBox._impl.getValue(this);
return a==null?"":a;
};
Jui.basic.HtmlBox.prototype.setValue=function(a){Jui.basic.HtmlBox._impl.setValue(this,a||"");
};
Jui.basic.HtmlBox.prototype.toText=function(a){return a.replace(/\n+/g," ").replace(/<[^>]*>/g,"");
};
Jui.basic.HtmlBox._defaultItems=["Source","|","Maximize","Preview","RemoveFormat","|","TextColor","BGColor","|","Bold","Italic","Underline","|","JustifyLeft","JustifyCenter","JustifyRight","|","Cut","Copy","Paste","|","Undo","Redo","|","NumberedList","BulletedList","|","Font","FontSize","|","Image","Flash","Link","Table","Iframe"];
Jui.basic.HtmlBox.prototype._routineCheck=function(){var c=this;
var a=Math.max(c.element.offsetHeight,Jui.theme["HtmlBox.MinHeight"]);
if(a>0&&a!=c._elementHeight){if(Jui.basic.HtmlBox._impl.setHeight(c,a)){c._elementHeight=a;
}}for(var b in c._todoMap){if(c._todoMap[b]()){delete c._todoMap[b];
}}};
Jui.basic.HtmlBox._ckEditorImpl={_keyBounded:false,importFiles:function(a){this._instances=[];
a=a.replace(/\/+$/g,"")+"/";
Jui.script.importJs(a+"ckeditor.js");
},initialize:function(c,b,a){var d=Jui.object.merge({height:80,resize_enabled:false,removePlugins:"elementspath",toolbar:this._getPlugins(a.plugins),language:this._getLanguage(),allowedContent:true},Jui.basic.HtmlBox._editorArgs);
if(!("filebrowserImageUploadUrl" in d)){d.filebrowserImageUploadUrl="quicksilver/editor/ckeditor/FileUpload.jsp";
}if(Jui.basic.HtmlBox._isImageAutoUpload){d.extraPlugins="imagepaster,excelpaster";
}c._editor=CKEDITOR.replace(b.lastChild,d);
if(Jui.basic.HtmlBox._isImageAutoUpload){c._editor.on("focus",Jui.basic.HtmlBox._ckEditorImpl.doFocus);
pasterMgr.Init(c._editor);
}if(!Jui.basic.HtmlBox._ckEditorImpl._keyBounded){CKEDITOR.config.keystrokes=[[CKEDITOR.CTRL+86,"imagepaster"]];
Jui.basic.HtmlBox._ckEditorImpl._keyBounded=true;
}},doFocus:function(){pasterMgr.SetEditor(this);
},focus:function(a){a._editor.focus();
},setDisabled:function(b,a){if(b._editor.editable()!=null){b._editor.setReadOnly(a);
}else{b._todoMap.setDisabled=function(){if(b._editor.editable()!=null){b._editor.setReadOnly(a);
return true;
}};
}},setHeight:function(b,a){if(b._editor.editable()!=null){b._editor.resize("height",a,false);
return true;
}},getValue:function(a){return a._editor.getData();
},setValue:function(a,b){a._editor.setData(b);
},_getPlugins:function(b){if(b==null){b=Jui.basic.HtmlBox._defaultItems;
}var a=[];
var e=null;
for(var c=0;
c<b.length;
++c){var d=b[c];
if(e==null||d=="|"){e=[];
a.push(e);
}if(d!="|"){e.push(d);
}}if(Jui.basic.HtmlBox._isImageAutoUpload){a.push(["imagepaster","excelpaster"]);
}a.push(["BidiLtr","BidiRtl"]);
return a;
},_getLanguage:function(){return Jui.i18n.getLocale().replace(/_/g,"-").toLowerCase();
}};
Jui.basic.HtmlBox._kindEditorImpl={_pluginMap:{Source:"source",Maximize:"fullscreen",Preview:"preview",RemoveFormat:"removeformat",TextColor:"forecolor",BGColor:"hilitecolor",Bold:"bold",Italic:"italic",Underline:"underline",JustifyLeft:"justifyleft",JustifyCenter:"justifycenter",JustifyRight:"justifyright",Cut:"cut",Copy:"copy",Paste:"paste",Undo:"undo",Redo:"redo",NumberedList:"insertorderedlist",BulletedList:"insertunorderedlist",Font:"fontname",FontSize:"fontsize",Image:"image",Flash:"flash",Link:"link",Table:"table"},importFiles:function(a){a=a.replace(/\/+$/g,"")+"/";
Jui.script.importJs(a+"kindeditor-min.js");
Jui.script.importJs(a+"lang/"+this._getLanguage()+".js");
},initialize:function(c,b,a){var d=Jui.object.merge({resizeType:0,width:"100%",items:this._getPlugins(a.plugins),langType:this._getLanguage(),afterCreate:function(){this.edit.doc.onkeydown=function(){c.fireEvent("onkeydown",event);
};
}},Jui.basic.HtmlBox._editorArgs);
c._editor=KindEditor.create(b.lastChild,d);
c._editor.statusbar.css("display","none");
if(Jui.basic.HtmlBox._isImageAutoUpload){pasterMgr.Init(c._editor);
KindEditor.ctrl(c._editor.edit.doc,"V",function(){pasterMgr.SetEditor(c._editor);
pasterMgr.Paste();
});
}},focus:function(a){a._editor.focus();
},setDisabled:function(b,a){b._editor.readonly(a);
},setHeight:function(b,a){b._editor.resize(null,a-2);
return true;
},getValue:function(a){return a._editor.html();
},setValue:function(a,b){a._editor.html(b==null?"":b);
},_getPlugins:function(b){if(b==null){b=Jui.basic.HtmlBox._defaultItems;
}var a=[];
for(var c=0;
c<b.length;
++c){var d=b[c];
if(d=="|"){a.push(d);
}else{if(d in this._pluginMap){a.push(this._pluginMap[d]);
}}}if(Jui.basic.HtmlBox._isImageAutoUpload){a=a.concat("|","wordpaster","excelpaster");
}return a;
},_getLanguage:function(){var a=Jui.i18n.getLocale().replace(/-/g,"_").toLowerCase();
if(a=="zh_tw"){return"zh_TW";
}else{if(/^zh/.test(a)){return"zh_CN";
}else{if(/^ar/.test(a)){return"ar";
}else{if(/^ko/.test(a)){return"ko";
}else{return"en";
}}}}}};
Jui.$define("Jui.basic.PopupMenu",Jui.basic.Control);
Jui.basic.PopupMenu.create=function(a){a=a||{};
var b=new Jui.basic.PopupMenu();
b.onclick=a.onclick;
b.onhide=a.onhide;
b._owner=a.owner;
b._menu=null;
b._items=a.items||[];
b._itemMap={};
return b;
};
Jui.basic.PopupMenu.prototype.load=function(a){var b=this;
if(b._menu!=null){Jui.basic.PopupMenu._disposeMenu(b._menu);
}b._menu=null;
b._items=a||[];
b._itemMap={};
};
Jui.basic.PopupMenu.prototype.isEmpty=function(){return this._items.length==0;
};
Jui.basic.PopupMenu.prototype.isOpen=function(){return Jui.popup.$isOpen(this._menu);
};
Jui.basic.PopupMenu.prototype.show=function(a,d){var b=this;
var c={left:a||event.clientX,right:a||event.clientX,top:d||event.clientY,bottom:d||event.clientY};
if(b._menu==null){b._menu=b._load(b._items);
}b.hide();
Jui.basic.PopupMenu._showMenu(b._menu,c);
};
Jui.basic.PopupMenu.prototype.showTo=function(c){var e=this;
var h=c.getBoundingClientRect();
var a=Jui.dom.getComputedStyle(c);
var i=parseInt(a.borderLeftWidth)>0;
var f=parseInt(a.borderRightWidth)>0;
var d=parseInt(a.borderTopWidth)>0;
var j=parseInt(a.borderBottomWidth)>0;
var b={left:h.left-(i?0:1),right:h.right-(f?1:0),top:h.bottom-(j?1:0),bottom:h.top-(d?0:1)};
if(e._menu==null){e._menu=e._load(e._items);
}e.hide();
var g=h.right-h.left-(i?1:0)-(f?1:0);
return Jui.basic.PopupMenu._showMenu(e._menu,b,h.width,g);
};
Jui.basic.PopupMenu.prototype.hide=function(){var a=this;
if(Jui.popup.$isOpen(a._menu)){Jui.basic.PopupMenu._hideMenu(a._menu);
a.fireEvent("onhide");
}};
Jui.basic.PopupMenu.prototype.setItemEnabled=function(c,a){var b=this;
if(b._menu==null){b._menu=b._load(b._items);
}b._itemMap[c].className=a?"JuiPopupMenuItem":"JuiPopupMenuItem JuiPopupMenuItemDisabled";
};
Jui.basic.PopupMenu.prototype.$hidePopup=function(){this.hide();
};
Jui.basic.PopupMenu.doMenuMouseDown=function(){Jui.event.stopPropagation();
};
Jui.basic.PopupMenu.doItemMouseOver=function(){if(this.className=="JuiPopupMenuItem"){var c=this;
var b=Jui.dom.getAncestorByClassName("JuiPopupMenu",c);
var a=b._droppedRow;
if(c!=a){if(a!=null){setTimeout(function(){if(a!=b._activeRow){Jui.basic.PopupMenu._hideMenu(a._subMenu);
b._droppedRow=null;
}},500);
}if(c._subMenu!=null){c._timer=setTimeout(function(){Jui.basic.PopupMenu._showSubMenu(c._subMenu);
c._timer=null;
},600);
}}if(c!=b._activeRow){if(b._activeRow!=null){b._activeRow.className="JuiPopupMenuItem";
}c.className="JuiPopupMenuItem JuiPopupMenuItemActive";
b._activeRow=c;
}}};
Jui.basic.PopupMenu.doItemMouseOut=function(){var b=this;
if(/Active/.test(b.className)&&!Jui.popup.$isOpen(b._subMenu)){var a=Jui.dom.getAncestorByClassName("JuiPopupMenu",b);
a._activeRow=null;
b.className="JuiPopupMenuItem";
if(a._droppedRow!=null){a._droppedRow.className="JuiPopupMenuItem JuiPopupMenuItemActive";
a._activeRow=a._droppedRow;
}if(b._timer!=null){clearTimeout(b._timer);
}}};
Jui.basic.PopupMenu.doItemMouseDown=function(){var a=this._subMenu;
if(!/Disabled/.test(this.className)&&a!=null&&a.style.display!="block"){Jui.basic.PopupMenu._showSubMenu(a);
}};
Jui.basic.PopupMenu.doItemClick=function(){var d=this;
if(d._subMenu==null&&!/Disabled|Splitter/.test(d.className)){var c=Jui.$owner(d);
c.hide();
var b=Jui.util.clone(d._json);
var a=d._json.onclick;
if(a!=null&&Jui.util.execute(a,c,Jui.util.clone(b))==false){return;
}c.fireEvent("onclick",b);
}};
Jui.basic.PopupMenu._showMenu=function(g,e,b,f){var c=Math.max(g._width,b||0);
var h=Jui.popup.$show(g,e,c,g._height);
g.style.width=c+"px";
g.className="JuiPopupMenu JuiPopupMenu"+(h.isTop?"Top":"Bottom")+(h.isLeft?"Left":"Right");
g._activeRow=null;
g._droppedRow=null;
for(var a=0,d=g.getElementsByTagName("TR");
a<d.length;
++a){if(/Active/.test(d[a].className)){d[a].className="JuiPopupMenuItem";
}}g._mask.style.display=b==null?"none":"block";
if(f!=null){g._mask.style.width=f+"px";
g._mask.style.left=h.isLeft?"auto":"0px";
g._mask.style.right=h.isLeft?"0px":"auto";
g._mask.style.top=h.isTop?"auto":"-1px";
g._mask.style.bottom=h.isTop?"-1px":"auto";
}return h;
};
Jui.basic.PopupMenu._hideMenu=function(e,a){for(var b=0,c=e.getElementsByTagName("TR");
b<c.length;
++b){var d=c[b];
if(d._subMenu!=null){Jui.basic.PopupMenu._hideMenu(d._subMenu);
if(d._timer!=null){clearTimeout(d._timer);
d._timer=null;
}}}if(!a){Jui.popup.$hide(e);
}};
Jui.basic.PopupMenu._disposeMenu=function(c){for(var a=0,b=c.getElementsByTagName("TR");
a<b.length;
++a){if(b[a]._subMenu!=null){Jui.basic.PopupMenu._disposeMenu(b[a]._subMenu);
}}Jui.popup.$free(c);
};
Jui.basic.PopupMenu._showSubMenu=function(c){var f=c._parentRow;
var d=Jui.dom.getAncestorByClassName("JuiPopupMenu",f);
var b=d.getBoundingClientRect();
var a=f.getBoundingClientRect();
var e={left:b.right-1,right:b.left,top:a.top,bottom:a.bottom-1,isTop:true};
Jui.basic.PopupMenu._hideMenu(d,true);
Jui.basic.PopupMenu._showMenu(c,e);
d._droppedRow=f;
};
Jui.basic.PopupMenu.prototype._load=function(e){var f=this;
var c=[];
c.push("<div class=JuiPopupMenu unselectable=on onselectstart='return false'>");
c.push("<div class=JuiPopupMenuBorderMask></div>");
c.push("<table>");
for(var d=0;
d<e.length;
++d){var g=e[d];
if(g.splitter){c.push("<tr class=JuiPopupMenuSplitter>");
c.push("<td class=JuiPopupMenuIconCell></td>");
c.push("<td colspan=2 class=JuiPopupMenuIconSplitterCell><div class=JuiPopupMenuSplitterLine></div></td>");
c.push("</tr>");
}else{var b=g.disabled?"Disabled":"";
c.push("<tr class=JuiPopupMenuItem"+b+">");
c.push("<td class=JuiPopupMenuIconCell valign=middle>");
c.push(Jui.string.isEmpty(g.icon)?"":"<div class=JuiPopupMenuIcon style='background-image:url("+g.icon+")'></div>");
c.push("</td>");
c.push("<td class=JuiPopupMenuTextCell nowrap>"+Jui.$h(g.text||"")+"</td>");
c.push("<td class=JuiPopupMenuArrowCell>");
c.push(Jui.array.isEmpty(g.children)?"":"<div class=JuiPopupMenuArrow></div>");
c.push("</td>");
c.push("</tr>");
}}c.push("</table>");
c.push("</div>");
var a=Jui.popup.$create(c.join(""),f);
a._mask=a.firstChild;
a._width=a.offsetWidth;
a._height=a.offsetHeight;
a.style.display="none";
a.onmousedown=Jui.basic.PopupMenu.doMenuMouseDown;
a.oncontextmenu=Jui.event.stop;
for(var d=0,j=a.getElementsByTagName("TR");
d<e.length;
++d){var g=e[d];
var h=j[d];
h._json=Jui.util.clone(g);
h.onclick=Jui.basic.PopupMenu.doItemClick;
h.onmousedown=Jui.basic.PopupMenu.doItemMouseDown;
h.onmouseover=Jui.basic.PopupMenu.doItemMouseOver;
h.onmouseout=Jui.basic.PopupMenu.doItemMouseOut;
f._itemMap[g.id]=h;
if(!Jui.array.isEmpty(g.children)){h._subMenu=f._load(g.children);
h._subMenu._parentRow=h;
}}return a;
};
Jui.$define("Jui.basic.Dialog",Jui.basic.Control,[Jui.basic.ElementDraggable]);
Jui.basic.Dialog.getHtml=function(b,c,a){b=b||{};
return"<div class=JuiDialog"+Jui.$p({id:c,style:b.style})+" unselectable=on onselectstart='return false'><div class='JuiTitle JuiDialogTitle'></div><div class=JuiDialogTitleMask draggable=true></div><div class='JuiDialogButton JuiDialogClose'></div><div class=JuiDialogButton JuiDialogMaximize'></div><div class=JuiDialogBody unselectable=off><div class=JuiDialogFrameMask></div></div></div>";
};
Jui.basic.Dialog.initialize=function(c,b,a){b=b||{};
a=a||this;
var e=this.superClass.initialize(c,b,a);
e._title=c.children[0];
e._titleMask=c.children[1];
e._maximize=c.children[2];
e._close=c.children[3];
e._body=c.children[4];
e._frameMask=c.children[4].lastChild;
var d="<div class=JuiDialogMask unselectable=on onselectstart='return false'></div>";
e._mask=Jui.dom.insertHtml(document.body,"BeforeEnd",d);
e._mask._owner=e;
c.oncontextmenu=a.doContextMenu;
e._maximize.onclick=a.doMaximizeClick;
e._close.onclick=a.doCloseClick;
e._titleMask.ondblclick=a.doTitleDoubleClick;
e._titleMask.onmousedown=a.doTitleMouseDown;
e._titleMask.ondragstart=a.doTitleDragStart;
e._titleMask.ondragend=a.doTitleDragEnd;
e._mask.onmousedown=a.doMaskMouseDown;
e._mask.oncontextmenu=a.doContextMenu;
return e;
};
Jui.basic.Dialog.open=function(c,b,h){var f=(b&&b.window)||Jui.window.getTop();
var a=f.Jui.basic.Dialog;
var g=a._instances;
var e=null;
for(var d=0;
d<g.length;
++d){if(!g[d].isOpen()){e=g[d];
break;
}}if(e==null){e=a.create({target:f.document.body});
e._index=a._instances.length;
a._instances.push(e);
}e._opener=window;
e.open(c,b,h);
return e;
};
Jui.basic.Dialog.getCurrent=function(){var a=window;
while(a!=a.parent){try{var b=Jui.dom.getAncestorByClassName("JuiDialog",a.frameElement);
if(b!=null){return b._owner;
}a=a.parent;
}catch(c){break;
}}return null;
};
Jui.basic.Dialog.prototype.isOpen=function(){return this.element.style.display=="block";
};
Jui.basic.Dialog.prototype.open=function(d,a,f){a=a||{};
var t=this;
try{var s=document.activeElement;
while(s!=null&&s.tagName=="IFRAME"){s=s.contentWindow.document.activeElement;
}if(s!=null){s.blur();
}t._activeElement=s;
}catch(r){t._activeElement=null;
}delete t._result;
t._removeFrame();
t._frame=Jui.dom.insertHtml(t._body,"AfterBegin","<iframe frameborder=0></iframe>");
t._frame.onload=Jui.basic.Dialog.doFrameLoad;
t._frame.src=d;
t._callback=f;
t._data=a.data;
t._resizable=Jui.cast.toBool(a.resizable,true);
t._title.innerHTML=Jui.$h(a.title||Jui.i18n.getText("Jui.Dialog.DefaultTitle"));
t._mask.style.display="block";
t._mask.style.zIndex=++Jui.basic.Dialog._zIndex;
t._maximize.style.display=t._resizable?"block":"none";
t._showCloseButton=Jui.cast.toBool(a.showCloseButton,true);
t._maximize.removeAttribute("Maximized");
var m=Jui.theme["Dialog.DefaultWidth"];
var b=Jui.theme["Dialog.DefaultHeight"];
var n=Jui.theme["Dialog.MinMargin"];
var p=Jui.theme["Dialog.PaddingX"];
var o=Jui.theme["Dialog.PaddingY"];
var h=t._index*Jui.theme["Dialog.OverlapX"];
var g=t._index*Jui.theme["Dialog.OverlapY"];
var q=t._mask.offsetWidth-2*n-h;
var k=t._mask.offsetHeight-2*n-g;
var l=Math.max(80,Math.min((a.width||m)+p,q));
var j=Math.max(20,Math.min((a.height||b)+o,k));
var s=t.element;
var c=Math.max(8,(t._mask.offsetWidth-l)*0.5+h);
var i=Math.max(8,(t._mask.offsetHeight-j)*0.4-g);
t._setRect({left:c,top:i,width:l,height:j,showCloseButton:t._showCloseButton});
s.style.zIndex=++Jui.basic.Dialog._zIndex;
s.style.display="block";
s.style.resize=t._resizable?"both":"none";
if(a.maximize){t._switchMaximizeState();
}};
Jui.basic.Dialog.prototype.close=function(a){var c=this;
var b=c.getContentWindow();
if(Jui.event.fireCustomEvent(b,"beforeclose")==false){return;
}c._opener=null;
c._mask.style.display="none";
c.element.style.display="none";
c._removeFrame();
if(arguments.length>0){c._result=a;
}if(c._callback!=null&&typeof(c._result)!="undefined"){c._callback(Jui.util.clone(c._result));
}if(c._activeElement!=null){try{c._activeElement.focus();
}catch(d){}c._activeElement=null;
}};
Jui.basic.Dialog.prototype.getContentWindow=function(){return Jui.dom.getFrameWindow(this._frame);
};
Jui.basic.Dialog.prototype.getData=function(){return this._data;
};
Jui.basic.Dialog.prototype.getResult=function(){return this._result;
};
Jui.basic.Dialog.prototype.setResult=function(a){var b=this;
b._result=a;
};
Jui.basic.Dialog.prototype.addSize=function(b,a){var d=this;
if(d._isMaximized()){d._rect.width+=b||0;
d._rect.height+=a||0;
}else{var c=d.element;
if(typeof(b)=="number"&&b!=0){c.style.width=(parseInt(c.style.width)+b)+"px";
}if(typeof(a)=="number"&&a!=0){c.style.height=(parseInt(c.style.height)+a)+"px";
}}};
Jui.basic.Dialog.prototype.setSize=function(b,a){var c=this;
if(c._isMaximized()){if(typeof(b)=="number"&&b>0){c._rect.width=b;
}if(typeof(a)=="number"&&a>0){c._rect.height=a;
}}else{if(typeof(b)=="number"&&b>0){c.element.style.width=b+"px";
}if(typeof(a)=="number"&&a>0){c.element.style.height=a+"px";
}}};
Jui.basic.Dialog.prototype.getOpener=function(){var a=this;
return a._opener;
};
Jui.basic.Dialog.doContextMenu=function(){return false;
};
Jui.basic.Dialog.doMaskMouseDown=function(){Jui.$owner()._flash(6);
};
Jui.basic.Dialog.doMaximizeClick=function(){Jui.$owner()._switchMaximizeState();
};
Jui.basic.Dialog.doCloseClick=function(){Jui.$owner().close();
};
Jui.basic.Dialog.doFrameLoad=function(){try{var a=Jui.$owner();
var c=a._frame.contentWindow.document.title;
if(!Jui.string.isEmpty(c)){a._title.innerHTML=Jui.$h(c);
}}catch(b){}};
Jui.basic.Dialog.doTitleDoubleClick=function(){var a=Jui.$owner();
if(a._resizable){a._switchMaximizeState();
}};
Jui.basic.Dialog.doTitleMouseDown=function(){var a=Jui.$owner();
if(!a._isMaximized()){a._eventPoint={x:event.clientX,y:event.clientY};
a._position={x:a.element.offsetLeft,y:a.element.offsetTop};
}};
Jui.basic.Dialog.doTitleDragStart=function(){var a=Jui.$owner();
if(a._isMaximized()){Jui.event.preventDefault();
}else{a._frameMask.style.display="block";
a.$startElementDrag();
}};
Jui.basic.Dialog.doTitleDragEnd=function(){var a=Jui.$owner();
a._frameMask.style.display="none";
a.$endElementDrag();
};
Jui.basic.Dialog._zIndex=200000000;
Jui.basic.Dialog._instances=[];
Jui.basic.Dialog.prototype._removeFrame=function(){var a=this;
if(a._frame!=null){Jui.dom.removeElement(a._frame);
delete a._frame;
}};
Jui.basic.Dialog.prototype._isMaximized=function(){return this._maximize.hasAttribute("Maximized");
};
Jui.basic.Dialog.prototype._switchMaximizeState=function(){var a=this;
if(a._isMaximized()){a._setRect(a._rect);
}else{a._rect={left:a.element.offsetLeft,top:a.element.offsetTop,width:a.element.offsetWidth,height:a.element.offsetHeight,showCloseButton:a._showCloseButton};
var b=Jui.theme["Dialog.MinMargin"];
a._setRect({left:b,right:b,top:b,bottom:b,showCloseButton:a._showCloseButton});
}Jui.dom.tagAttribute(a._maximize,"Maximized",!a._isMaximized());
};
Jui.basic.Dialog.prototype._setRect=function(b){var a=this.element;
a.style.left=b.left+"px";
a.style.top=b.top+"px";
a.style.right=b.right==null?"auto":b.right+"px";
a.style.bottom=b.bottom==null?"auto":b.bottom+"px";
a.style.width=b.width==null?"auto":b.width+"px";
a.style.height=b.height==null?"auto":b.height+"px";
this._maximize.className=b.showCloseButton?"JuiDialogButton JuiDialogMaximize":"JuiDialogButton JuiDialogMaximizeCloseHidden";
this._close.className=b.showCloseButton?"JuiDialogButton JuiDialogClose":"JuiDialogButton JuiDialogCloseHidden";
};
Jui.basic.Dialog.prototype._flash=function(b){var a=this;
if(b>0){a.$tagElementClass("Flash",b%2==0);
setTimeout(function(){a._flash(b-1);
},80);
}};
Jui.$define("Jui.basic.MultiEntityBox",Jui.basic.Box);
Jui.basic.MultiEntityBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"MultiEntityBox");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+" oncontextmenu=Jui.event.stop()><input class='JuiInput JuiMultiEntityBoxText' readonly><div class=JuiMultiEntityBoxMagnifier unselectable=on onselectstart='return false'></div></div>";
};
Jui.basic.MultiEntityBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"MultiEntityBox";
d._input=c.children[0];
d._magnifier=c.children[1];
d._backSplitter=b.backSplitter||"|";
d._frontSplitter=b.frontSplitter||", ";
d._values=[];
d._texts=[];
d.onchange=b.onchange;
d.onselect=b.onselect;
d.onsetfocus=b.onsetfocus;
d.setBackgroundColor(b.backgroundColor);
d.setEntityType(b.entityType);
d.setEmptyText(b.emptyText);
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.setValue(b.value,b.text);
return d;
};
Jui.basic.MultiEntityBox.prototype.setBackgroundColor=function(a){if(!Jui.string.isEmpty(a)){this.element.style.backgroundColor=a;
}};
Jui.basic.MultiEntityBox.prototype.getEntityType=function(){return this._entityType;
};
Jui.basic.MultiEntityBox.prototype.setEntityType=function(b){var a=this;
a._entityType=b;
};
Jui.basic.MultiEntityBox.prototype.focus=function(){this.fireEvent("onsetfocus");
this._input.focus();
};
Jui.basic.MultiEntityBox.prototype.setDisabled=function(a){Jui.basic.Box.prototype.setDisabled.call(this,a);
var b=this;
a=b.isDisabled();
b.element.onclick=a?null:b.$class.doClick;
b._input.tabIndex=a?-1:0;
b._input.onfocus=a?null:b.$class.doInputFocus;
b._input.onblur=a?null:b.$class.doInputBlur;
b._input.onkeydown=a?null:b.$class.doInputKeyDown;
b._magnifier.onclick=a?null:b.$class.doMagnifierClick;
};
Jui.basic.MultiEntityBox.prototype.setEmptyText=function(a){this._input.placeholder=a||"";
};
Jui.basic.MultiEntityBox.prototype.getValue=function(){return this._values.length==0?null:this._values.join(this._backSplitter);
};
Jui.basic.MultiEntityBox.prototype.setValue=function(d,e){var b=this;
var a=Jui.string.isEmpty(d)?[]:(d+"").split(b._backSplitter);
var c=Jui.string.isEmpty(e)?[]:(e+"").split(b._backSplitter);
b.setValues(a,c);
};
Jui.basic.MultiEntityBox.prototype.getValues=function(){return Jui.util.clone(this._values);
};
Jui.basic.MultiEntityBox.prototype.setValues=function(a,c){var b=this;
b._values=Jui.util.clone(a||[]);
b._texts=Jui.util.clone(c||[]);
b._input.value=b._texts.join(b._frontSplitter);
};
Jui.basic.MultiEntityBox.prototype.getText=function(){return this._texts.join(this._backSplitter);
};
Jui.basic.MultiEntityBox.prototype.toText=function(b,c){var a=this;
if(Jui.string.isEmpty(c)){return"";
}else{return Jui.string.trim(c).split(a._backSplitter).join(a._frontSplitter);
}};
Jui.basic.MultiEntityBox.doClick=function(){Jui.$owner()._input.focus();
};
Jui.basic.MultiEntityBox.doInputFocus=function(){Jui.$owner(this).$addElementClass("Focused");
};
Jui.basic.MultiEntityBox.doInputBlur=function(){Jui.$owner(this).$removeElementClass("Focused");
};
Jui.basic.MultiEntityBox.doInputKeyDown=function(){var a=Jui.$owner();
if(event.keyCode==27){a.setValue();
a.fireEvent("onchange");
}};
Jui.basic.MultiEntityBox.doMagnifierClick=function(){Jui.$owner().fireEvent("onselect",{type:"mouse"});
};
Jui.$define("Jui.basic.MessageBox",Jui.basic.Control,[Jui.basic.ElementDraggable]);
Jui.basic.MessageBox.getHtml=function(d,h,c){d=d||{};
var b=[];
var g="min-width:64px;margin:0px 3px 0px 3px";
for(var e=0,f=this._getButtons();
e<f.length;
++e){var a=Jui.object.merge({style:g,face:"SmallButton"},f[e]);
b.push(Jui.basic.Button.getHtml(a));
}return"<div class=JuiMessageBox"+Jui.$p({id:h,style:d.style})+" unselectable=on onselectstart='return false'><div class='JuiTitle JuiMessageBoxTitle'></div><div class=JuiMessageBoxTitleMask draggable=true></div><div class=JuiMessageBoxClose></div><div class=JuiMessageBoxIcon></div><div class=JuiMessageBoxText></div><div class=JuiMessageBoxButtonRow>"+b.join("")+"</div></div>";
};
Jui.basic.MessageBox.initialize=function(d,b,a){b=b||{};
a=a||this;
var g=this.superClass.initialize(d,b,a);
g._title=d.children[0];
g._titleMask=d.children[1];
g._close=d.children[2];
g._icon=d.children[3];
g._text=d.children[4];
g._buttonRow=d.children[5];
g._buttons=[];
var e="<div class=JuiMessageBoxMask unselectable=on onselectstart='return false'></div>";
g._mask=Jui.dom.insertHtml(d.ownerDocument.body,"BeforeEnd",e);
g._mask._owner=g;
g._close.onclick=a.doCloseClick;
g._titleMask.onmousedown=a.doTitleMouseDown;
g._titleMask.ondragstart=a.doTitleDragStart;
g._titleMask.ondragend=a.doTitleDragEnd;
d.onmouseover=a.doMouseOver;
for(var c=0,f=this._getButtons();
c<f.length;
++c){var b=Jui.object.merge({dark:true,onclick:a.doButtonClick},f[c]);
g._buttons.push(Jui.basic.Button.initialize(g._buttonRow.children[c],b));
}return g;
};
Jui.basic.MessageBox.open=function(c){var e=Jui.window.getTop();
var b=e.Jui.basic.MessageBox;
var f=b._instances;
if(c.type=="hint"){for(var d=0;
d<f.length;
++d){if(f[d]._visible&&f[d]._type=="hint"){f[d].close();
}}}for(var d=0;
d<f.length;
++d){if(!f[d]._visible){f[d].open(c);
return f[d];
}}var a=b.create({target:e.document.body});
b._instances.push(a);
a.open(c);
return a;
};
Jui.basic.MessageBox.OK=1;
Jui.basic.MessageBox.YES=2;
Jui.basic.MessageBox.NO=4;
Jui.basic.MessageBox.CANCEL=8;
Jui.basic.MessageBox.NONE=0;
Jui.basic.MessageBox.OKCANCEL=9;
Jui.basic.MessageBox.YESNO=6;
Jui.basic.MessageBox.YESNOCANCEL=14;
Jui.basic.MessageBox._zIndex=400000000;
Jui.basic.MessageBox.prototype.open=function(a){this._visible=true;
a=a||{};
var c=a.buttons==null?Jui.basic.MessageBox.OK:a.buttons;
for(var b=0;
b<this._buttons.length;
++b){this._buttons[b].element.style.display=c&Math.pow(2,b)?"inline-block":"none";
}this._title.innerHTML=Jui.$h(a.title||Jui.i18n.getText("Jui.MessageBox.DefaultTitle"));
this._text.innerHTML=a.html||Jui.$h(a.text);
this._callback=a.callback;
this._type=a.type;
this._mask.style.display=a.type=="hint"?"none":"block";
this._mask.style.zIndex=++Jui.basic.MessageBox._zIndex;
this.element.className=a.type=="hint"?"JuiMessageBox JuiMessageBoxHint":"JuiMessageBox";
this.element.style.zIndex=++Jui.basic.MessageBox._zIndex;
this.element.style.display="block";
var d=a.icon||"Info";
if(/^\w+$/.test(d)){this._icon.style.backgroundImage="";
this._icon.className="JuiMessageBoxIcon JuiMessageBox"+Jui.string.upperFirstLetter(d)+"Icon";
}else{this._icon.style.backgroundImage="url("+d+")";
}if(a.type=="hint"){this.element.style.left="auto";
this.element.style.top="auto";
this.element.style.right="9px";
this.element.style.bottom="9px";
this.element.onmouseout=this.$class.doMouseOut;
this._duration=a.duration||5;
this._fadeIn(0);
}else{var f=(document.body.offsetWidth-this.element.offsetWidth)*0.5;
var e=(document.body.offsetHeight-this.element.offsetHeight)*0.4;
this.element.style.left=Math.max(0,f)+"px";
this.element.style.top=Math.max(0,e)+"px";
this.element.style.right="auto";
this.element.style.bottom="auto";
}};
Jui.basic.MessageBox.prototype.close=function(a){this._mask.style.display="none";
this.element.style.display="none";
this.element.onmouseout=null;
this._clearTimer();
this._visible=false;
};
Jui.basic.MessageBox.doCloseClick=function(){var a=Jui.$owner();
a.close();
if(a._callback!=null){a._callback("cancel");
}};
Jui.basic.MessageBox.doButtonClick=function(b){var a=Jui.$owner(this.element.parentElement);
a.close();
if(a._callback!=null){a._callback(b.name);
}};
Jui.basic.MessageBox.doMouseOver=function(){var a=Jui.$owner();
if(a._type=="hint"){a._clearTimer();
}};
Jui.basic.MessageBox.doMouseOut=function(){var a=Jui.$owner(event.fromElement);
if(a._type=="hint"){a._fadeOutTimer=setTimeout(function(){a._fadeOut(1);
},1000);
}};
Jui.basic.MessageBox.doTitleMouseDown=function(){var a=Jui.$owner();
if(a._type!="hint"){a.$recordElementDragPosition();
}};
Jui.basic.MessageBox.doTitleDragStart=function(){var a=Jui.$owner();
if(a._type=="hint"){Jui.event.preventDefault();
}else{a.$startElementDrag();
}};
Jui.basic.MessageBox.doTitleDragEnd=function(){Jui.$owner().$endElementDrag();
};
Jui.basic.MessageBox._instances=[];
Jui.basic.MessageBox._getButtons=function(){return[{name:"ok",text:Jui.i18n.getText("Jui.MessageBox.Ok")},{name:"yes",text:Jui.i18n.getText("Jui.MessageBox.Yes")},{name:"no",text:Jui.i18n.getText("Jui.MessageBox.No")},{name:"cancel",text:Jui.i18n.getText("Jui.MessageBox.Cancel")}];
};
Jui.basic.MessageBox.prototype._fadeIn=function(a){var d=this;
var c=0.05;
var b=0.2;
a=Math.min(1,a+c+b*(1-a));
d._setOpacity(a);
if(a<1){d._fadeInTimer=setTimeout(function(){d._fadeIn(a);
},100);
}else{d._fadeOutTimer=setTimeout(function(){d._fadeOut(1);
},d._duration*1000);
}};
Jui.basic.MessageBox.prototype._fadeOut=function(a){var d=this;
var c=0.025;
var b=0.04;
a=Math.max(0,a-c-b*a);
d._setOpacity(a);
if(a>0){d._fadeOutTimer=setTimeout(function(){d._fadeOut(a);
},100);
}else{d.close();
}};
Jui.basic.MessageBox.prototype._setOpacity=function(a){this.element.style.filter=a==1||a==0?"":"alpha(opacity="+Math.round(a*100)+")";
this.element.style.opacity=a;
};
Jui.basic.MessageBox.prototype._clearTimer=function(){if(this._fadeInTimer!=null){clearTimeout(this._fadeInTimer);
}if(this._fadeOutTimer!=null){clearTimeout(this._fadeOutTimer);
}this._fadeInTimer=null;
this._fadeOutTimer=null;
this._setOpacity(1);
};
Jui.$define("Jui.basic.MonthDayBox",Jui.basic.Box);
Jui.basic.MonthDayBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"MonthDayBox");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+" oncontextmenu=Jui.event.stop()><input class='JuiInput JuiMonthDayText'><div class=JuiMonthDayIcon unselectable=on onselectstart='return false'></div></div>";
};
Jui.basic.MonthDayBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"MonthDayBox";
d._inputElem=c.firstChild;
d._iconElem=c.lastChild;
d._fireEventOnBlur=true;
d._popup=null;
d.onchange=b.onchange;
d.onkeydown=b.onkeydown;
d.onsetfocus=b.onsetfocus;
d.setBackgroundColor(b.backgroundColor);
d.setEmptyText(b.emptyText);
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.setValue(b.value);
return d;
};
Jui.basic.MonthDayBox.prototype.focus=function(){this.fireEvent("onsetfocus");
this._inputElem.focus();
};
Jui.basic.MonthDayBox.prototype.setBackgroundColor=function(a){if(!Jui.string.isEmpty(a)){this.element.style.backgroundColor=a;
}};
Jui.basic.MonthDayBox.prototype.setEmptyText=function(a){this._inputElem.placeholder=a||"";
};
Jui.basic.MonthDayBox.prototype.setDisabled=function(a){Jui.basic.Box.prototype.setDisabled.call(this,a);
var b=this;
a=b.isDisabled();
b.element.onclick=a?null:b.$class.doClick;
b._inputElem.readOnly=a;
b._inputElem.tabIndex=a?-1:0;
b._inputElem.onfocus=a?null:b.$class.doInputFocus;
b._inputElem.onblur=a?null:b.$class.doInputBlur;
b._inputElem.onkeydown=a?null:b.$class.doInputKeyDown;
b._iconElem.onmousedown=a?null:b.$class.doIconMouseDown;
};
Jui.basic.MonthDayBox.prototype.getValue=function(){return Jui.cast.toString(this._value,"");
};
Jui.basic.MonthDayBox.prototype.setValue=function(a){this._setValue(a);
};
Jui.basic.MonthDayBox.prototype.toText=function(a){return Jui.cast.toString(a,"");
};
Jui.basic.MonthDayBox.doClick=function(){Jui.$owner()._inputElem.focus();
};
Jui.basic.MonthDayBox.doInputFocus=function(){Jui.$owner().$addElementClass("Focused");
};
Jui.basic.MonthDayBox.doInputBlur=function(){var a=Jui.$owner();
a.$removeElementClass("Focused");
a._setValue(a._inputElem.value,a._fireEventOnBlur);
};
Jui.basic.MonthDayBox.doInputKeyDown=function(){var a=Jui.$owner();
if(event.keyCode==27){if(Jui.browser.mozilla){a._fireEventOnBlur=false;
a._inputElem.blur();
}a._setValue(null,true);
if(Jui.browser.mozilla){a._inputElem.focus();
a._fireEventOnBlur=true;
}}a.fireEvent("onkeydown",{keyCode:event.keyCode});
};
Jui.basic.MonthDayBox.doIconMouseDown=function(){var g=Jui.$owner();
if(/Drop/.test(g.element.className)){g.$removeElementClass(["DropUp","DropDown"]);
return;
}Jui.event.stopPropagation();
var e=g._value||(new Date().getMonth()+1)+"-"+(new Date().getDate());
g._setPopupMonth(parseInt(e.split("-")[0]),parseInt(e.split("-")[1]));
var h=g.element.getBoundingClientRect();
var d=Jui.theme[g._face+".PopupOffsetH"]||0;
var f=Jui.theme[g._face+".PopupOffsetV"]||1;
var a=Jui.theme["MonthDayBox.PopupMinWidth"];
var c=Math.max(Math.round(h.right)-Math.round(h.left)+2*d,a);
var b={left:h.left-d,right:h.right-1+d,top:h.bottom-1+f,bottom:h.top-f};
var j=g._popupHeight;
var i=Jui.popup.$show(g._popup,b,c,j);
Jui.dom.tagAttribute(g._popup,"Up",i.isTop);
g.$addElementClass(i.isTop?"DropUp":"DropDown",true);
};
Jui.basic.MonthDayBox.doPopupHide=function(){var a=this;
var b=a.getOwner();
b.$removeElementClass(["DropUp","DropDown"]);
};
Jui.basic.MonthDayBox.doPopupMouseDown=function(){Jui.event.stopPropagation();
};
Jui.basic.MonthDayBox.doPopupClearButtonClick=function(){var a=Jui.$owner();
a.$hidePopup();
a._setValue(null,true);
};
Jui.basic.MonthDayBox.doPopupOkButtonClick=function(){var b=Jui.$owner();
var a=b._popupDate||(new Date().getMonth()+1+"-"+new Date().getDate());
b.$hidePopup();
b._setValue(a,true);
};
Jui.basic.MonthDayBox.doPopupDateClick=function(){var a=event.srcElement;
var h=parseInt(a.innerHTML);
var e=Jui.$owner(a);
var f=e._popupDate;
var c=a.cellIndex;
var g=f.split("-")[0];
var b=f.split("-")[1];
var i=e._dayMax;
if(isNaN(h)){e._setPopupMonth(g,b);
return;
}if(h>i[g-1]&&c>1){e._setPopupMonth(g,i[g-1]);
return;
}if(c<2&&b>i[h-1]){e._setPopupMonth(h,i[h-1]);
return;
}e._setPopupMonth(c<2?h:g,c>1?h:b);
};
Jui.basic.MonthDayBox.prototype.$hidePopup=function(){var a=this;
if(Jui.popup.$isOpen(a._popup)){Jui.popup.$hide(a._popup);
a.$removeElementClass(["DropUp","DropDown"]);
}};
Jui.basic.MonthDayBox.prototype._setValue=function(d,b){var c=this;
var a=c._value;
c._value=d==null?null:(c._toMonthDayFormat(d)||c._value);
c._inputElem.value=c._value==null?"":Jui.cast.toString(c._value,"");
if(b&&Jui.cast.toString(a,"")!=Jui.cast.toString(c._value,"")){c.fireEvent("onchange");
}};
Jui.basic.MonthDayBox.prototype._toMonthDayFormat=function(c){var b=this;
if(!/^\d{1,2}-\d{1,2}$/.test(c)){return null;
}var d=c.split("-")[0];
var a=c.split("-")[1];
if(d>12){return null;
}if(a>b._dayMax[d-1]){return null;
}return c;
};
Jui.basic.MonthDayBox.prototype._initPopup=function(){var b=this;
var a="<div class=JuiMonthDayBoxPopup><table class=JuiMonthDayBoxPopupTable unselectable=on onselectstart='return false'><tr><td align=center><table class=JuiMonthDayBoxPopupDateTable><tr><td colspan=2>"+Jui.i18n.getText("Jui.MonthDay").split(",")[0]+"</td><td colspan=5>"+Jui.i18n.getText("Jui.MonthDay").split(",")[1]+"</td></tr><tr class=JuiMonthDayBoxPopupSplitter><td colspan=2><div></div></td><td colspan=5><div></div></td></tr>"+Jui.string.repeat("<tr class=JuiMonthDayBoxPopupDateRow onclick=Jui.basic.MonthDayBox.doPopupDateClick()>"+Jui.string.repeat("<td></td>",7)+"</tr>",7)+"<tr class=JuiMonthDayBoxPopupSplitter><td colspan=7><div></div></td></tr></table></td></tr><tr><td align=center><table class=JuiMonthDayBoxPopupButtonTable><tr><td><div onclick=Jui.basic.MonthDayBox.doPopupClearButtonClick()>"+Jui.i18n.getText("Jui.MonthDayBox.Clear")+"</div></td><td><div onclick=Jui.basic.MonthDayBox.doPopupOkButtonClick()>"+Jui.i18n.getText("Jui.MonthDayBox.Ok")+"</div></td></tr></table></td></tr></table></div>";
b._popup=Jui.popup.$create(a,b);
b._popup.onmousedown=Jui.basic.MonthDayBox.doPopupMouseDown;
b._popup._dateTable=b._popup.firstChild.rows[0].cells[0].firstChild;
b._popup._okCell=b._popup.firstChild.rows[1].cells[0].firstChild.rows[0].cells[1];
b._popupHeight=b._popup.offsetHeight;
};
Jui.basic.MonthDayBox.prototype._monthDay=[[1,2,1,2,3,4,5],[3,4,6,7,8,9,10],[5,6,11,12,13,14,15],[7,8,16,17,18,19,20],[9,10,21,22,23,24,25],[11,12,26,27,28,29,30],[0,0,31,0,0,0,0]];
Jui.basic.MonthDayBox.prototype._dayMax=[31,29,31,30,31,30,31,31,30,31,30,31];
Jui.basic.MonthDayBox.prototype._setPopupMonth=function(f,b){var e=this;
if(e._popup==null){e._initPopup();
}if(arguments.length==2){e._popupDate=f+"-"+b;
}for(var d=0;
d<7;
++d){for(var c=0;
c<7;
++c){var a=e._popup._dateTable.rows[d+2].cells[c];
a.innerHTML=e._monthDay[d][c]==0?"":e._monthDay[d][c];
Jui.dom.tagAttribute(a,"Current",(c<2&&e._monthDay[d][c]==f)||(c>1&&e._monthDay[d][c]==b));
}}};
Jui.$define("Jui.basic.CheckBox",Jui.basic.Box);
Jui.basic.CheckBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"CheckBox")+" JuiCheckParent";
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+" oncontextmenu=Jui.event.stop() unselectable=on onselectstart='return false'><div class=JuiCheck></div></div>";
};
Jui.basic.CheckBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"CheckBox";
d._innerElem=c.firstChild;
d.onchange=b.onchange;
d.onsetfocus=b.onsetfocus;
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.setValue(b.value);
return d;
};
Jui.basic.CheckBox.prototype.focus=function(){this.fireEvent("onsetfocus");
this._innerElem.focus();
};
Jui.basic.CheckBox.prototype.setDisabled=function(a){Jui.basic.Box.prototype.setDisabled.call(this,a);
var b=this;
a=b.isDisabled();
b._innerElem.tabIndex=a?-1:0;
b._innerElem.onclick=a?null:b.$class.doInnerClick;
b._innerElem.onfocus=a?null:b.$class.doInnerFocus;
b._innerElem.onblur=a?null:b.$class.doInnerBlur;
b._innerElem.onkeypress=a?null:b.$class.doInnerKeyPress;
};
Jui.basic.CheckBox.prototype.getValue=function(){return this._innerElem.hasAttribute("checked");
};
Jui.basic.CheckBox.prototype.setValue=function(a){Jui.dom.tagAttribute(this._innerElem,"checked",Jui.cast.toBool(a,false),"full");
};
Jui.basic.CheckBox.prototype.toText=function(a){return Jui.cast.toBool(a)?"√":"";
};
Jui.basic.CheckBox.doInnerClick=function(){var a=Jui.$owner();
a.setValue(!a.getValue());
a.focus();
a.fireEvent("onchange");
};
Jui.basic.CheckBox.doInnerFocus=function(){Jui.$owner().$addElementClass("Focused");
};
Jui.basic.CheckBox.doInnerBlur=function(){Jui.$owner().$removeElementClass("Focused");
};
Jui.basic.CheckBox.doInnerKeyPress=function(){var a=Jui.$owner();
if(event.keyCode==27){a.setValue();
a.fireEvent("onchange");
}else{if(event.keyCode==32){a.setValue(!a.getValue());
a.fireEvent("onchange");
}}};
Jui.$define("Jui.basic.InputBox",Jui.basic.Box);
Jui.basic.InputBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"InputBox");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+"><input"+(c.type=="password"?" type=password":"")+"></div>";
};
Jui.basic.InputBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"InputBox";
d._input=c.firstChild;
d._popupList=null;
d.onchange=b.onchange;
d.onclick=b.onclick;
d.onkeydown=b.onkeydown;
d.onlinkclick=b.onlinkclick||Jui.basic.InputBox._defaultLinkClickHandler;
d._input.onmousemove=d.$class.doInputMouseMove;
d._input.onclick=d.$class.doInputClick;
d._value="";
d.$initializeAutoComplete(b);
d.setAlign(b.align);
d.setBackgroundColor(b.backgroundColor);
d.setEmptyAsNull(Jui.cast.toBool(b.emptyAsNull,false));
d.setEmptyText(b.emptyText);
d.setMaxLength(b.maxLength);
d.setType(b.type);
d.setScale(b.scale);
d.setFormat(b.format);
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.setValue(b.value);
return d;
};
Jui.basic.InputBox.getPhoneClickHandler=function(){return Jui.basic.InputBox._phoneClickHandler;
};
Jui.basic.InputBox.setPhoneClickHandler=function(a){Jui.basic.InputBox._phoneClickHandler=a;
};
Jui.basic.InputBox.prototype.isDisabled=function(){return/Disabled/.test(this.element.className);
};
Jui.basic.InputBox.prototype.setDisabled=function(a){Jui.basic.Box.prototype.setDisabled.call(this,a);
var b=this;
a=b.isDisabled();
b.element.onclick=a?null:b.$class.doClick;
b._input.readOnly=a;
b._input.tabIndex=a?-1:0;
b._input.onfocus=a?null:b.$class.doInputFocus;
b._input.onblur=a?null:b.$class.doInputBlur;
b._input.onchange=a?null:b.$class.doInputChange;
b._input.onkeydown=a?null:b.$class.doInputKeyDown;
b._input.onkeypress=a?null:b.$class.doInputKeyPress;
};
Jui.basic.InputBox.prototype.isNumberType=function(){return this._type in Jui.basic.InputBox._numberTypes;
};
Jui.basic.InputBox.prototype.isLinkType=function(){return this._type in Jui.basic.InputBox._linkTypes;
};
Jui.basic.InputBox.prototype.focus=function(){this.fireEvent("onsetfocus");
this._input.focus();
};
Jui.basic.InputBox.prototype.getValue=function(){var a=this._input.value;
if(this._type=="password"&&Jui.cast.toBool(this._text,false)){if(a==Jui.basic.InputBox._xwordNotEmptyHintValue){return undefined;
}}if(this.isNumberType()){a=a.replace(/,/g,"");
return Jui.string.isEmpty(a)?null:a;
}else{return this._emptyAsNull&&a==""?null:a;
}};
Jui.basic.InputBox.prototype.getNumberValue=function(){var a=parseFloat(this.getValue());
return isNaN(a)?0:a;
};
Jui.basic.InputBox.prototype.setValue=function(a,b){if(this._type=="password"&&b!=undefined){this._text=Jui.cast.toBool(b,false);
if(this._text&&a==undefined){a=Jui.basic.InputBox._xwordNotEmptyHintValue;
}}this._setValue(a,false);
};
Jui.basic.InputBox.prototype.getText=function(){return this._type=="password"&&Jui.cast.toBool(this._text,false)?"true":undefined;
};
Jui.basic.InputBox.prototype.toText=function(b,c,a){if(this.isNumberType()){b=Jui.cast.toNumber(b);
if(!a&&(b==null||b==0)){return"";
}b=Jui.cast.toString(b,this._format);
return this._type=="percent"?b+"%":b;
}else{if(this._type=="password"){return Jui.string.isEmpty(b)?"":"******";
}else{return b==null?"":Jui.string.trim((b+"").replace(/\n+/g," "));
}}};
Jui.basic.InputBox.prototype.setAlign=function(a){if(!Jui.string.isEmpty(a)){this._input.style.textAlign=a;
}};
Jui.basic.InputBox.prototype.setBackgroundColor=function(a){if(!Jui.string.isEmpty(a)){this.element.style.backgroundColor=a;
}};
Jui.basic.InputBox.prototype.setFormat=function(c){var a=this;
var b=a._format;
if(!Jui.string.isEmpty(c)){a._format=c;
}else{if(a._type=="int"||a._type=="bigint"){a._format="#,##0";
}else{if(a.isNumberType()){a._format=a._scale==0?"#,##0":"#,##0."+Jui.string.repeat("0",a._scale);
}}}if(a._format!=b&&a.isNumberType()&&!Jui.string.isEmpty(a._input.value)){a._setValue(a._input.value);
}};
Jui.basic.InputBox.prototype.setEmptyAsNull=function(b){var a=this;
a._emptyAsNull=Jui.cast.toBool(b,true);
};
Jui.basic.InputBox.prototype.setEmptyText=function(a){this._input.placeholder=a||"";
};
Jui.basic.InputBox.prototype.setMaxLength=function(b){var a=parseInt(b);
if(!isNaN(a)){this._input.maxLength=a<=0?2147483647:a;
}};
Jui.basic.InputBox.prototype.getType=function(){return this._type;
};
Jui.basic.InputBox.prototype.setType=function(a){var b=this;
var c=b._type;
b._type=a||"string";
b.element.setAttribute("type",Jui.basic.InputBox._elementTypeMap[b._type]||"");
if(b._type!=c&&b.isNumberType()&&!Jui.string.isEmpty(b._input.value)){b._setValue(b._input.value);
}};
Jui.basic.InputBox.prototype.setScale=function(c){var b=this;
var a=b._scale;
b._scale=Math.min(10,Math.max(0,typeof(c)=="number"?c:2));
if(b._scale!=a&&b.isNumberType()&&!Jui.string.isEmpty(b._input.value)){b._setValue(b._input.value);
}};
Jui.basic.InputBox.doClick=function(){Jui.$owner()._input.focus();
};
Jui.basic.InputBox.doInputFocus=function(){Jui.$owner(this).$addElementClass("Focused");
};
Jui.basic.InputBox.doInputBlur=function(){var a=Jui.$owner(this);
a.$removeElementClass("Focused");
if(a.isNumberType()){a._setValue(a._input.value,true);
}};
Jui.basic.InputBox.doInputChange=function(){var a=Jui.$owner();
a._setValue(a._input.value,true);
};
Jui.basic.InputBox.doInputKeyDown=function(){var a=Jui.$owner();
if(event.keyCode==27){if(Jui.browser.mozilla){a._input.blur();
}a._setValue(null,true);
if(Jui.browser.mozilla){a._input.focus();
}}if(event.keyCode==13&&Jui.browser.ie){a._setValue(a._input.value,true);
}a.fireEvent("onkeydown",{keyCode:event.keyCode});
};
Jui.basic.InputBox.doInputKeyPress=function(){};
Jui.basic.InputBox.doInputMouseMove=function(){var a=this;
var b=Jui.$owner(a);
if(b.isLinkType()){a.style.cursor=Jui.dom.$isMouseOverText(a,event)?"pointer":"";
}};
Jui.basic.InputBox.doInputClick=function(){var a=Jui.$owner();
if(!Jui.string.isEmpty(a._input.value)&&a._input.style.cursor=="pointer"){a.fireEvent("onlinkclick");
}};
Jui.basic.InputBox.doPopupItemClick=function(b){var a=this.getOwner();
a._setValue(b.text,true);
};
Jui.basic.InputBox.doPopupHide=function(){var a=this;
var b=a.getOwner();
b.$removeElementClass(["DropUp","DropDown"]);
};
Jui.basic.InputBox.prototype.$showAutoCompletePopupList=function(b){var e=this;
if(e._popupList==null){e._popupList=Jui.basic.PopupList.create({owner:e});
e._popupList.onclick=Jui.basic.InputBox.doPopupItemClick;
e._popupList.onhide=Jui.basic.InputBox.doPopupHide;
}if(typeof(b[0])=="string"){for(var c=0;
c<b.length;
++c){b[c]={text:b[c]};
}}e._popupList.setItems(b);
var d=Jui.theme[e._face+".PopupOffsetH"]||0;
var a=Jui.theme[e._face+".PopupOffsetV"]||1;
var f=e._popupList.showTo(e.element,d,a);
e.$removeElementClass(["DropUp","DropDown"]);
e.$addElementClass(f.isTop?"DropUp":"DropDown",true);
};
Jui.basic.InputBox.prototype.$hideAutoCompletePopupList=function(){if(this._popupList!=null){this._popupList.hide();
}};
Jui.basic.InputBox._numberTypes=Jui.array.toSet(["int","bigint","double","percent"]);
Jui.basic.InputBox._linkTypes=Jui.array.toSet(["email","url","phone"]);
Jui.basic.InputBox._xwordNotEmptyHintValue="\t\t\t\t\t\t";
Jui.basic.InputBox._elementTypeMap={"int":"Number",bigint:"Number","double":"Number",percent:"Percent",email:"Email",url:"Url",phone:"Phone"};
Jui.basic.InputBox._elementTypeMap.password="Password";
Jui.basic.InputBox._defaultLinkClickHandler=function(){if(/Empty/.test(this.element.className)){return;
}else{if(this._type=="url"){window.open(Jui.util.getFullUrl(this._input.value),"_blank");
}else{if(this._type=="email"){window.open("mailto:"+this._input.value);
}else{if(this._type=="phone"&&Jui.basic.InputBox._phoneClickHandler!=null){Jui.basic.InputBox._phoneClickHandler(this._input.value);
}}}}};
Jui.basic.InputBox.prototype._setValue=function(e,c){var d=this;
var b=d._value;
if(d.isNumberType()){if(typeof e=="string"){var a=/^[+-]?[\d,\.]+/.exec(e);
e=a==null?"":a[0];
}e=Jui.cast.toNumber(e);
if(d._type=="int"&&e>2147483647){e=2147483647;
}d._input.value=e==null?"":Jui.cast.toString(e,d._format);
}else{d._input.value=e||"";
}d._value=d._input.value;
if(c&&b!=d._value){d.fireEvent("onchange");
}};
Jui.$define("Jui.basic.ProgressBar",Jui.basic.Control,[Jui.basic.ElementDraggable]);
Jui.basic.ProgressBar.getHtml=function(b,c,a){b=b||{};
return"<div class=JuiProgressBar unselectable=on onselectstart='return false'><div class='JuiTitle JuiProgressBarTitle'>"+Jui.i18n.getText("Jui.ProgressBar.Title")+"</div><div class=JuiProgressBarTitleMask draggable=true></div><div class=JuiProgressBarClose></div><div class=JuiProgressBarAnimation></div></div>";
};
Jui.basic.ProgressBar.initialize=function(c,b,a){b=b||{};
a=a||this;
var e=this.superClass.initialize(c,b,a);
e._titleMask=c.children[1];
e._close=c.children[2];
var d="<div class=JuiProgressBarMask unselectable=on onselectstart='return false'></div>";
e._mask=Jui.dom.insertHtml(document.body,"BeforeEnd",d);
e._mask._owner=e;
e._close.onclick=a.doCloseClick;
e._titleMask.onmousedown=a.doTitleMouseDown;
e._titleMask.ondragstart=a.doTitleDragStart;
e._titleMask.ondragend=a.doTitleDragEnd;
return e;
};
Jui.basic.ProgressBar.open=function(a){var d=Jui.basic.ProgressBar._instances;
for(var b=0;
b<d.length;
++b){if(!d[b]._visible){d[b].open(a);
return d[b];
}}var c=Jui.basic.ProgressBar.create({target:document.body});
Jui.basic.ProgressBar._instances.push(c);
c.open(a);
return c;
};
Jui.basic.ProgressBar.prototype.open=function(a){var b=this;
a=a||{};
b._visible=true;
b._callback=a.callback;
b._mask.style.zIndex=++Jui.basic.ProgressBar._zIndex;
b._mask.style.display="block";
b.element.style.zIndex=++Jui.basic.ProgressBar._zIndex;
b.element.style.display="block";
var d=(document.body.offsetWidth-b.element.offsetWidth)*0.5;
var c=(document.body.offsetHeight-b.element.offsetHeight)*0.4;
b.element.style.left=Math.max(0,d)+"px";
b.element.style.top=Math.max(0,c)+"px";
};
Jui.basic.ProgressBar.prototype.close=function(){var a=this;
a._mask.style.display="none";
a.element.style.display="none";
a._visible=false;
a.$endElementDrag();
};
Jui.basic.ProgressBar.doCloseClick=function(){var a=Jui.$owner();
a.close();
if(a._callback!=null){a._callback();
}};
Jui.basic.ProgressBar.doTitleMouseDown=function(){Jui.$owner().$recordElementDragPosition();
};
Jui.basic.ProgressBar.doTitleDragStart=function(){Jui.$owner().$startElementDrag();
};
Jui.basic.ProgressBar.doTitleDragEnd=function(){Jui.$owner().$endElementDrag();
};
Jui.basic.ProgressBar._zIndex=400000000;
Jui.basic.ProgressBar._instances=[];
Jui.$define("Jui.basic.Button",Jui.basic.Control);
Jui.basic.Button.getHtml=function(c,f,b){c=c||{};
var a="Jui"+(c.face||"Button");
var e=Jui.string.isEmpty(c.icon)?"display:none":"background-image:url("+c.icon+")";
var d=Jui.string.isEmpty(c.text)?"display:none":"";
return"<div"+Jui.$p({"class":a,id:f,style:c.style,title:c.hint})+" unselectable=on onselectstart='return false'><div class=JuiButtonIcon style='"+e+"'>&nbsp;</div><div class=JuiButtonText style='"+d+"'>"+Jui.$h(c.text)+"</div></div>";
};
Jui.basic.Button.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._name=b.name;
d._face=b.face||"Button";
d._icon=b.icon;
d._text=b.text;
d._iconElem=c.children[0];
d._textElem=c.children[1];
d.onclick=b.onclick;
if(Jui.cast.toBool(b.dark,false)){Jui.dom.tagAttribute(c,"Dark",true);
}d.setDisabled(Jui.cast.toBool(b.disabled,false));
return d;
};
Jui.basic.Button.prototype.setDisabled=function(a){var b=this;
Jui.basic.Control.prototype.setDisabled.call(b,a);
a=b.isDisabled();
b.element.onclick=a?null:b.$class.doClick;
if(Jui.browser.ie){b.element.onmousedown=a?null:b.$class.doMouseDown;
b.element.onmouseup=a?null:b.$class.doMouseUp;
b.element.onmouseout=a?null:b.$class.doMouseOut;
}};
Jui.basic.Button.prototype.getIcon=function(){return this._icon;
};
Jui.basic.Button.prototype.setIcon=function(a){var b=this;
var c=Jui.string.isEmpty(a);
b._icon=a;
b._iconElem.style.display=c?"none":"";
if(!c){b._iconElem.style.backgroundImage="url("+a+")";
}};
Jui.basic.Button.prototype.getText=function(){return this._text;
};
Jui.basic.Button.prototype.setText=function(c){var a=this;
var b=Jui.string.isEmpty(c);
a._text=c;
a._textElem.style.display=b?"none":"";
if(!b){Jui.dom.setInnerText(a._textElem,c);
}};
Jui.basic.Button.prototype.setHtml=function(a){var b=this;
var c=Jui.string.isEmpty(a);
b._textElem.style.display=c?"none":"";
b._textElem.innerHTML=c?"":a;
b._text=b._textElem.innerText;
};
Jui.basic.Button.prototype.getForm=function(){return this._form;
};
Jui.basic.Button.prototype.setForm=function(a){this._form=a;
};
Jui.basic.Button.prototype.flash=function(a){var b=this;
b.stopFlash();
b._stopFlashOnClick=a!=false;
b._flashIndex=0;
b._flashTimer=setInterval(function(){b._flashIndex++;
var c=b._flashIndex%2==1?"hidden":"visible";
b._iconElem.style.visibility=c;
b._textElem.style.visibility=c;
},400);
};
Jui.basic.Button.prototype.stopFlash=function(){var a=this;
if(a._flashTimer!=null){clearInterval(a._flashTimer);
a._flashTimer=null;
a._iconElem.style.visibility="visible";
a._textElem.style.visibility="visible";
}};
Jui.basic.Button.doClick=function(){var a=Jui.$owner();
if(a._stopFlashOnClick){a.stopFlash();
}a.fireEvent("onclick",{id:a._id,name:a._name,text:a._text});
};
Jui.basic.Button.doMouseDown=function(){var a=Jui.$owner();
a.$addElementClass("MouseDown");
};
Jui.basic.Button.doMouseUp=function(){var a=Jui.$owner();
a.$removeElementClass("MouseDown");
};
Jui.basic.Button.doMouseOut=function(){var a=Jui.$owner(event.fromElement);
a.$removeElementClass("MouseDown");
};
Jui.$define("Jui.basic.TextBox",Jui.basic.Box);
Jui.basic.TextBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"TextBox");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+"><textarea"+Jui.$p({wrap:c.wrap,spellcheck:false})+"></textarea></div>";
};
Jui.basic.TextBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"TextBox";
d._textarea=c.firstChild;
d.onchange=b.onchange;
d.onkeydown=b.onkeydown;
d.onsetfocus=b.onsetfocus;
d.setEmptyText(b.emptyText);
d.setMaxLength(b.maxLength);
d.setFontFamily(b.fontFamily);
d.setHtml(Jui.cast.toBool(b.isHtml,false));
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.setValue(b.value);
return d;
};
Jui.basic.TextBox.prototype.focus=function(){this.fireEvent("onsetfocus");
this._textarea.focus();
};
Jui.basic.TextBox.prototype.setEmptyText=function(a){this._textarea.placeholder=a||"";
};
Jui.basic.TextBox.prototype.isHtml=function(){return this._isHtml;
};
Jui.basic.TextBox.prototype.setHtml=function(a){var b=this;
b._isHtml=Jui.cast.toBool(a,false);
};
Jui.basic.TextBox.prototype.getMaxLength=function(){return this._textarea.maxLength;
};
Jui.basic.TextBox.prototype.setMaxLength=function(b){var a=parseInt(b);
if(!isNaN(a)){this._textarea.maxLength=a;
}};
Jui.basic.TextBox.prototype.setFontFamily=function(a){if(!Jui.string.isEmpty(a)){this._textarea.style.fontFamily=a;
}};
Jui.basic.TextBox.prototype.setDisabled=function(a){Jui.basic.Box.prototype.setDisabled.call(this,a);
var b=this;
a=b.isDisabled();
b._textarea.tabIndex=a?-1:0;
b._textarea.readOnly=a;
b._textarea.onfocus=a?null:b.$class.doFocus;
b._textarea.onblur=a?null:b.$class.doBlur;
b._textarea.onchange=a?null:b.$class.doChange;
b._textarea.onkeydown=a?null:b.$class.doKeyDown;
};
Jui.basic.TextBox.prototype.getSelectedText=function(){var a=this._textarea;
if(a.selectionEnd>a.selectionStart+1){return a.value.substring(a.selectionStart,a.selectionEnd);
}};
Jui.basic.TextBox.prototype.getValue=function(){return this._textarea.value;
};
Jui.basic.TextBox.prototype.setValue=function(a){this._textarea.value=a==null?"":a;
};
Jui.basic.TextBox.prototype.toText=function(b){if(b==null){return"";
}var a=b.replace(/\n+/g," ");
return this._isHtml?a.replace(/<[^>]*>/g,""):a;
};
Jui.basic.TextBox.doFocus=function(){Jui.$owner().$addElementClass("Focused");
};
Jui.basic.TextBox.doBlur=function(){Jui.$owner().$removeElementClass("Focused");
};
Jui.basic.TextBox.doChange=function(){Jui.$owner().fireEvent("onchange");
};
Jui.basic.TextBox.doKeyDown=function(){Jui.$owner().fireEvent("onkeydown",event);
};
Jui.$define("Jui.basic.ToolBar",Jui.basic.Control);
Jui.basic.ToolBar.getHtml=function(b,c,a){b=b||{};
return"<div class=JuiToolBar"+Jui.$p({id:c,style:b.style})+"><div class=JuiToolBarHead></div><div class=JuiToolBarBody><div class=JuiToolBarLeft></div><div class=JuiToolBarRight></div></div><div class=JuiToolBarTail></div></div>";
};
Jui.basic.ToolBar.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._head=c.children[0];
d._body=c.children[1];
d._tail=c.children[2];
d._left=d._body.children[0];
d._right=d._body.children[1];
d._items={};
d._autoHiddenCells=[];
d._menu=Jui.basic.PopupMenu.create({owner:d});
d._menu.onhide=a.doMenuHide;
d._menu.onclick=a.doMenuClick;
c.onselectstart=function(){return event.srcElement.tagName=="INPUT";
};
Jui.event.attach(window,"resize",function(){d._adjust();
});
d._adjust();
return d;
};
Jui.basic.ToolBar.prototype.getItem=function(a){return this._items[a];
};
Jui.basic.ToolBar.prototype.setItemDisabled=function(a,b){var c=this._items[a];
b=Jui.cast.toBool(b,true);
if(c instanceof Jui.basic.Control){c.setDisabled(b);
}else{if(c!=null){Jui.dom.tagClass(c,"JuiToolBarItemDisabled",b);
}}};
Jui.basic.ToolBar.prototype.isItemVisible=function(a){var d=this;
var c=d._items[a];
var b=c instanceof Jui.basic.Control?c.element:c;
return b.parentElement.style.display!="none";
};
Jui.basic.ToolBar.prototype.setItemVisible=function(a,d){var c=this;
var b=c._items[a];
d=Jui.cast.toBool(d,true);
if(b instanceof Jui.basic.Control){b.element.parentElement.style.display=d?"":"none";
}else{if(b!=null){b.parentElement.style.display=d?"":"none";
}}};
Jui.basic.ToolBar.prototype.getLeftRect=function(){return this._left.getBoundingClientRect();
};
Jui.basic.ToolBar.prototype.getRightRect=function(){return this._right.getBoundingClientRect();
};
Jui.basic.ToolBar.prototype.load=function(h){var d=this;
h=h||{left:[],right:[]};
d._left.innerHTML=d._getHtml(h.left);
d._right.innerHTML=d._getHtml(h.right);
for(var b=0;
b<2;
++b){var k=b==0?d._left.children:d._right.children;
for(var a=k.length-1;
a>=0;
--a){var e=k[a];
var c=e.firstChild;
var f=b==0?h.left[a]:h.right[a];
e._fixed=Jui.cast.toBool(f.fixed);
e._visible=Jui.cast.toBool(f.visible,true);
if(e.className=="JuiToolBarControlCell"){var g=Jui.basic[f.control].initialize(c,f);
if(f.name!=null){d._items[f.name]=g;
}}else{if(f.name!=null){d._items[f.name]=e.firstChild;
}if(c.className=="JuiLink"){c.onclick=Jui.basic.ToolBar.doLinkClick;
c._clickHandler=f.onclick;
}}if(!e._visible){e.style.display="none";
}}}d._adjust();
};
Jui.basic.ToolBar.prototype.disableItems=function(){for(var a in this._items){var b=this._items[a];
if(b instanceof Jui.basic.Control&&!b.isDisabled()&&!b.getArgs().keepStatus){b.setDisabled(true);
this._restoreNames[a]=1;
}}};
Jui.basic.ToolBar.prototype.restoreItems=function(){var a=this;
for(name in a._restoreNames){a._items[name].setDisabled(false);
}a._restoreNames={};
};
Jui.basic.ToolBar.doLinkClick=function(){var a=event.srcElement;
if(a._clickHandler!=null){Jui.util.execute(a._clickHandler,a);
}};
Jui.basic.ToolBar.doMenuClick=function(c){var b=this._owner;
var a=b._autoHiddenCells[parseInt(c.id)];
a.firstChild.click();
};
Jui.basic.ToolBar.doMenuHide=function(b){var a=this._owner;
Jui.dom.removeClass(a._tail,"JuiToolBarTailDropDown");
};
Jui.basic.ToolBar.doTailMouseDown=function(){var e=Jui.$owner();
var c=[];
for(var b=0;
b<e._autoHiddenCells.length;
++b){var d=e._autoHiddenCells[b].firstChild;
var a=d._owner;
c.push({id:b,text:a.getText(),icon:a.getIcon(),disabled:a.isDisabled()});
}Jui.event.stopPropagation();
Jui.dom.addClass(e._tail,"JuiToolBarTailDropDown");
e._menu.load(c);
e._menu.showTo(e._tail);
};
Jui.basic.ToolBar.prototype._getHtml=function(b){b=b||[];
var a=[];
for(var c=0;
c<b.length;
++c){var e=b[c];
if(e.control=="Splitter"){var d=e.visible==false?"JuiToolBarHiddenSplitter":"JuiToolBarVisibleSplitter";
a.push("<div class="+d+"><div class=JuiToolBarSplitterInner></div></div>");
}else{if(e.control=="Label"){a.push("<div class=JuiToolBarLabelCell><label class=JuiToolBarLabel>"+Jui.$h(e.text)+"</label></div>");
}else{if(e.control=="Link"){a.push("<div class=JuiToolBarLinkCell><label class=JuiLink>"+Jui.$h(e.text)+"</label></div>");
}else{if(e.control=="Html"){a.push("<div class=JuiToolBarHtmlCell>"+e.html+"</div>");
}else{e.highlight=true;
e.face="Tool"+e.control;
a.push("<div class=JuiToolBarControlCell _isControlCell=1>"+Jui.basic[e.control].getHtml(e)+"</div>");
}}}}}return a.join("");
};
Jui.basic.ToolBar.prototype._adjust=function(){var e=this;
for(var d=0;
d<e._autoHiddenCells.length;
++d){var a=e._autoHiddenCells[d];
if(a._visible){a.style.display="";
}}e._autoHiddenCells=[];
var f=e._left.offsetWidth+e._right.offsetWidth-e._body.offsetWidth;
var c=e._right.children;
for(var d=c.length-1;
d>=0&&f>0;
--d){var a=c[d];
if(a.firstChild._owner instanceof Jui.basic.Button&&!a._fixed&&a._visible){f-=a.offsetWidth;
a.style.display="none";
e._autoHiddenCells.unshift(a);
}}var b=e._autoHiddenCells.length>0;
e._tail.onmousedown=b?Jui.basic.ToolBar.doTailMouseDown:null;
Jui.dom.tagClass(e._tail,"JuiToolBarTailEnabled",b);
};
Jui.$define("Jui.basic.ComboButton",Jui.basic.Control);
Jui.basic.ComboButton.getHtml=function(c,f,b){c=c||{};
var a="Jui"+(c.face||"ComboButton");
var e=Jui.string.isEmpty(c.icon)?"display:none":"background-image:url("+c.icon+")";
var d=Jui.string.isEmpty(c.text)?"display:none":"";
return"<div"+Jui.$p({"class":a,id:f,style:c.style,title:c.hint})+" unselectable=on onselectstart='return false'><div class=JuiComboButtonIcon style='"+e+"'>&nbsp;</div><div class=JuiComboButtonText style='"+d+"'>"+Jui.$h(c.text)+"</div><div class=JuiComboButtonArrow>&nbsp;</div></div>";
};
Jui.basic.ComboButton.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d.onbeforedrop=b.onbeforedrop;
d.onclick=b.onclick;
d._alterable=b.alterable;
d._name=b.name;
d._face=b.face||"ComboButton";
d._dropOnly=b.dropOnly;
d._icon=b.icon;
d._text=b.text;
d._iconElem=c.children[0];
d._textElem=c.children[1];
d._arrowElem=c.children[2];
d._menu=Jui.basic.PopupMenu.create({owner:d});
d._menu.onhide=a.doMenuHide;
d._menu.onclick=a.doMenuClick;
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.setItems(b.items||[]);
return d;
};
Jui.basic.ComboButton.prototype.setDisabled=function(a){var b=this;
Jui.basic.Control.prototype.setDisabled.call(b,a);
a=b.isDisabled();
b.element.onclick=a?null:b.$class.doClick;
b.element.onmousedown=a?null:b.$class.doMouseDown;
b.element.onmouseup=a?null:b.$class.doMouseUp;
b.element.onmouseout=a?null:b.$class.doMouseOut;
};
Jui.basic.ComboButton.prototype.getIcon=function(){return this._icon;
};
Jui.basic.ComboButton.prototype.setIcon=function(a){var b=this;
var c=Jui.string.isEmpty(a);
b._icon=a;
b._iconElem.style.display=c?"none":"";
if(!c){b._iconElem.style.backgroundImage="url("+a+")";
}};
Jui.basic.ComboButton.prototype.getText=function(){return this._text;
};
Jui.basic.ComboButton.prototype.setText=function(c){var a=this;
var b=Jui.string.isEmpty(c);
a._text=c;
a._textElem.style.display=b?"none":"";
if(!b){Jui.dom.setInnerText(a._textElem,c);
}};
Jui.basic.ComboButton.prototype.setItems=function(a){var b=this;
if(JSON.stringify(a)!=JSON.stringify(b._items)){b._items=Jui.util.clone(a);
b._menuLoaded=false;
}};
Jui.basic.ComboButton.prototype.getForm=function(){return this._form;
};
Jui.basic.ComboButton.prototype.setForm=function(a){this._form=a;
};
Jui.basic.ComboButton.doClick=function(){var b=Jui.$owner();
var a=event.offsetX==null?event.layerX:event.offsetX;
if(b._dropOnly||event.srcElement==b._arrowElem||a>=b._arrowElem.offsetLeft){return;
}b.fireEvent("onclick",{id:b._id,name:b._name,text:b._text});
};
Jui.basic.ComboButton.doMouseDown=function(){var b=Jui.$owner();
var a=event.offsetX==null?event.layerX:event.offsetX;
if(/Drop/.test(b.element.className)){b.$removeElementClass(["DropUp","DropDown"]);
}else{if(b._dropOnly||event.srcElement==b._arrowElem||a>=b._arrowElem.offsetLeft){b.fireEvent("onbeforedrop");
if(!b._menuLoaded){b._menu.load(b._items);
b._menuLoaded=true;
}Jui.event.stopPropagation();
var c=b._menu.showTo(b.element);
b.$addElementClass(c.isTop?"DropUp":"DropDown");
}else{b.$addElementClass("MouseDown");
}}};
Jui.basic.ComboButton.doMouseUp=function(){var a=Jui.$owner();
a.$removeElementClass("MouseDown");
};
Jui.basic.ComboButton.doMouseOut=function(){var a=Jui.$owner(event.fromElement);
a.$removeElementClass("MouseDown");
};
Jui.basic.ComboButton.doMenuHide=function(b){var a=this.getOwner();
a.$removeElementClass(["DropUp","DropDown"]);
};
Jui.basic.ComboButton.doMenuClick=function(b){var a=this.getOwner();
a.fireEvent("onclick",{id:b.id,text:b.text,isMenuClick:true});
};
Jui.$define("Jui.basic.MultiCheckBox",Jui.basic.Box);
Jui.basic.MultiCheckBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"MultiCheckBox")+" JuiCheckParent";
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+" unselectable=on onselectstart='return false'></div>";
};
Jui.basic.MultiCheckBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"MultiCheckBox";
d._valueSplitter=b.valueSplitter||",";
d._itemWidth=b.itemWidth||0;
d._items=[];
d._elems=[];
d.onchange=b.onchange;
d.onsetfocus=b.onsetfocus;
d.setMultiSelect(Jui.cast.toBool(b.multiSelect,true));
d.setOneItemPerLine(Jui.cast.toBool(b.oneItemPerLine,false));
d.setMaxLength(b.maxLength);
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.loadItems(b.items);
d.setValue(b.value);
return d;
};
Jui.basic.MultiCheckBox.prototype.focus=function(){this.fireEvent("onsetfocus");
};
Jui.basic.MultiCheckBox.prototype.setMaxLength=function(b){var c=this;
var a=parseInt(b);
c._maxLength=isNaN(a)||a<=0?null:a;
};
Jui.basic.MultiCheckBox.prototype.setDisabled=function(b){Jui.basic.Box.prototype.setDisabled.call(this,b);
var c=this;
b=c.isDisabled();
for(var a=0;
a<c._elems.length;
++a){c._elems[a].firstChild.tabIndex=b?-1:0;
}};
Jui.basic.MultiCheckBox.prototype.isMultiSelect=function(){return this._multiSelect;
};
Jui.basic.MultiCheckBox.prototype.setMultiSelect=function(b){var a=this;
a._multiSelect=Jui.cast.toBool(b,true);
a.$tagElementClass("SingleSelect",!a._multiSelect);
};
Jui.basic.MultiCheckBox.prototype.isOneItemPerLine=function(){return this._oneItemPerLine;
};
Jui.basic.MultiCheckBox.prototype.setOneItemPerLine=function(b){var a=this;
a._oneItemPerLine=Jui.cast.toBool(b,true);
a.$tagElementClass("OneItemPerLine",a._oneItemPerLine);
};
Jui.basic.MultiCheckBox.prototype.getValue=function(){var a=this.getValues();
return a.length==0?null:a.join(this._valueSplitter);
};
Jui.basic.MultiCheckBox.prototype.setValue=function(a){this.setValues(Jui.string.isEmpty(a)?[]:(a+"").split(this._valueSplitter));
};
Jui.basic.MultiCheckBox.prototype.getValues=function(){return this._getData(function(a){return a._value;
});
};
Jui.basic.MultiCheckBox.prototype.setValues=function(a){var d=this;
var e=Jui.array.toSet(a||[]);
for(var b=0;
b<d._elems.length;
++b){var c=d._elems[b];
d._setChecked(c,c._value in e);
if(c._disabled){c.style.display=c._value in e?"":"none";
}}};
Jui.basic.MultiCheckBox.prototype.setChecked=function(d){var c=this;
for(var a=0;
a<c._elems.length;
++a){var b=c._elems[a];
if(b._value in d){c._setChecked(b,d[b._value]);
}}};
Jui.basic.MultiCheckBox.prototype.getItems=function(){return Jui.util.clone(this._items);
};
Jui.basic.MultiCheckBox.prototype.getSelectedItems=function(){return this._getData(function(a){return{value:a._value,text:a._text};
});
};
Jui.basic.MultiCheckBox.prototype.getTexts=function(){return this._getData(function(a){return a._text;
});
};
Jui.basic.MultiCheckBox.prototype.toText=function(d){var c=this;
var f=Jui.string.isEmpty(d)?{}:Jui.array.toSet(d.split(c._valueSplitter));
var e=[];
for(var a=0;
a<c._items.length;
++a){var b=c._items[a];
if(b.value in f){e.push(b.text);
}}return e.join(",");
};
Jui.basic.MultiCheckBox.prototype.loadItems=function(f){var g=this;
g._items=[];
for(var d=0,h=f||[];
d<h.length;
++d){var j=h[d];
var b=typeof(j)=="string";
g._items.push({value:b?j:j.value||j.text,text:b?j:j.text,disabled:!b&&!!j.disabled});
}Jui.array.stableSort(g._items,function(l,i){return(l.disabled?1:-1)-(i.disabled?1:-1);
});
var e=[];
for(var d=0;
d<g._items.length;
++d){var j=g._items[d];
var k={};
if(g._itemWidth>0){k.width=g._itemWidth+"px";
}if(j.disabled){k.display="none";
}e.push("<div class=JuiMultiCheckBoxItem style='"+Jui.$s(k)+"'>");
e.push("<div class=JuiCheck></div>");
e.push("<div class=JuiMultiCheckBoxText>"+Jui.$h(j.text)+"</div>");
e.push("</div>");
}g.element.innerHTML=e.join("");
g._elems=[];
for(var d=0,a=g.element.children;
d<a.length;
++d){var c=a[d];
var j=g._items[d];
c.onclick=Jui.basic.MultiCheckBox.doItemClick;
c._value=j.value;
c._text=j.text;
c._disabled=j.disabled;
g._elems.push(c);
}};
Jui.basic.MultiCheckBox.doItemClick=function(){var b=Jui.$owner();
var a=Jui.dom.getAncestorByClassName("JuiMultiCheckBoxItem");
if(!b.isDisabled()&&event.srcElement!=a){b._setChecked(a,!b._isChecked(a));
b.fireEvent("onchange");
}};
Jui.basic.MultiCheckBox.prototype._setChecked=function(d,c){var b=this;
Jui.dom.tagAttribute(d.firstChild,"checked",c,"full");
if(c&&!b._multiSelect){for(var a=0;
a<b._elems.length;
++a){var f=b._elems[a];
if(f!=d&&b._isChecked(f)){f.firstChild.removeAttribute("checked");
}}}};
Jui.basic.MultiCheckBox.prototype._isChecked=function(a){return a.firstChild.hasAttribute("checked");
};
Jui.basic.MultiCheckBox.prototype._getData=function(e){var d=this;
var a=[];
for(var b=0;
b<d._elems.length;
++b){var c=d._elems[b];
if(d._isChecked(c)){a.push(e(c));
}}return a;
};
Jui.$define("Jui.basic.Label",Jui.basic.Control);
Jui.basic.Label.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"Label");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+"></div>";
};
Jui.basic.Label.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
if(!Jui.string.isEmpty(b.html)){d.setHtml(b.html);
}else{d.setText(b.text);
}return d;
};
Jui.basic.Label.prototype.getText=function(){return this.element.innerText;
};
Jui.basic.Label.prototype.setHtml=function(a){this.element.innerHTML=a;
};
Jui.basic.Label.prototype.setText=function(a){Jui.dom.setInnerText(this.element,a||"");
};
Jui.$define("Jui.basic.MultiCheckComboBox",Jui.basic.Box);
Jui.basic.MultiCheckComboBox.getHtml=function(c,d,b){c=c||{};
var a="Jui"+(c.face||"MultiCheckComboBox");
return"<div"+Jui.$p({"class":a,id:d,style:c.style,title:c.hint})+" oncontextmenu=Jui.event.stop()><input class='JuiInput JuiMultiCheckComboBoxText' readonly><div class=JuiMultiCheckComboBoxIcon unselectable=on onselectstart='return false'></div></div>";
};
Jui.basic.MultiCheckComboBox.initialize=function(c,b,a){b=b||{};
a=a||this;
var d=this.superClass.initialize(c,b,a);
d._face=b.face||"MultiCheckComboBox";
d._icon=c.lastChild;
d._input=c.firstChild;
d._valueSplitter=b.valueSplitter||",";
d._itemWidth=b.itemWidth||0;
d._minPopupWidth=b.minPopupWidth||500;
d._values=[];
d._items=[];
d._map={};
d._popup=null;
d._popupLoaded=false;
d.onbeforedrop=b.onbeforedrop;
d.onchange=b.onchange;
d.onsetfocus=b.onsetfocus;
d.setBackgroundColor(b.backgroundColor);
d.setEmptyText(b.emptyText);
d.setOneItemPerLine(Jui.cast.toBool(b.oneItemPerLine,false));
d.setDisabled(Jui.cast.toBool(b.disabled,false));
d.loadItems(b.items);
d.setValue(b.value);
return d;
};
Jui.basic.MultiCheckComboBox.prototype.setBackgroundColor=function(a){if(!Jui.string.isEmpty(a)){this.element.style.backgroundColor=a;
}};
Jui.basic.MultiCheckComboBox.prototype.setEmptyText=function(a){this._input.placeholder=a||"";
};
Jui.basic.MultiCheckComboBox.prototype.focus=function(){this.fireEvent("onsetfocus");
};
Jui.basic.MultiCheckComboBox.prototype.setDisabled=function(a){Jui.basic.Box.prototype.setDisabled.call(this,a);
var b=this;
a=b.isDisabled();
b.element.onclick=a?null:b.$class.doClick;
b._input.tabIndex=a?-1:0;
b._input.onfocus=a?null:b.$class.doInputFocus;
b._input.onblur=a?null:b.$class.doInputBlur;
b._input.onmousedown=a?null:b.$class.doIconMouseDown;
b._icon.onmousedown=a?null:b.$class.doIconMouseDown;
};
Jui.basic.MultiCheckComboBox.prototype.isOneItemPerLine=function(){return this._oneItemPerLine;
};
Jui.basic.MultiCheckComboBox.prototype.setOneItemPerLine=function(a){this._oneItemPerLine=Jui.cast.toBool(a,true);
};
Jui.basic.MultiCheckComboBox.prototype.getValue=function(){return this._values.length==0?null:this._values.join(this._valueSplitter);
};
Jui.basic.MultiCheckComboBox.prototype.setValue=function(a){this.setValues(Jui.string.isEmpty(a)?[]:(a+"").split(this._valueSplitter));
};
Jui.basic.MultiCheckComboBox.prototype.getValues=function(){return Jui.util.clone(this._values);
};
Jui.basic.MultiCheckComboBox.prototype.setValues=function(a){var c=this;
c._values=a||[];
for(var b=c._values.length-1;
b>=0;
--b){if(!(c._values[b] in c._map)){c._values.splice(b,1);
}}c._input.value=c.toText(c._values);
};
Jui.basic.MultiCheckComboBox.prototype.getItems=function(){return Jui.util.clone(this._items);
};
Jui.basic.MultiCheckComboBox.prototype.getSelectedItems=function(){var e=this;
var b=[];
var a=Jui.array.toSet(e._values);
for(var c=0;
c<e._items.length;
++c){var d=e._items[c];
if(d.value in a){b.push(Jui.util.clone(d));
}}return b;
};
Jui.basic.MultiCheckComboBox.prototype.getTexts=function(){return Jui.array.extractProperty(this.getSelectedItems(),"text");
};
Jui.basic.MultiCheckComboBox.prototype.toText=function(d){var c=this;
if(!Jui.array.isArray(d)){d=Jui.string.isEmpty(d)?[]:d.split(c._valueSplitter);
}var f=Jui.array.toSet(d);
var e=[];
for(var a=0;
a<c._items.length;
++a){var b=c._items[a];
if(b.value in f){e.push(b.text);
}}return e.join(", ");
};
Jui.basic.MultiCheckComboBox.prototype.loadItems=function(e){var g=this;
g._items=[];
g._map={};
g._popupLoaded=false;
for(var d=0,c=e||[];
d<c.length;
++d){var b=c[d];
var a=typeof(b)=="string";
var f={value:a?b:b.value||b.text,text:a?b:b.text,disabled:!a&&!!b.disabled};
g._map[f.value]=f.text;
g._items.push(f);
}Jui.array.stableSort(g._items,function(i,h){return(i.disabled?1:-1)-(h.disabled?1:-1);
});
g.setValues(g.getValues());
};
Jui.basic.MultiCheckComboBox.doClick=function(){Jui.$owner()._input.focus();
};
Jui.basic.MultiCheckComboBox.doInputFocus=function(){Jui.$owner(this).$addElementClass("Focused");
};
Jui.basic.MultiCheckComboBox.doInputBlur=function(){Jui.$owner(this).$removeElementClass("Focused");
};
Jui.basic.MultiCheckComboBox.doIconMouseDown=function(){var h=Jui.$owner();
if(/Drop/.test(h.element.className)){h.$removeElementClass(["DropUp","DropDown"]);
return;
}Jui.event.stopPropagation();
if(h.fireEvent("onbeforedrop")!=false){if(!h._popupLoaded){h._loadPopup(h._items);
}var l=Jui.array.toSet(h._values||[]);
for(var f=0,a=h._popup.children;
f<a.length;
++f){var e=a[f];
h._setChecked(e,e._value in l);
if(e._disabled){e.style.display=e._value in l?"":"none";
}}var d=Jui.theme[h._face+".PopupOffsetH"]||0;
var g=Jui.theme[h._face+".PopupOffsetV"]||1;
var j=h.element.getBoundingClientRect();
var c=Math.round(j.right)-Math.round(j.left)+2*(d||0);
var b={left:j.left-(d||0),right:j.right-1+(d||0),top:j.bottom-1+(g||0),bottom:j.top-(g||0)};
var n="JuiMultiCheckBox JuiMultiCheckBoxMultiSelect JuiMultiCheckComboBoxPopup";
if(h._oneItemPerLine||h._items.length<=Jui.basic.MultiCheckComboBox._AUTO_SOLO_COLUMN_LIMIT){n+=" JuiMultiCheckBoxOneItemPerLine";
}else{c=Math.max(c,h._minPopupWidth);
}h._popup.className=n;
h._popup.style.width=c+"px";
h._popup.style.height="auto";
h._popup.style.display="block";
var m=h._popup.offsetHeight;
var k=Jui.popup.$show(h._popup,b,c,m,true);
Jui.dom.tagAttribute(h._popup,"Up",k.isTop);
h.$addElementClass(k.isTop?"DropUp":"DropDown",true);
return k;
}};
Jui.basic.MultiCheckComboBox.doPopupMouseDown=function(){Jui.event.stopPropagation();
};
Jui.basic.MultiCheckComboBox.doPopupClick=function(f){var a=this;
if(f==null){f=a.ownerDocument.defaultView.event;
}var e=Jui.dom.getAncestorByClassName("JuiMultiCheckBoxItem",f.target);
if(e!=null){var d=a._owner;
d._setChecked(e,!d._isChecked(e));
d._values=[];
for(var c=0,b=a.children;
c<b.length;
++c){if(d._isChecked(b[c])){d._values.push(b[c]._value);
}}d._input.value=d.toText(d._values);
d.fireEvent("onchange");
}};
Jui.basic.MultiCheckComboBox.prototype.$doPopupHide=function(){this.$removeElementClass(["DropUp","DropDown"]);
};
Jui.basic.MultiCheckComboBox._AUTO_SOLO_COLUMN_LIMIT=15;
Jui.basic.MultiCheckComboBox.prototype._loadPopup=function(b){var h=this;
if(h._popupLoaded){return;
}if(h._popup==null){var d="<div unselectable=on onselectstart='return false'></div>";
h._popup=Jui.popup.$create(d,h);
h._popup.onclick=Jui.basic.MultiCheckComboBox.doPopupClick;
h._popup.onmousedown=Jui.basic.MultiCheckComboBox.doPopupMouseDown;
h._popup.oncontextmenu=Jui.event.stop;
}var d=[];
for(var c=0;
c<h._items.length;
++c){var g=h._items[c];
var f={};
if(h._itemWidth>0){f.width=h._itemWidth+"px";
}if(g.disabled){f.display="none";
}d.push("<div class=JuiMultiCheckBoxItem style='"+Jui.$s(f)+"'>");
d.push("<div class=JuiCheck></div>");
d.push("<div class=JuiMultiCheckBoxText>"+Jui.$h(g.text)+"</div>");
d.push("</div>");
}h._popup.innerHTML=d.join("");
for(var c=0,a=h._popup.children;
c<a.length;
++c){var e=a[c];
var g=h._items[c];
e._value=g.value;
e._text=g.text;
e._disabled=g.disabled;
}h._popupLoaded=true;
};
Jui.basic.MultiCheckComboBox.prototype._setChecked=function(b,a){Jui.dom.tagAttribute(b.firstChild,"checked",a,"full");
};
Jui.basic.MultiCheckComboBox.prototype._isChecked=function(a){return a.firstChild.hasAttribute("checked");
};
Jui.$define("Jui.basic.PopupList",Jui.basic.Control);
Jui.basic.PopupList.create=function(a){a=a||{};
var b=new Jui.basic.PopupList();
b.onclick=a.onclick;
b.onhide=a.onhide;
b._owner=a.owner;
b._face=a.face||"PopupList";
b._popup=null;
b.setItems(a.items);
return b;
};
Jui.basic.PopupList.prototype.setItems=function(a){if(!Jui.array.isEmpty(a)){a=JSON.parse(JSON.stringify(a).replace(/\\n|\\r/g,""));
}var b=this;
b._items=a||[];
b._loaded=false;
};
Jui.basic.PopupList.prototype.isOpen=function(){return Jui.popup.$isOpen(this._popup);
};
Jui.basic.PopupList.prototype.showTo=function(h,c,a){var e=this;
var d=h.getBoundingClientRect();
var f={left:d.left-(c||0),right:d.right-1+(c||0),top:d.bottom-1+(a||0),bottom:d.top-(a||0)};
if(!e._loaded){e._load(e._items);
}var b=Math.round(d.right)-Math.round(d.left)+2*(c||0);
var g=Jui.popup.$show(e._popup,f,b,e._popupHeight,true);
Jui.dom.tagAttribute(e._popup,"Up",g.isTop);
return g;
};
Jui.basic.PopupList.prototype.hide=function(){if(Jui.popup.$isOpen(this._popup)){Jui.popup.$hide(this._popup);
this.fireEvent("onhide");
}};
Jui.basic.PopupList.prototype.$hidePopup=function(){this.hide();
};
Jui.basic.PopupList.doMouseDown=function(){Jui.event.stopPropagation();
};
Jui.basic.PopupList.doItemMouseOver=function(){this.setAttribute("Hover",true);
};
Jui.basic.PopupList.doItemMouseOut=function(){this.removeAttribute("Hover");
};
Jui.basic.PopupList.doTextMouseOver=function(){var a=this;
a.title=a.scrollWidth>a.clientWidth?a.innerText:"";
};
Jui.basic.PopupList.doItemClick=function(){var b=this;
var a=Jui.$owner(b);
a.hide();
a.fireEvent("onclick",{value:b._value,text:b.innerText});
};
Jui.basic.PopupList.prototype._load=function(h){var k=this;
if(k._popup==null){var g="<div class=JuiPopupList unselectable=on onselectstart='return false'></div>";
k._popup=Jui.popup.$create(g,k);
k._popup.onmousedown=Jui.basic.PopupList.doMouseDown;
k._popup.oncontextmenu=Jui.event.stop;
}k._popup.style.display="block";
k._popup.style.width="auto";
k._popup.style.height="auto";
var a=h.length>0&&h[0].items!=null&&!Jui.string.isEmpty(h[0].title);
Jui.dom.tagAttribute(k._popup,"NoTopPadding",a);
var l=[];
var d=["<table cellpadding=0 cellspacing=0>"];
for(var f=0;
f<k._items.length;
++f){var m=k._items[f];
var e=m.items;
if(e!=null&&!Jui.string.isEmpty(m.title)){d.push("<tr class=Group><td><div>"+Jui.$h(m.title)+"</div></td></tr>");
}if(e==null){l.push(m.value);
d.push("<tr _mark=Item class=Item><td><div>"+Jui.$h(m.text)+"</div></td></tr>");
}else{for(var c=0;
c<e.length;
++c){var b=e[c];
l.push(b.value);
d.push("<tr _mark=Item class=Item><td><div>"+Jui.$h(b.text)+"</div></td></tr>");
}}}d.push("</table>");
k._popup.innerHTML=d.join("");
k._popupHeight=k._popup.offsetHeight;
var o=k._popup.firstChild.rows;
for(var f=0,c=0;
f<o.length;
++f){var n=o[f];
if(n.getAttribute("_mark")=="Item"){n.onclick=Jui.basic.PopupList.doItemClick;
n._value=l[c++];
if(Jui.browser.ie){n.onmouseover=Jui.basic.PopupList.doItemMouseOver;
n.onmouseout=Jui.basic.PopupList.doItemMouseOut;
}}n.firstChild.firstChild.onmouseover=Jui.basic.PopupList.doTextMouseOver;
}k._loaded=true;
};
(function(){var a=Jui.theme.getPath();
var b=Jui.script.getPath();
Jui.script.importCss(a+"/basic/Basic.css");
Jui.script.importJs(a+"/Style.js");
Jui.script.importJs(b+"/../locale/"+Jui.i18n.$getFileName());
if(!window.crypto&&!window.msCrypto){window.addEventListener("mousemove",Jui.random.doMouseMove);
}window.addEventListener("load",Jui.popup.doWindowLoad);
window.addEventListener("resize",Jui.popup.doWindowResize);
document.addEventListener("mousedown",Jui.popup.doDocumentMouseDown);
document._ready=true;
Jui.event.attach(window,"unload",function(){document._ready=false;
});
if(Jui.window.isTop()){setInterval(Jui.popup._garbageCollect,5000);
Jui.use("Jui.option.MessageReminder");
}Jui.object.merge(Jui.browser,Jui.browser.parseUserAgent(navigator.userAgent));
if(Jui.browser.mozilla){Object.defineProperty(window.constructor.prototype,"event",{get:function(){for(var c=arguments.callee.caller;
c!=null;
c=c.caller){if(c.arguments[0] instanceof Event){return c.arguments[0];
}}}});
Object.defineProperty(Event.prototype,"srcElement",{get:function(){return this.target;
}});
Object.defineProperty(MouseEvent.prototype,"fromElement",{get:function(){var c=this.type=="mouseover"?this.relatedTarget:(this.type=="mouseout"?this.target:null);
while(c!=null&&c.nodeType!=1){c=c.parentNode;
}return c;
}});
Object.defineProperty(MouseEvent.prototype,"toElement",{get:function(){var c=this.type=="mouseover"?this.target:(this.type=="mouseout"?this.relatedTarget:null);
while(c!=null&&c.nodeType!=1){c=c.parentNode;
}return c;
}});
Object.defineProperty(MouseEvent.prototype,"offsetX",{get:function(){return this.clientX-this.target.getBoundingClientRect().left;
}});
Object.defineProperty(MouseEvent.prototype,"offsetY",{get:function(){return this.clientY-this.target.getBoundingClientRect().top;
}});
Object.defineProperty(KeyboardEvent.prototype,"keyCode",{get:function(){return this.which;
}});
Object.defineProperty(HTMLElement.prototype,"parentElement",{get:function(){return this.parentNode==this.ownerDocument?null:this.parentNode;
}});
Object.defineProperty(HTMLElement.prototype,"innerText",{get:function(){return this.textContent;
}});
}})();
