--minglei

--HTML Report/Bill

delete from TsDictionary where FId='d7b9a776-7cf9-4f2e-8694-f4d256c018c2';
delete from TsDictionaryItem where FDictionaryId='d7b9a776-7cf9-4f2e-8694-f4d256c018c2';

insert into TsDictionary set FId='562d5c31-fcf9-408b-899b-b61d1f3b5a4f', FName='QS-報表-類型', FBuiltin=1, FTextAsValue=0, FParentId=null, FDescription=null;
insert into TsDictionaryItem set FId='2bd4fb93-975f-487e-bf80-0e21186e5e36', FDictionaryId='562d5c31-fcf9-408b-899b-b61d1f3b5a4f', FValue='Html',				FText='HTML',			FIndex=1;
insert into TsDictionaryItem set FId='841d1c46-7c23-4a97-a3a9-6035b5ac2c53', FDictionaryId='562d5c31-fcf9-408b-899b-b61d1f3b5a4f', FValue='Tool',				FText='用報表工具生成',	FIndex=2;

insert into TsDictionary set FId='de2d401c-6d7f-4165-bfde-dbe5f872e8c6', FName='QS-報表數據-類型', FBuiltin=1, FTextAsValue=0, FParentId=null, FDescription=null;
insert into TsDictionaryItem set FId='a054a112-03ba-4141-b5d2-1f6e2f0c03ec', FDictionaryId='de2d401c-6d7f-4165-bfde-dbe5f872e8c6', FValue='Sql',				FText='SQL',			FIndex=1;

alter table TsReport add FType varchar(10);
insert into TsField set FId='e155bd80-9a06-4f08-a1c8-e6a8a1c0b1da', FUnitId='00000000-0000-0000-0001-000000000027', FName='FType',            FTitle='類型',     FType='ComboBox-SelectOnly',	FSize=10,   FVisible=1, FFilterByRole=0, FRequired=1, FReadOnly=0, FQueryable=1, FDictionaryId='562d5c31-fcf9-408b-899b-b61d1f3b5a4f',	FEntityUnitId=null,                                   FSupportLocalText=0,    FLocalTextField='',   FSourceType='local', FJoinField='',   FSourceField='',   FSource='',   FColSpan=1, FRowSpan=1, FIsNewRow=0,    FListWidth=100, FListAlign='default', FScale=0,    FLabelColor='',   FDefaultValue='',   FValidation='',   FRelationCapacity=null;
java setFormFields('d5fb7b93-463c-486c-9673-cff752943b3d', '基本資訊', '17484d70-8e4c-4c13-b25f-41ef03b10f93', null, 'FName,FReportCatalogId,FType,FTemplateFile,FAutoQuery');
update TsReport set FType = 'Tool' where FType is null;

alter table TsBill add FType varchar(10);
insert into TsField set FId='e8a6f3a3-7203-4ccb-88a1-2d919eb6ef9a', FUnitId='00000000-0000-0000-0001-000000000025', FName='FType',         FTitle='類型',     FType='ComboBox-SelectOnly',	FSize=10,   FVisible=1, FFilterByRole=0, FRequired=1, FReadOnly=0, FQueryable=1, FDictionaryId='562d5c31-fcf9-408b-899b-b61d1f3b5a4f',	FEntityUnitId=null,                                   FSupportLocalText=0,    FLocalTextField='',   FSourceType='local', FJoinField='',   FSourceField='',   FSource='',   FColSpan=1, FRowSpan=1, FIsNewRow=0,    FListWidth=100, FListAlign='default', FScale=0,    FLabelColor='',   FDefaultValue='',     FValidation='',   FRelationCapacity=null;
java setFormFields('70751dd6-4736-444c-ad3f-835aaba50cf8', '基本資訊', 'e58423a8-4ccb-424a-ae19-242a308a42c1', null, 'FName,FUnitId,FType,FTemplateFile,FVisible,FDefault,FDescription');
update TsBill set FType = 'Tool' where FType is null;

update TsPage set FIndex = 4 where FId='ecbfad83-144e-446c-b443-345a5291e5b7';
update TsPage set FIndex = 5 where FId='299ceead-9587-4302-afeb-ee65679d57db';
insert into TsPage set FId='394c0681-1ab1-4edd-ac65-b868f3f79fc7', FName='報表資料清單',	 FTitle='報表資料',		FCode='Qs.Report.ReportDataList',      FType='EntityList',		FIcon='quicksilver/image/unit/ReportData.png',      FUrl='quicksilver/page/template/EntityList.jsp',    FActionMethodName='Qs.ReportData.prepareList',				FLoadHandler=null,                FRelationId='def78e05-8765-420d-89d4-231d2c14e166', FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FMasterUnitId='00000000-0000-0000-0001-000000000027', FIsSlavePage=1, FEditId='4e9b96a5-4c20-42a0-8929-d83efc27af4e', FIndex=3,    FDialogWidth=null, FDialogHeight=null, FDescription=null, FVisible=1;

--報表資料清單
insert into TsToolItem set FId='ea30beb1-595e-49f6-bbd4-c79cce4d0028', FPageId='394c0681-1ab1-4edd-ac65-b868f3f79fc7', FCode='Add',     FName='新增', FHint='新增一筆記錄',                                         FLabel=null, FType='Button',      FAlign='right', FIndex=1, FWidth=0, FIcon='quicksilver/image/16/Add.png',     FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doAdd',     FChartId=null;
insert into TsToolItem set FId='d6b4801c-acac-4c04-bf87-82b3ce00ab31', FPageId='394c0681-1ab1-4edd-ac65-b868f3f79fc7', FCode='Open',    FName='打開', FHint='打開當前選中的記錄。如果選中了多筆，第一筆將被打開。', FLabel=null, FType='Button',      FAlign='right', FIndex=2, FWidth=0, FIcon='quicksilver/image/16/Open.png',    FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doOpen',    FChartId=null;
insert into TsToolItem set FId='e4fbee58-8765-4343-910e-20524125d65d', FPageId='394c0681-1ab1-4edd-ac65-b868f3f79fc7', FCode='Delete',  FName='刪除', FHint='刪除當前選中的記錄',                                   FLabel=null, FType='Button',      FAlign='right', FIndex=3, FWidth=0, FIcon='quicksilver/image/16/Delete.png',  FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doDelete',  FChartId=null;
insert into TsToolItem set FId='2857f890-3f24-4bc1-bb4c-17c13578321e', FPageId='394c0681-1ab1-4edd-ac65-b868f3f79fc7', FCode='Refresh', FName='刷新', FHint='刷新清單內容',                                         FLabel=null, FType='Button',      FAlign='right', FIndex=4, FWidth=0, FIcon='quicksilver/image/16/Refresh.png', FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doRefresh', FChartId=null;

insert into TsPage set FId='273ee2ab-5427-4c8b-be74-eb85ec30a0f6', FName='單據資料清單',	FTitle='單據資料', FCode='Qs.Bill.ReportDataList',	FType='EntityList', FIcon='quicksilver/image/unit/ReportData.png',	FUrl='quicksilver/page/template/EntityList.jsp', FActionMethodName='Qs.ReportData.prepareList', FLoadHandler=null, FRelationId='a6035890-cada-4a77-a356-d7166bdb8dac',	FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FMasterUnitId='00000000-0000-0000-0001-000000000025', FIsSlavePage=1, FEditId='4e9b96a5-4c20-42a0-8929-d83efc27af4e', FIndex=2,    FDialogWidth=null, FDialogHeight=null, FDescription=null, FVisible=1;

--單據資料清單
insert into TsToolItem set FId='4fa0b9d2-85ad-4900-9fdd-db910b9afbb5', FPageId='273ee2ab-5427-4c8b-be74-eb85ec30a0f6', FCode='Add',     FName='新增', FHint='新增一筆記錄',                                         FLabel=null, FType='Button',      FAlign='right', FIndex=1, FWidth=0, FIcon='quicksilver/image/16/Add.png',     FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doAdd',     FChartId=null;
insert into TsToolItem set FId='19a25094-13e7-466e-8be4-8a5940996716', FPageId='273ee2ab-5427-4c8b-be74-eb85ec30a0f6', FCode='Open',    FName='打開', FHint='打開當前選中的記錄。如果選中了多筆，第一筆將被打開。', FLabel=null, FType='Button',      FAlign='right', FIndex=2, FWidth=0, FIcon='quicksilver/image/16/Open.png',    FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doOpen',    FChartId=null;
insert into TsToolItem set FId='b9934850-a5e2-442c-a613-9a0a6ab17695', FPageId='273ee2ab-5427-4c8b-be74-eb85ec30a0f6', FCode='Delete',  FName='刪除', FHint='刪除當前選中的記錄',                                   FLabel=null, FType='Button',      FAlign='right', FIndex=3, FWidth=0, FIcon='quicksilver/image/16/Delete.png',  FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doDelete',  FChartId=null;
insert into TsToolItem set FId='a125923a-6c54-4a79-bac7-a140fe8dd7be', FPageId='273ee2ab-5427-4c8b-be74-eb85ec30a0f6', FCode='Refresh', FName='刷新', FHint='刷新清單內容',                                         FLabel=null, FType='Button',      FAlign='right', FIndex=4, FWidth=0, FIcon='quicksilver/image/16/Refresh.png', FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doRefresh', FChartId=null;

insert into TsPage set FId='8ae4c14c-2fa3-4cd9-883a-493c8dd5d371', FName='HTML 報表',        FTitle='HTML 報表',	FCode='Qs.Report.Html',                FType='Other',			FIcon='quicksilver/image/unit/Report.png',          FUrl='',											FActionMethodName='Qs.Report.prepareHtmlReport',			FLoadHandler='',                  FRelationId=null,                                   FUnitId='00000000-0000-0000-0001-000000000027', FMasterUnitId=null,                                   FIsSlavePage=0, FEditId='4e9b96a5-4c20-42a0-8929-d83efc27af4e', FIndex=null, FDialogWidth=null, FDialogHeight=null, FDescription=null, FVisible=1;
insert into TsPage set FId='22d22747-d103-441c-afd1-16970dfbeec6', FName='HTML 單據',		FTitle='HTML 單據',	FCode='Qs.Bill.Html',			FType='Other',      FIcon='quicksilver/image/unit/Bill.png',		FUrl='',										 FActionMethodName='Qs.Bill.prepareHtmlBill',	FLoadHandler=null, FRelationId=null,									FUnitId='00000000-0000-0000-0001-000000000025', FMasterUnitId=null,                                   FIsSlavePage=0, FEditId='4e9b96a5-4c20-42a0-8929-d83efc27af4e', FIndex=null, FDialogWidth=null, FDialogHeight=null, FDescription=null, FVisible=1;

update TsUnit set FOpenMode='System' where FCode='Qs.Bill';
update TsPage set FFormColumnCount=null where FCode='Qs.Bill.Form';

update TsUnit			set FIcon='quicksilver/image/16/Print.png' where FIcon='quicksilver/image/16/Print.gif';
update TsPage			set FIcon='quicksilver/image/16/Print.png' where FIcon='quicksilver/image/16/Print.gif';
update TsMenu			set FIcon='quicksilver/image/16/Print.png' where FIcon='quicksilver/image/16/Print.gif';
update TwButton			set FIcon='quicksilver/image/16/Print.png' where FIcon='quicksilver/image/16/Print.gif';
update TsToolItem		set FIcon='quicksilver/image/16/Print.png' where FIcon='quicksilver/image/16/Print.gif';
update TsToolSubItem	set FIcon='quicksilver/image/16/Print.png' where FIcon='quicksilver/image/16/Print.gif';

insert into TsToolItem set FId='ea5872af-8824-4433-99ec-f537933e37fb', FPageId='65866673-cc70-453d-9027-58271d9ccc9d', FCode='Print',		  FName='列印',		  FLabel=null, FType='Button',      FAlign='right', FIndex=3, FWidth=0, FDefaultEventHandler='ReportCenter.doPrint',		   FIcon='quicksilver/image/16/Print.png',     FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null;
insert into TsToolItem set FId='25794bc1-402a-4b24-8c0e-4642f51a1291', FPageId='b56f8520-79ec-465f-9d99-d36ff735a8d3', FCode='Print',	FName='列印', FLabel=null, FType='Button',      FAlign='right', FIndex=2, FWidth=0, FDefaultEventHandler='ReportShow.doPrint',   FIcon='quicksilver/image/16/Print.png',   FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null;
insert into TsToolItem set FId='c0b1b1f7-7f6e-4bbb-9465-03391d0778e1', FPageId='3ff58410-7e93-483d-9382-7d488da71203', FCode='Print',	FName='列印', FLabel=null, FType='Button',      FAlign='right', FIndex=1, FWidth=0, FDefaultEventHandler='BillShow.doPrint',   FIcon='quicksilver/image/16/Print.png',   FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null;

--Qs.ReportData-----------------------------------------------------------------

create table TsReportData
(
	FId uuid primary key,
	FCode varchar(50),
	FMultiple bit,
	FBillId uuid,
	FReportId uuid,
	FType varchar(10),
	FContent varchar(1000)
);

insert into TsUnit set FId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FCode='Qs.ReportData', FName='報表資料', FIcon='quicksilver/image/unit/ReportData.png', FEditId='541c707d-79dd-4dbb-85fc-1a214fd5fce4', FModuleId='00000000-0000-0000-0008-990000000020', FOpenMode='Dialog', FIsTreeStructure=0, FMaxTreeLevel=null, FIsSlaveUnit=0, FMasterUnitId=null, FSupportWorkflow=0, FSupportUser=0, FSupportDepartment=0, FSupportEditType=0, FSupportAttachment=0, FSupportDataPrivilege=0, FSupportVersion=0, FSupportBusinessLog=0, FSupportNote=0, FSupportSort=0, FSupportPrivilegeField=0, FIsFullTextSearch=0, FSearchAttachment=0, FSupportEqualQuery=0, FUseSystemI18nTable=0, FExtraQueryResultLimit=0, FRecordCreateInfo=0, FRecordUpdateInfo=0, FRecordDeleteInfo=0, FViewPageConditionForList=null, FViewPageConditionForLink=null, FDataSource='default', FTable='TsReportData', FKeyField='FId', FKeyType='Uuid', FNameField='FCode', FMasterField=null, FHomeClassName='com.jeedsoft.quicksilver.report.ReportDataHome', FDaoClassName='com.jeedsoft.quicksilver.report.dao.impl.ReportDataDaoImpl', FServiceClassName='com.jeedsoft.quicksilver.report.service.impl.ReportDataServiceImpl', FActionClassName='com.jeedsoft.quicksilver.report.action.impl.ReportDataActionImpl', FWebServiceUniqueField=null, FUnitFilterSql='', FBusinessFilterSql='', FDescription='';

insert into TsField set FId='48d713fb-9c57-4dd8-9362-87a529a31451', FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FName='FBillId',   FTitle='單據',     FType='EntityBox',           FSize=null, FVisible=0, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=1, FDictionaryId=null,                                   FEntityUnitId='00000000-0000-0000-0001-000000000025', FSupportLocalText=0,    FSupportI18n=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListConstantFilterSql='',   FSelectListVariableFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=1, FRowSpan=1,  FIsNewRow=0,    FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null,  FHint=null, FValidation=null, FWebServiceListQueryField=null, FWebServiceItemQueryField=null, FWebServiceCreateField=null, FCustomData='',   FAlwaysBringDataToClient=0, FDefaultValueType=null;
insert into TsField set FId='e0a2d7a8-fe92-4675-ab7f-80d81eff3c23', FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FName='FCode',     FTitle='名稱',     FType='InputBox-Text',       FSize=50,   FVisible=1, FFilterByRole=0, FRequired=1, FReadOnly=0, FQueryable=1, FDictionaryId=null,                                   FEntityUnitId=null,                                   FSupportLocalText=0,    FSupportI18n=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListConstantFilterSql='',   FSelectListVariableFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=1, FRowSpan=1,  FIsNewRow=0,    FListWidth=150, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null,  FHint=null, FValidation=null, FWebServiceListQueryField=null, FWebServiceItemQueryField=null, FWebServiceCreateField=null, FCustomData='',   FAlwaysBringDataToClient=0, FDefaultValueType=null;
insert into TsField set FId='974a6121-671f-40ab-9388-ec6c4baeb8aa', FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FName='FContent',  FTitle='內容',     FType='TextBox',             FSize=1000, FVisible=1, FFilterByRole=0, FRequired=1, FReadOnly=0, FQueryable=1, FDictionaryId=null,                                   FEntityUnitId=null,                                   FSupportLocalText=0,    FSupportI18n=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListConstantFilterSql='',   FSelectListVariableFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=0, FRowSpan=12, FIsNewRow=0,    FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null,  FHint=null, FValidation=null, FWebServiceListQueryField=null, FWebServiceItemQueryField=null, FWebServiceCreateField=null, FCustomData='',   FAlwaysBringDataToClient=0, FDefaultValueType=null;
insert into TsField set FId='dc96e39b-f23f-4572-bdbf-ec3698fef311', FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FName='FId',       FTitle='ID',       FType='InputBox-Key',        FSize=null, FVisible=0, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=0, FDictionaryId=null,                                   FEntityUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FSupportLocalText=null, FSupportI18n=null, FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListConstantFilterSql=null, FSelectListVariableFilterSql=null, FSourceType='local', FJoinField=null, FSourceField=null, FSource=null, FColSpan=1, FRowSpan=1,  FIsNewRow=null, FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null,  FHint=null, FValidation=null, FWebServiceListQueryField=null, FWebServiceItemQueryField=null, FWebServiceCreateField=null, FCustomData=null, FAlwaysBringDataToClient=0, FDefaultValueType=null;
insert into TsField set FId='140db8f4-705f-46ed-8b48-0c226ac97d35', FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FName='FMultiple', FTitle='是否多筆', FType='CheckBox',            FSize=null, FVisible=1, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=1, FDictionaryId=null,                                   FEntityUnitId=null,                                   FSupportLocalText=0,    FSupportI18n=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListConstantFilterSql='',   FSelectListVariableFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=1, FRowSpan=1,  FIsNewRow=0,    FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null,  FHint=null, FValidation=null, FWebServiceListQueryField=null, FWebServiceItemQueryField=null, FWebServiceCreateField=null, FCustomData='',   FAlwaysBringDataToClient=0, FDefaultValueType=null;
insert into TsField set FId='20d1adae-16eb-4c58-9b11-a7066cbfa760', FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FName='FReportId', FTitle='報表',     FType='EntityBox',           FSize=null, FVisible=0, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=1, FDictionaryId=null,                                   FEntityUnitId='00000000-0000-0000-0001-000000000027', FSupportLocalText=0,    FSupportI18n=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListConstantFilterSql='',   FSelectListVariableFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=1, FRowSpan=1,  FIsNewRow=0,    FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null,  FHint=null, FValidation=null, FWebServiceListQueryField=null, FWebServiceItemQueryField=null, FWebServiceCreateField=null, FCustomData='',   FAlwaysBringDataToClient=0, FDefaultValueType=null;
insert into TsField set FId='4a38d332-4a79-4340-8e18-3300a8424c30', FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FName='FType',     FTitle='類型',     FType='ComboBox-SelectOnly', FSize=10,   FVisible=1, FFilterByRole=0, FRequired=1, FReadOnly=0, FQueryable=1, FDictionaryId='de2d401c-6d7f-4165-bfde-dbe5f872e8c6', FEntityUnitId=null,                                   FSupportLocalText=0,    FSupportI18n=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSelectListConstantFilterSql='',   FSelectListVariableFilterSql='',   FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=1, FRowSpan=1,  FIsNewRow=0,    FListWidth=100, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue='Sql', FHint=null, FValidation=null, FWebServiceListQueryField=null, FWebServiceItemQueryField=null, FWebServiceCreateField=null, FCustomData='',   FAlwaysBringDataToClient=0, FDefaultValueType='ServerValue';

java setQueryFormFields('12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', 'FCode');

insert into TsRelation set FId='921a2f1b-33d8-4d1f-aa70-f97b97c10b64', FOppositeId='a6035890-cada-4a77-a356-d7166bdb8dac', FName='報表資料-單據', FOppositeName='單據-報表資料', FUnitId1='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FUnitId2='00000000-0000-0000-0001-000000000025', FType='field', FTable=null, FField1='FId', FField2='FBillId',   FDeleteAction1='unset', FDeleteAction2='cancel', FPrivilegeTypeId1=null, FPrivilegeTypeId2=null;
insert into TsRelation set FId='4c4a66b8-e966-48ee-aa66-7c8364c60760', FOppositeId='def78e05-8765-420d-89d4-231d2c14e166', FName='報表資料-報表', FOppositeName='報表-報表資料', FUnitId1='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FUnitId2='00000000-0000-0000-0001-000000000027', FType='field', FTable=null, FField1='FId', FField2='FReportId', FDeleteAction1='unset', FDeleteAction2='cancel', FPrivilegeTypeId1=null, FPrivilegeTypeId2=null;

insert into TsPage set FId='5045c18e-39e6-456a-8a30-fd51871e8f53', FName='報表資料主清單',   FTitle='報表資料清單', FCode='Qs.ReportData.List',       FPlatform='Computer', FType='EntityList', FIcon='quicksilver/image/unit/ReportData.png', FUrl='quicksilver/page/template/EntityList.jsp', FActionMethodName='Qs.ReportData.prepareList', FLoadHandler=null, FRelationId=null, FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FMasterUnitId=null,                                   FIsSlavePage=0, FIndex=null, FDialogWidth=null, FDialogHeight=null, FDialogMaximized=null, FQueryFormAutoQuery=1, FHasViewFrame=null, FQueryOnLoad=null, FQuerySchemaId=null, FCreateQuerySchemaBox=null, FCreateKeywordBox=null, FToolItemInitArguments=null, FVisible=1, FVisibleCondition=null, FDescription=null, FEditId=null, FFormColumnCount=null;
insert into TsPage set FId='22c0fd19-f34a-48c1-9e79-73e164b8225f', FName='報表資料選擇清單', FTitle='報表資料清單', FCode='Qs.ReportData.SelectList', FPlatform='Computer', FType='EntityList', FIcon='quicksilver/image/unit/ReportData.png', FUrl='quicksilver/page/template/EntityList.jsp', FActionMethodName='Qs.ReportData.prepareList', FLoadHandler=null, FRelationId=null, FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FMasterUnitId=null,                                   FIsSlavePage=0, FIndex=null, FDialogWidth=null, FDialogHeight=null, FDialogMaximized=null, FQueryFormAutoQuery=1, FHasViewFrame=null, FQueryOnLoad=null, FQuerySchemaId=null, FCreateQuerySchemaBox=null, FCreateKeywordBox=null, FToolItemInitArguments=null, FVisible=1, FVisibleCondition=null, FDescription=null, FEditId=null, FFormColumnCount=null;
insert into TsPage set FId='120382ae-b48a-40f7-b57b-a81e21de8767', FName='報表資料表單',     FTitle='表單',         FCode='Qs.ReportData.Form',       FPlatform='Computer', FType='EntityForm', FIcon='quicksilver/image/unit/Form.png',       FUrl='quicksilver/page/template/EntityForm.jsp', FActionMethodName='Qs.ReportData.prepareForm', FLoadHandler=null, FRelationId=null, FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FMasterUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c', FIsSlavePage=1, FIndex=1,    FDialogWidth=null, FDialogHeight=500,  FDialogMaximized=null, FQueryFormAutoQuery=1, FHasViewFrame=null, FQueryOnLoad=null, FQuerySchemaId=null, FCreateQuerySchemaBox=null, FCreateKeywordBox=null, FToolItemInitArguments=null, FVisible=1, FVisibleCondition=null, FDescription=null, FEditId=null, FFormColumnCount=null;

--報表資料主清單
insert into TsToolItem set FId='fd3cfc07-f7ff-441b-91b0-29f0f0fe9490', FPageId='5045c18e-39e6-456a-8a30-fd51871e8f53', FCode='Add',     FName='新增', FHint='新增一筆記錄',                                         FLabel=null, FType='Button',      FAlign='right', FIndex=1, FWidth=0, FIcon='quicksilver/image/16/Add.png',     FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doAdd',     FChartId=null;
insert into TsToolItem set FId='240c2cb9-6921-48d8-8b37-76767605bd62', FPageId='5045c18e-39e6-456a-8a30-fd51871e8f53', FCode='Open',    FName='打開', FHint='打開當前選中的記錄。如果選中了多筆，第一筆將被打開。', FLabel=null, FType='Button',      FAlign='right', FIndex=2, FWidth=0, FIcon='quicksilver/image/16/Open.png',    FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doOpen',    FChartId=null;
insert into TsToolItem set FId='7f4f9cb4-be42-4efd-9dfb-4ac87c749469', FPageId='5045c18e-39e6-456a-8a30-fd51871e8f53', FCode='Delete',  FName='刪除', FHint='刪除當前選中的記錄',                                   FLabel=null, FType='Button',      FAlign='right', FIndex=3, FWidth=0, FIcon='quicksilver/image/16/Delete.png',  FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doDelete',  FChartId=null;
insert into TsToolItem set FId='54f2b5b1-8720-4421-92bd-fe6237daaa01', FPageId='5045c18e-39e6-456a-8a30-fd51871e8f53', FCode='Refresh', FName='刷新', FHint='刷新清單內容',                                         FLabel=null, FType='Button',      FAlign='right', FIndex=4, FWidth=0, FIcon='quicksilver/image/16/Refresh.png', FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doRefresh', FChartId=null;

--報表資料選擇清單
insert into TsToolItem set FId='dd5a70d5-97e2-488f-957f-3d56322ef50f', FPageId='22c0fd19-f34a-48c1-9e79-73e164b8225f', FCode='ConfirmSelection', FName='確定', FHint=null,                                                   FLabel=null, FType='Button', FAlign='right', FIndex=1, FWidth=0, FIcon='quicksilver/image/16/Ok.png',   FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null, FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doSelectListConfirm', FChartId=null;
insert into TsToolItem set FId='1af6aef3-40d9-4212-ba8d-ad7afcb7377d', FPageId='22c0fd19-f34a-48c1-9e79-73e164b8225f', FCode='Add',              FName='新增', FHint='新增一筆記錄',                                         FLabel=null, FType='Button', FAlign='right', FIndex=2, FWidth=0, FIcon='quicksilver/image/16/Add.png',  FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null, FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doAdd',               FChartId=null;
insert into TsToolItem set FId='348d6705-52eb-41dd-a1ff-2a91ecd76db2', FPageId='22c0fd19-f34a-48c1-9e79-73e164b8225f', FCode='Open',             FName='打開', FHint='打開當前選中的記錄。如果選中了多筆，第一筆將被打開。', FLabel=null, FType='Button', FAlign='right', FIndex=3, FWidth=0, FIcon='quicksilver/image/16/Open.png', FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null, FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityList.doOpen',              FChartId=null;

--報表資料表單
insert into TsToolItem set FId='fec0809f-36b8-40fe-9550-909483b48ff5', FPageId='120382ae-b48a-40f7-b57b-a81e21de8767', FCode='Save',  FName='保存', FHint=null, FLabel=null, FType='Button',      FAlign='right', FIndex=1, FWidth=0, FIcon='quicksilver/image/16/Save.png',  FScale=null, FEntityUnitId=null, FDefaultValue=null, FSubItemSource=null,           FDictionaryId=null, FSubItemRoutine=null, FVisibleCondition=null, FEnableCondition=null, FHandleType='JavaScript', FHandlePageId=null, FConfirmMessage=null, FDefaultEventHandler='EntityForm.doSave', FChartId=null;

insert into TsForm set FDefault=1, FEditableCondition=null, FGroupMode='None', FId='289fe6b9-0479-4b75-b6ff-d777fedcb45f', FIndex=1, FName='默認', FPageId=null, FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c';
java setFormFields('289fe6b9-0479-4b75-b6ff-d777fedcb45f', 'FCode,FType,FMultiple,FContent');

insert into TsList set FDefault=1, FId='55867046-b3d7-4ff2-9ce9-45a88b730fd9', FIndex=null, FMultiPage=1, FName='報表資料清單',     FPageId=null,                                   FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c';
insert into TsList set FDefault=0, FId='81caa8f6-8483-445b-8109-77bafbd4d5a8', FIndex=null, FMultiPage=1, FName='報表資料選擇清單', FPageId='22c0fd19-f34a-48c1-9e79-73e164b8225f', FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c';
insert into TsList set FDefault=0, FId='bbbc3ab8-b37d-405e-89c0-23fd384f4154', FIndex=null, FMultiPage=1, FName='報表資料首頁清單', FPageId='9b796431-f132-49d1-b306-5d1d618f9c1b', FUnitId='12a6880c-0e15-4ea3-83c6-0f9d9f6e469c';
java setListFields('55867046-b3d7-4ff2-9ce9-45a88b730fd9', 'FCode,FMultiple,FType,FContent');
java setListFields('81caa8f6-8483-445b-8109-77bafbd4d5a8', 'FCode,FMultiple,FType,FContent');
java setListFields('bbbc3ab8-b37d-405e-89c0-23fd384f4154', 'FCode,FMultiple,FType,FContent');

--Label/Button Field

insert into TsDictionaryItem set FId='4fea5ff6-5962-4c21-8707-efe642fe9204', FDictionaryId='4d2eec6d-5f41-4c38-9ad1-c04ded9e3110', FValue='Label',					FText='標籤',			FIndex=26;
insert into TsDictionaryItem set FId='dc5c78f4-de41-4955-83d8-d9f554f485a8', FDictionaryId='4d2eec6d-5f41-4c38-9ad1-c04ded9e3110', FValue='Button',					FText='按鈕',			FIndex=27;

delete from TsDictionaryItem where FDictionaryId='4298e81b-fd60-448b-be24-88730cf0c73c' and FValue='template';
insert into TsDictionaryItem set FId='bc7c3ff6-c338-4ea4-98d2-46d2a469e21a', FDictionaryId='4298e81b-fd60-448b-be24-88730cf0c73c', FValue='constant',				FText='固定值',			FIndex=4;

update TsPage set FLoadHandler='FieldForm.doLoad' where FCode='Qs.Field.Form';
update TsScript set FUrl='quicksilver/page/unit/FieldForm.js' where FUrl='quicksilver/page/unit/FieldEdit.js';
update TsToolItem set FDefaultEventHandler='FieldForm.doGenerateSlavePage' where FPageId='2bc7e24e-27aa-4649-83ad-4af8dc1e555a' and FDefaultEventHandler='FieldEdit.doGenerateSlavePage';

insert into TsTextResource set FId='64f82404-69c6-4438-af5c-9f244be93d81', FCode='T.Qs.Field.HintTitle.Button',							FValue='按鈕文字';
insert into TsTextResource set FId='2f18eaf0-66c8-4b63-a87e-7bf0d53dd594', FCode='T.Qs.Field.HintTitle.Label',							FValue='標籤文字';

--Grid Button/ComboButton

alter table TsFieldGridColumn add FControls varchar(1000);
insert into TsField set FId='97f9e7a5-37ad-47ee-9cf1-38219218abef', FUnitId='7477c6b4-6db8-4969-ace9-659234e58974', FName='FControls',  FTitle='控制項(JSON Array)',	FType='TextBox',			 FSize=1000, FVisible=1, FFilterByRole=0, FRequired=0, FReadOnly=0, FQueryable=1, FDictionaryId=null,                                   FEntityUnitId=null,                                   FSupportLocalText=0,    FSupportI18n=0,    FLocalTextField=null, FRelationTable=null, FRelationCapacity=null, FRelationId=null, FSourceType='local', FJoinField=null, FSourceField=null, FSource='',   FColSpan=0, FRowSpan=11,	FIsNewRow=0,    FListWidth=150, FListAlign='default', FScale=null, FLabelColor=null, FDefaultValue=null, FHint=null, FValidation=null, FWebServiceListQueryField=null, FWebServiceItemQueryField=null, FWebServiceCreateField=null, FCustomData='',   FSelectListConstantFilterSql='',   FSelectListVariableFilterSql='';
java setFormFields('222899b1-a2ac-475d-ba9f-216b57661726', '基本資訊', '3c86a66c-510a-4363-8efb-3b2cd2ec5fdc', null, 'FKey,FTitle,FType,FControls');
insert into TsScript set FId='e7934dd7-5eef-4f0b-bb84-c9b6aa3c001d', FIndex=1, FPageId='d4ad1695-a996-4cca-85e8-f8f5e442137c', FUrl='quicksilver/page/unit/FieldGridColumnForm.js';

delete from TsPage where FId='ec8043ec-6064-44ab-9b48-331a39a290b8';
delete from TsToolItem where FPageId='ec8043ec-6064-44ab-9b48-331a39a290b8';
update TsPage set FDialogHeight=null, FLoadHandler='FieldGridColumnForm.doLoad' where FCode='Qs.FieldGridColumn.Form';

update TsDictionaryItem set FValue='Control', FText='按鈕/下拉按鈕/連結' where FDictionaryId='5317d1e1-5785-4ffd-b2a1-4fd5d0bbd99c' and FValue='Link';
update TsFieldGridColumn set FType='Control' where FType='Link';

--MultiCheckBox

insert into TsTextResource set FId='45e78767-38b9-4a69-bea0-bb481f87d9de', FCode='T.Jui.BackForm.MultiCheckBox.TooManyItems',			FValue='“${0}”最多允許勾選 ${1} 項。';

--Relogin

update TsParameterDefinition set FIndex = FIndex + 1 where FParameterGroupId='a1f8cfc6-2cc8-4c27-ba78-74c1455b8ca9' and FIndex > (select FIndex from TsParameterDefinition where FCode='QsLoginHandler');
insert into TsParameterDefinition set FId='35a46b93-fa4e-4b74-836b-e689a9e6b3c0', FName='每用戶只能登錄一個 Session',	FCode='QsOneSessionPerUser',				FParameterGroupId='a1f8cfc6-2cc8-4c27-ba78-74c1455b8ca9', FType='CheckBox',				FRange='System',		FRowSpan=1, FColSpan=1, FRequired=0, FVisible=1, FIndex=6;

insert into TsDictionaryItem set FId='da70e353-f848-453d-b683-71d8042e7167', FDictionaryId='9d32f429-f312-48d5-8990-3ad57804d04d', FValue='ReloginOut',			FText='重複登錄自動斷開',	FIndex=6;
insert into TsTextResource set FId='96efffba-a6e5-4eac-8175-0d0d487e8f89', FCode='T.Qs.Auth.ReloginOut',								FValue='您已在其它位置登錄。';
